import{o as a,a as r,f as e,A as _,I as N,b as E,c as se,P as ne,C as oe,d as o,e as l,u as t,i as S,k as V,F as $,J as R,K as H,n as D,t as p,j as I,h as d,w as ie,g as le,N as G,V as ae}from"./app.ef8465a5.js";import{B as re}from"./package.7eb6b825.js";import{_ as de}from"./InputError.f4d887f9.js";import{a as ue,r as ce}from"./XMarkIcon.897ee74f.js";import{B as fe,L as pe,j as me,H as ve,A as _e}from"./combobox.48bc8437.js";import{f as P,o as M}from"./transition.95d0a863.js";import{N as J,_ as K,U as Q}from"./dialog.d3da9daf.js";function ge(g,w){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}function xe(g,w){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})])}function F(g,w){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})])}function O(g,w){return a(),r("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})])}const he={class:"relative mt-1"},be={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},ye={class:"absolute inset-y-0 left-0 flex items-center pr-2 pb-1 pl-1"},we={class:"absolute rounded-md bg-white pt-1 shadow-lg w-full mt-1"},Ce={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},ke=["onClick"],Ae={class:"absolute inset-y-0 right-0 flex items-center pr-1"},Be=["onClick"],ze={class:"rounded-full bg-blue-200 hover:bg-blue-400 text-blue-500 hover:text-blue-700 transition duration-300 p-1 block"},je=["onClick"],Se={class:"rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 transition duration-300 p-1 block"},Ve={class:"text-center"},Me={class:"w-full flex items-center justify-center"},Te={class:"w-full flex items-center justify-center"},Le=e("div",{class:"fixed inset-0 bg-black bg-opacity-25 z-[50]"},null,-1),Ne={class:"fixed inset-0 overflow-y-auto z-[60]"},$e={class:"flex min-h-full items-center justify-center p-4 text-center"},De={class:"absolute right-0 top-0"},Ie={class:"mt-2 grid grid-cols-2"},Pe=["onClick"],Fe={class:"col-span-1 flex items-center justify-center"},Oe={key:0,class:"lg:w-[45px] lg:h-[75px] sm:w-[60px] sm:h-[90px] w-[70px] h-[100px]"},Ue=["src","alt"],qe={key:1,class:"h-full w-full py-2 px-1"},Ee={class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Re={class:"flex flex-col col-span-3"},He={class:"my-1 text-sm rounded-xl bg-gray-200"},Ge=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Gamme",-1),Je={class:"my-1 text-sm rounded-xl bg-gray-200"},Ke=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Design",-1),Qe={class:"my-1 text-sm rounded-xl bg-gray-200"},We=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Couleur",-1),Xe={class:"my-1 text-sm rounded-xl bg-gray-200"},Ye=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Dimension",-1),Ze={class:"my-1 text-sm rounded-xl bg-gray-200"},et=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Quantiter",-1),tt={class:"my-1 text-sm rounded-xl bg-gray-200"},st=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Prix unitaire",-1),nt={class:"mt-4"},ot=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),it={class:"fixed inset-0 overflow-y-auto"},lt={class:"flex min-h-full items-center justify-center p-4 text-center"},at=e("input",{type:"hidden",name:"id_produit_modal",id:"id_produit_modal"},null,-1),rt=e("input",{type:"hidden",name:"key_tab_modal",id:"key_tab_modal"},null,-1),dt=e("input",{type:"hidden",name:"qte_modal",id:"qte_modal"},null,-1),ut={class:"mt-2"},ct={class:"text-sm text-gray-500"},ft=e("label",{class:"lg:text-lg text-sm",for:"ref"}," R\xE9f\xE9rence : ",-1),pt={class:"mt-4 flex flex-row-reverse"},mt=e("button",{type:"submit",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 transition duration-300"}," Valider ",-1),vt={class:"fixed bottom-10 right-10 z-[50] overflow-hidden"},_t=e("span",{class:"translate-x-full group-hover:relative absolute group-hover:translate-x-0 transition-all ease-in-out duration-100"},"Ajouter commande client",-1),kt={__name:"ListClients",props:["data"],setup(g){var f=_(g.data),W=f.value.id_panier_edi,m=_(f.value.clients),v=_(),X=_(N().props.value.session.typeVente),x=m.value.findIndex(i=>i.client.id_client_edi==f.value.clientActuel.id_client_edi),h=_(m.value[x!=-1?x:0]);let u=_("");var b=_(!1),C=i=>{b.value=i},k=E({ref_externe:""});let T=se(()=>u.value===""?m.value:m.value.filter(i=>i.client.ref_externe.toLowerCase().includes(u.value.toLowerCase())));const L=_(!1);function A(){L.value=!1}function Y(i,n){i.preventDefault(),L.value=!0,v.value=n}var Z=i=>{Swal.fire({title:"Attention",text:"Etes-vous de supprimer cette article de la commande ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(n=>{n.isConfirmed&&E({id_panier_edi_list:i}).post("/dropshipping/panier/delete",{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer de la commande"}):Toast.fire({icon:"error",title:"Une erreur c'est produit lors de la supression du produit de la commande"})}})})},ee=(i,n,c)=>{i.preventDefault(),Swal.fire({title:"Attention",text:"Etes-vous sur de supprimer la commande client "+c+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(s=>{s.isConfirmed&&G.Inertia.post("/dropshipping/clients/delete",{id_client_edi:n,id_panier_edi:W},{onSuccess:y=>{y.props.session.status==!0?Toast.fire({icon:"success",title:"La commande client "+c+" \xE0 bien \xE9t\xE9 suprimmer !"}):Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la supression de la commande client"+c+", veuillez ressayer !"})}})})},te=i=>(Math.round(i*100)/100).toFixed(2),U=i=>{new FormData(i.target),k.post("/dropshipping/clients/add",{preserveScroll:!0,preserveState:!0,onSuccess:n=>{n.props.session.statut?(C(!1),Toast.fire({icon:"success",title:"La commande a \xE9t\xE9 ajouter avec succ\xE8s"})):Toast.fire({icon:"error",title:n.props.session.msg})}})},q=(i,n=!1)=>{G.Inertia.post("/dropshipping/clients/edit",{id_client_edi:i},{preserveScroll:!0,preserveState:!0,onSuccess:c=>{c.props.session.status?(C(!1),n&&A(),Toast.fire({icon:"info",title:"La commande "+f.value.clientActuel.ref_externe+" a \xE9t\xE9 s\xE9lectionner !"})):Toast.fire({icon:"error",title:"Une erreur est survenue, essayer d'actualiser la page."})}})};return ne(f,()=>{m.value!=null&&(x=m.value.findIndex(i=>i.client.id_client_edi==f.value.clientActuel.id_client_edi),h.value=m.value[x!=-1?x:0])}),oe(()=>{if(f.value=N().props.value.PanierDrop.panier,m.value=f.value.clients,v.value!=null){var i=N().props.value.PanierDrop.panier.clients,n=i.findIndex(c=>c.client.id_client_edi==v.value.client.id_client_edi);n!=-1&&(v.value=i[n])}}),(i,n)=>{const c=ae("ImageOff");return a(),r($,null,[o(t(_e),{modelValue:t(h),"onUpdate:modelValue":n[3]||(n[3]=s=>S(h)?h.value=s:h=s),class:"z-40"},{default:l(()=>[e("div",he,[e("div",be,[e("div",ye,[o(re,{class:"text-lg text-gray-400","aria-hidden":"true"})]),o(t(fe),{class:"w-full border-none py-2 pl-6 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:s=>s.client.ref_externe,onChange:n[0]||(n[0]=s=>S(u)?u.value=s.target.value:u=s.target.value)},null,8,["displayValue"]),o(t(pe),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:l(()=>[o(t(ge),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),o(t(P),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:n[2]||(n[2]=s=>S(u)?u.value="":u="")},{default:l(()=>[e("div",we,[o(t(me),{class:"max-h-36 w-full overflow-auto text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:l(()=>[t(T).length===0&&t(u)!==""?(a(),r("div",Ce," Aucun r\xE9sultat ")):V("",!0),(a(!0),r($,null,R(t(T),(s,y)=>(a(),H(t(ve),{as:"template",key:y,value:s},{default:l(({selected:B,active:z})=>[e("li",{onClick:j=>t(q)(s.client.id_client_edi),class:D(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-emerald-500 text-white":z,"text-primary-400":!z}])},[B?(a(),r("span",{key:0,class:D(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":z,"text-teal-400":!z}])},[o(t(ue),{class:"h-5 w-5","aria-hidden":"true"})],2)):V("",!0),e("span",{class:D(["block truncate pr-14",{"font-medium":B,"font-normal":!B}])},p(s.client.ref_externe),3),e("div",Ae,[e("button",{onClick:I(j=>Y(j,s),["stop"]),class:"w-full h-full px-2"},[e("span",ze,[o(t(xe),{class:"h-4 w-4"})])],8,Be),e("button",{onClick:I(j=>t(ee)(j,s.client.id_client_edi,s.client.ref_externe),["stop"]),class:"w-full h-full px-2"},[e("span",Se,[o(t(O),{class:"h-4 w-4"})])],8,je)])],10,ke)]),_:2},1032,["value"]))),128))]),_:1}),e("div",Ve,[e("button",{onClick:n[1]||(n[1]=s=>t(C)(!0)),class:"py-2 text-sm overflow-hidden hover:bg-green-200 hover:text-green-600 w-full rounded-md transition duration-300"},[e("span",Me,[o(t(F),{class:"w-5 h-5","aria-hidden":"true"}),d("Ajouter commande clients")]),e("span",Te,p(t(T).length===0?t(u):""),1)])])])]),_:1})])]),_:1},8,["modelValue"]),o(t(P),{appear:"",show:L.value,as:"template"},{default:l(()=>[o(t(J),{as:"div",onClose:A,class:"relative z-[60]"},{default:l(()=>[o(t(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:l(()=>[Le]),_:1}),e("div",Ne,[e("div",$e,[o(t(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:l(()=>[o(t(K),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:l(()=>[o(t(Q),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 relative"},{default:l(()=>[d(" Commande Client N\xB0 : "+p(t(v).client.ref_externe)+" ",1),e("div",De,[e("button",{onClick:A,class:"rounded-full p-1 hover:bg-red-200 hover:text-red-400 transition duration-300"},[o(t(ce),{class:"w-4 h-4"})])])]),_:1}),e("div",Ie,[(a(!0),r($,null,R(t(v).produits,(s,y)=>(a(),r("div",{key:y,class:"sm:col-span-1 col-span-2 grid grid-cols-4 bg-gray-100 p-1 m-2 relative rounded-xl"},[e("button",{onClick:B=>t(Z)(s.panier.id_panier_edi_list),class:"absolute left-2 top-2 rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 p-1 transition duration-300",type:"button"},[o(t(O),{class:"w-4 h-4"})],8,Pe),e("div",Fe,[s.photo!=null&&s.photo.img_produit!=null?(a(),r("div",Oe,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+s.photo.img_produit,alt:s.code_sku,class:"w-full h-full object-cover"},null,8,Ue)])):(a(),r("div",qe,[e("div",Ee,[o(c)])]))]),e("div",Re,[e("span",He,[Ge,d(" "+p(s.gamme.nom_gamme),1)]),e("span",Je,[Ke,d(" "+p(s.design.nom_design),1)]),e("span",Qe,[We,d(" "+p(s.couleur.nom_couleur),1)]),e("span",Xe,[Ye,d(" "+p(s.dimension.largeur+"x"+s.dimension.longueur)+"cm",1)]),e("span",Ze,[et,d(" "+p(s.panier.quantiter),1)]),e("span",tt,[st,d(" "+p(t(te)(s.prixProduit))+" \u20AC",1)])])]))),128))]),e("div",nt,[t(v).client.id_client_edi!=t(f).clientActuel.id_client_edi?(a(),r("button",{key:0,onClick:n[4]||(n[4]=s=>t(q)(t(v).client.id_client_edi,!0)),type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-green-200 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2"},[o(t(F),{class:"h-4 w-4 text-green-500 mt-0 mr-1"}),d(" Ajouter des produits ")])):V("",!0),e("button",{type:"button",onClick:A,class:"inline-flex justify-center rounded-md border border-transparent bg-red-200 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2"},[o(t(O),{class:"h-4 w-4 text-red-500 mt-0 mr-1"}),d(" Supprimer la commande ")])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),t(X)==2?(a(),H(t(P),{key:0,appear:"",show:t(b),as:"template",unmount:!1},{default:l(()=>[o(t(J),{as:"div",class:"relative z-50"},{default:l(()=>[o(t(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:l(()=>[ot]),_:1}),e("div",it,[e("div",lt,[o(t(M),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:l(()=>[o(t(K),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:l(()=>[o(t(Q),{as:"h3",class:"lg:text-lg text-sm font-medium leading-6 text-gray-900"},{default:l(()=>[d(" Saisissez la r\xE9f\xE9rence de la commande client. ")]),_:1}),e("form",{onSubmit:n[7]||(n[7]=I((...s)=>t(U)&&t(U)(...s),["prevent"]))},[at,rt,dt,e("div",ut,[e("div",ct,[ft,ie(e("input",{"onUpdate:modelValue":n[5]||(n[5]=s=>t(k).ref_externe=s),class:"lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"ref",type:"text",name:"ref_externe",placeholder:"Saisissez la r\xE9f\xE9rence de la commande"},null,512),[[le,t(k).ref_externe]]),o(de,{class:"mt-2",message:t(k).errors.ref_externe},null,8,["message"])])]),e("div",pt,[mt,e("button",{onClick:n[6]||(n[6]=s=>{S(b)?b.value=!1:b=!1}),type:"button",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Fermer ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])):V("",!0),e("div",vt,[e("button",{onClick:n[8]||(n[8]=s=>t(C)(!0)),class:"group flex items-center justify-center text-white hover:px-4 w-10 hover:w-auto h-10 bg-green-600 rounded-full hover:bg-green-700 active:shadow-lg mouse shadow transition-all ease-in duration-300 focus:outline-none"},[o(t(F),{class:"w-5 h-5 group-hover:mr-1"}),_t])])],64)}}};export{kt as _};
