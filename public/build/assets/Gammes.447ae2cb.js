import{z as u,P as v,A as X,B as Q,V as $,o as a,a as i,d as _,u as s,f as e,t as o,e as K,F as h,K as y,j as J,n as j,h as I,k as f,H as W,Q as V,O as Y,M as k,b as Z}from"./app.528cad76.js";import{_ as S,C as A,R as ee}from"./AuthenticatedLayout.f90d6176.js";import{S as te,L as se}from"./Magnify.7af6d6c9.js";import{E as ne}from"./MicrosoftExcel.3cf81509.js";import"./LangueChoice.c0ee0651.js";const re={class:"container mx-auto mt-5"},oe=e("h1",{class:"font-semibold text-sm lg:text-2xl sm:text-lg text-gray-800 py-2"},"Products",-1),ae={class:"bg-primary-50 p-5 rounded my-3 grid grid-cols-4"},ie={class:"col-span-1"},le=e("h2",{class:"text-2xl text-gray-700"},"Information du client : ",-1),ce={class:"flex flex-col bg-primary-100 py-2 px-4 m-2 rounded-xl"},de={class:"text-lg text-gray-600"},me={class:"flex flex-col mb-2"},ue=e("span",null,null,-1),pe={class:"my-3 flex items-center justify-center"},_e={class:"col-span-3"},ge={class:"grid grid-cols-4"},he=e("h4",{class:"col-span-4 text-xl text-gray-500"},"Produits de la commandes :",-1),fe=["onClick"],xe={class:"col-span-1 flex items-center justify-center"},ve={key:0,class:"lg:w-[45px] lg:h-[75px] sm:w-[60px] sm:h-[90px] w-[70px] h-[100px]"},ye=["src","alt"],be={key:1},we=e("span",null,"Pas de photo pour ce produit !",-1),Pe=[we],Ce={class:"flex flex-col col-span-3"},Ie={key:0,class:"bg-primary-50 rounded mx-40 mb-5"},ke=e("h2",{class:"text-center text-xl text-primary-300 py-1 bg-primary-100 rounded-t-lg"},"Ajouter au panier via un fichier",-1),Be={class:"p-4 flex flex-col items-center justify-items-center justify-center"},Ee=["onSubmit"],Le={class:"block cursor-pointer text-primary-500 bg-primary-200 p-3 rounded-lg",for:"file_import_cart"},Ue={class:"hidden",id:"file_name_span_client"},Te=e("span",{id:"file_name_client"},null,-1),Re=e("p",{class:"mt-1 text-sm text-gray-500",id:"file_input_helper"},".XLS,.XLSX",-1),je={class:"absolute bottom-0 right-0"},Ve=["href"],Se=["href"],Ae={key:0,class:"col-span-1"},Ne=e("button",{type:"submit",class:"p-3 rounded-lg text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300"},"Importer !",-1),ze=[Ne],Me={class:"flex flex-row w-full sm:w-auto sm:flex-grow order-1 sm:order-2 mb-2 sm:mb-0 sm:mr-4"},Fe={class:"relative flex-grow"},Ge={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},He={class:"grid grid-cols-4",id:"gammes"},qe=["href"],De={class:"relative group"},Oe={key:0,class:"relative w-full h-60"},Xe=["src","alt"],Qe={key:1,class:"relative w-full h-60"},$e=e("span",null,"Pas de photo pour cette gamme !",-1),Ke=[$e],Je={class:"absolute bottom-0 z-30 w-full overflow-hidden"},We={class:"max-h-0 group-hover:max-h-60 group-hover:p-1 transition-full duration-500 bg-primary-100 text-center flex flex-col bg-opacity-70 text-white"},Ye={class:"capitalize"},Ze={class:"flex flex-wrap items-center justify-center text-center px-4 py-2"},et={class:"capitalize text-center font-semibold"},tt={class:"flex justify-center items-center bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},st={class:"w-1/3"},nt=Y('<option value="8">8 par page</option><option value="12">12 par page</option><option value="18">18 par page</option><option value="50">50 par page</option><option value="100">100 par page</option>',5),rt=[nt],ot={class:"w-1/3 text-center"},at={class:"flex justify-end w-1/3"},it={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},lt=["href"],ct={key:0},dt={layout:(d,x)=>d(S,()=>child),layout:S},ht=Object.assign(dt,{__name:"Gammes",props:["products","dimensions","client","produitsAchat"],setup(d){const x=d,N=new URL("/build/assets/Template_Vierge_Com.e9d70c87.xlsx",self.location).href,z=new URL("/build/assets/Template_Model_Com.4738a9ce.xlsx",self.location).href;u(!1);var l=u(x.products),M=u(v().props.value.dynamique_client),b=u(x.produitsAchat.panier),B=u(v().props.value.auth.user[0].client);let g=u(!1);var F=u(v().props.value.session.typeVente),E=n=>{n.target.value==""?(document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),g.value=!1):(document.getElementById("file_name_client").innerText=n.target.files[0].name,document.getElementById("file_name_span_client").classList.remove("hidden"),g.value=!0)},L=()=>{document.getElementById("file_import_clients").value=null,document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),g.value=!1};const G=()=>{var n=new FormData(document.getElementById("fileCartImport"));k.post("/products/panier/import",n).then(r=>{console.log(r),r.status?document.location.href="/cart":Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'importation de votre fichier, veuillez v\xE9rifier que votre fichier correspond bien \xE0 l'exemple fournis puis ressayer !"})})},w=n=>HtmlEntities.decode(n.toLowerCase()),H=n=>x.dimensions.filter(({id_gamme:r})=>r===n);var p={previous:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",previous_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",next:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",next_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",number:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",number_active:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 bg-gray-100"},U=()=>{const n=new URL(window.location.href);var r=document.getElementById("per_page");n.searchParams.set("perPage",r.value),window.location.href=n.href},q=()=>{const n=new URL(window.location.href);return n.searchParams.get("perPage")!=null?n.searchParams.get("perPage"):12},T=n=>{var r="/orders/clients/products?filter[nom_gamme]="+n.target.value;k.post(encodeURI(r)).then(m=>{if(m.status==200){const t=new URL(window.location.href);t.searchParams.set("filter[nom_gamme]",n.target.value),l.value=m.data.products,window.history.replaceState("","",t.href)}})},D=n=>{Swal.fire({title:"Attention",text:"Etes-vous de supprimer cette article de la commande ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(r=>{r.isConfirmed&&Z({id_panier_edi_list:n}).post("/orders/clients/products/action/delete",{preserveScroll:!0,onSuccess:t=>{t.props.session.status?Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer de la commande"}):Toast.fire({icon:"error",title:"Une erreur c'est produit lors de la supression du produit de la commande"})}})})},R=n=>(Math.round(n*100)/100).toFixed(2),O=n=>{var r=n;return B.value.taux_remise>0&&(r=r-r*(B.value.taux_remise/100)),R(r)};return X(()=>{var n=document.getElementById("per_page");n.value=q();const r=new URL(window.location.href);var m=document.getElementById("searchGamme");m.value=r.searchParams.get("filter[nom_gamme]")}),Q(()=>{M.value=v().props.value.dynamique_client,k.get("/orders/clients/products/action/view").then(n=>{n.data.produitsAchat!=null&&(n.data.produitsAchat.panier!=null?b.value=n.data.produitsAchat.panier:b.value=[])})}),(n,r)=>{const m=$("Link");return a(),i(h,null,[_(s(W),{title:"Products"}),e("section",re,[oe,e("div",ae,[e("div",ie,[le,e("div",ce,[e("h3",de,"Client : "+o(d.client.prenom+" "+d.client.nom),1),e("span",null,"Adresse : "+o(d.client.nom_adresse),1),e("div",me,[ue,e("span",null,o(d.client.adresse1),1),e("span",null,o(d.client.adresse2),1),e("span",null,o(d.client.adresse3),1),e("span",null,o(d.client.code_postal+", "+d.client.ville),1)]),e("div",pe,[_(m,{class:"rounded p-4 bg-primary-200 hover:bg-primary-50 transition duration-300",href:"/orders/clients/validation"},{default:K(()=>[I("Valider la commande")]),_:1})])])]),e("div",_e,[e("div",ge,[he,(a(!0),i(h,null,y(s(b),(t,c)=>(a(),i("div",{key:c,class:"col-span-1 grid grid-cols-4 bg-primary-100 p-1 m-2 relative rounded-xl"},[e("button",{onClick:P=>s(D)(t.panier.id_panier_edi_list),class:"absolute right-2 top-1 hover:text-primary-200 transition duration-300",type:"button"},[_(A)],8,fe),e("div",xe,[t.photo.img_produit!=null?(a(),i("div",ve,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+t.photo.img_produit,alt:t.code_sku,class:"w-full h-full object-cover"},null,8,ye)])):(a(),i("div",be,Pe))]),e("div",Ce,[e("span",null,"Gamme : "+o(t.gamme.nom_gamme),1),e("span",null,"Design : "+o(t.design.nom_design),1),e("span",null,"Couleur : "+o(t.couleur.nom_couleur),1),e("span",null,"Dimension : "+o(t.dimension.largeur+"x"+t.dimension.longueur)+"cm",1),e("span",null,"Quantiter : "+o(t.panier.quantiter),1),e("span",null,"Prix unitaire : "+o(s(R)(t.prix_produit))+" \u20AC",1)])]))),128))])])]),s(F)==1?(a(),i("div",Ie,[ke,e("div",Be,[e("form",{id:"fileCartImport",class:"grid grid-cols-4",onSubmit:J(G,["prevent"])},[e("div",{class:j(s(g)?"relative col-span-3 mx-2":"relative col-span-4 mx-2")},[e("label",Le,[I("Importer mon fichier de commandes "),_(ne)]),e("span",Ue,[e("button",{type:"button",onClick:r[0]||(r[0]=(...t)=>s(L)&&s(L)(...t))},[_(A)]),Te]),e("input",{onChange:r[1]||(r[1]=(...t)=>s(E)&&s(E)(...t)),type:"file",class:"hidden",id:"file_import_cart",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"fileImport"},null,32),Re,e("span",je,[e("a",{href:s(N),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Template vierge",8,Ve),I(" / "),e("a",{href:s(z),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Mod\xE8le",8,Se)])],2),s(g)?(a(),i("div",Ae,ze)):f("",!0)],40,Ee)])])):f("",!0),e("div",Me,[e("div",Fe,[e("input",{class:"block w-full pl-9 text-sm rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",placeholder:"Recherche...",id:"searchGamme",type:"text",name:"global",onInput:r[2]||(r[2]=(...t)=>s(T)&&s(T)(...t))},null,32),e("div",Ge,[_(te,{class:"text-xl mb-1"})])])]),e("div",He,[(a(!0),i(h,null,y(s(l).data,(t,c)=>(a(),i("a",{key:c,href:"/orders/clients/products/"+w(t.nom_gamme),class:"col-span-1 group p-4 hover:scale-110 transition-full duration-300 cursor-pointer"},[e("div",De,[t.img_gamme!=null?(a(),i("div",Oe,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/gamme/"+t.img_gamme,alt:t.nom_gamme,class:"z-20 rounded relative w-full h-full object-cover"},null,8,Xe)])):(a(),i("div",Qe,Ke)),e("div",Je,[e("div",We,[e("span",null,"Tapis "+o(t.type_tapis==0?"int\xE9rieur":t.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+o(t.type_poils==1?"court":"long")+" - "+o(t.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",Ye,o(w(t.nom_special)),1),e("div",Ze,[(a(!0),i(h,null,y(H(t.id_gamme),(P,C)=>(a(),i("span",{key:C,class:"block text-center w-auto px-1"},o(!Number.isInteger(C/3)&&C!=0?" - ":"")+" "+o(P.largeur)+"x"+o(P.longueur)+"cm ",1))),128))]),e("span",null,"Prix HT m\xB2 : "+o(s(O)(t.prix_vente_ht_m2))+" \u20AC",1)])])]),e("div",null,[e("h2",et,"Collection "+o(w(t.nom_gamme)),1)])],8,qe))),128))]),e("div",tt,[e("div",st,[e("select",{id:"per_page",name:"per_page",dusk:"per-page-full",onChange:r[3]||(r[3]=(...t)=>s(U)&&s(U)(...t)),class:"mr-5 focus:ring-indigo-500 focus:border-indigo-500 min-w-max shadow-sm text-sm border-gray-300 rounded-md"},rt,32),e("span",null,"Page "+o(s(l).current_page)+" sur "+o(s(l).last_page),1)]),e("span",ot,o(s(l).total)+" R\xE9sultats",1),e("div",at,[e("nav",it,[(a(!0),i(h,null,y(s(l).links,(t,c)=>(a(),i("a",{key:c,class:j(c!=0&&c+1!=s(l).links.length?t.active?s(p).number_active:s(p).number:c==0?s(l).current_page==1?s(p).previous_disabled:s(p).previous:s(l).current_page==s(l).last_page?s(p).next_disabled:s(p).next),href:t.url},[c!=0&&c+1!=s(l).links.length?(a(),i("span",ct,o(t.label),1)):f("",!0),c+1==s(l).links.length?(a(),V(ee,{key:1})):f("",!0),c==0?(a(),V(se,{key:2})):f("",!0)],10,lt))),128))])])])])],64)}}});export{ht as default};
