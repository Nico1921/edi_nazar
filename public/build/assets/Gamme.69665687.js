import{o as d,a as c,f as e,A as b,b as N,d as o,u as t,t as m,h as v,k as y,F as C,J as E,e as p,H as X,n as j,K as L,j as Y,w as $,g as z,N as Z}from"./app.6b626bfd.js";import{r as ee,E as te,_ as se,C as ie}from"./InputNumberProduit.dd85cca6.js";import{_ as S,I as re}from"./AuthenticatedLayout.841911c1.js";import{T as oe}from"./floating-vue.es.8f454c85.js";import{r as ne,_ as ae}from"./Breadcrumbs.89d96cf2.js";import{_ as B}from"./InputError.8b820cd1.js";import{d as I}from"./index.6b028a46.js";import{r as le}from"./ListBulletIcon.5da776b8.js";import{r as de}from"./ArrowRightCircleIcon.f52390c3.js";import{f as A,o as w}from"./transition.47d8f202.js";import{N as O,_ as U,U as F}from"./dialog.0282191f.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./micro-task.fe338338.js";import"./description.c25ff549.js";function ue(g,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor","aria-hidden":"true"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 4.5v15m0 0l6.75-6.75M12 19.5l-6.75-6.75"})])}function R(g,l){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.515 10.674a1.875 1.875 0 000 2.652L8.89 19.7c.352.351.829.549 1.326.549H19.5a3 3 0 003-3V6.75a3 3 0 00-3-3h-9.284c-.497 0-.974.198-1.326.55l-6.375 6.374zM12.53 9.22a.75.75 0 10-1.06 1.06L13.19 12l-1.72 1.72a.75.75 0 101.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L15.31 12l1.72-1.72a.75.75 0 10-1.06-1.06l-1.72 1.72-1.72-1.72z","clip-rule":"evenodd"})])}const ce={class:"container mx-auto"},me={class:"relative container mx-auto grid grid-cols-12 mb-4"},pe={class:"col-span-2 flex items-end"},_e={href:"/order_entrepot/gamme",class:"relative inline-block group"},fe=e("span",{class:"inline-block border-b border-black pl-5 group-hover:text-primary-300 group-hover:border-primary-300 transition duration-300"},"Retourner aux gammes",-1),ve={class:"flex items-center justify-center col-span-7"},ge={class:"text-6xl font-bold"},xe={class:"col-span-3 rounded bg-primary-white border border-primary-100 text-center flex flex-col text-primary-300"},he={class:"capitalize"},be={key:0,class:"sm:w-auto w-full py-2 px-4 flex items-center justify-center"},ye=["href"],we={class:"sm:w-auto w-full py-2 flex items-center justify-center"},ke=e("a",{href:"/cart",class:"py-2 px-4 ml-2 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},"Voir mon panier",-1),Ce={class:"flex flex-col"},je={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Be={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},Ie={class:"min-w-full overflow-hidden border border-primary-200 p-4"},Pe={class:"text-left text-sm font-light"},qe={class:"px-4 py-4"},Te={class:"whitespace-nowrap px-4 py-4 w-[190px] overflow-x-hidden"},Ve={class:"h-24 w-full mb-2"},Me={key:0,class:"cursor-pointer relative overflow-hidden w-full h-full flex justify-center"},Ne={class:"absolute flex items-center justify-center w-full h-full"},Ee=["onClick","src","alt"],Le={key:1,class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},$e={class:"text-center w-full"},ze={class:"font-bold pt-2"},Se=["onMouseover","onMouseleave"],Ae={class:"w-full h-full flex flex-col items-center justify-between"},Oe={class:"w-full font-bold text-center"},Ue={class:"flex items-center justify-center"},Fe={key:0,class:"hover:scale-110 transition duration-300"},Re=["onClick"],De={key:1,class:"text-xl text-white items-center justify-center"},He={key:1,class:"bg-red-700 w-[35px] h-[35px] block rounded-full flex items-center justify-center"},Qe={key:0},Ge={key:1},Je={class:"text-center w-full"},Ke={class:"font-bold"},We=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Xe={class:"fixed inset-0 overflow-y-auto"},Ye={class:"flex min-h-full items-center justify-center p-4 text-center"},Ze=e("span",{id:"nomVisuelImage"},null,-1),et=e("div",{class:"mt-2 h-[40rem] w-full"},[e("img",{id:"visuelImage",class:"w-full h-full object-cover"})],-1),tt=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),st={class:"fixed inset-0 overflow-y-auto"},it={class:"flex min-h-full items-center justify-center p-4 text-center"},rt={class:"mt-2 flex justify-center items-center"},ot={class:"text-sm text-gray-500 w-full"},nt=e("label",{class:"lg:text-lg text-sm",for:"ref"}," Quantit\xE9 : ",-1),at={key:0,class:"w-full mt-7 ml-5"},lt={class:"mt-4 flex justify-center"},dt=["disabled"],ut={layout:(g,l)=>g(S,()=>child),layout:S},jt=Object.assign(ut,{__name:"Gamme",props:["products","gamme","designpanier"],setup(g){const l=g;var D=[{title:"Accueil",link:"/",icon:ne,active:!1},{title:"Commandes Entrep\xF4t",link:"/order_entrepot/gamme",icon:le,active:!1},{title:"Gammes",link:"/order_entrepot/gamme",icon:"",active:!1},{title:l.gamme.nom_gamme,link:"/order_entrepot/gamme/"+l.gamme.nom_gamme,icon:"",active:!0}];const k=b(!1),x=b(!1);var _=b(l.designpanier),f=b(!1),r=N({idProduit:null,quantiter:1,id_panier_edi_list:null,key_tab_1:0,key_tab_2:0}),H=(n,s,i,a)=>{x.value=n,f.value=s,r.idProduit=s.id_produit,r.key_tab_1=i,r.key_tab_2=a,r.quantiter=s.panier.quantiter>0?s.panier.quantiter:1,r.id_panier_edi_list=s.panier.id_panier_edi_list!=null?s.panier.id_panier_edi_list:0};function P(){k.value=!1}function Q(n,s,i){k.value=!0;var a=s+" "+i;document.getElementById("visuelImage").setAttribute("src","https://gestion.tapis-nazar.fr/img/produit/"+I(n)),document.getElementById("visuelImage").setAttribute("alt",a),document.getElementById("nomVisuelImage").textContent=a}var G=(n,s)=>{n.preventDefault();var i=r.key_tab_1,a=r.key_tab_2;r.quantiter>0?r.post(route("order_entrepot/panier/add"),{preserveScroll:!0,preserveState:!0,onSuccess:u=>{u.props.session.status?(_.value[i].produits[a].panier.id_panier_edi_list=u.props.session.id_panier_edi_list,_.value[i].produits[a].isInPanier=!0,_.value[i].produits[a].panier.quantiter=r.quantiter,x.value=!1,Toast.fire({icon:"success",title:s?"La quantit\xE9 pour ce produit a bien \xE9t\xE9 modifier.":"Le produit \xE0 bien ajouter au panier."})):Toast.fire({icon:"error",title:u.props.session.message})}}):q(r.id_panier_edi_list,i,a)},q=(n,s,i)=>{Swal.fire({title:"Attention",text:"\xCAtes-vous sur de supprimer cet article du panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(a=>{a.isConfirmed&&N({id_panier_edi_list:n}).post(route("order_entrepot/panier/delete"),{preserveScroll:!0,onSuccess:h=>{h.props.session.status?(Toast.fire({icon:"success",title:"Le produit a bien \xE9t\xE9 supprimer du panier."}),_.value[s].produits[i].isInPanier=!1,_.value[s].produits[i].panier.quantiter=0,_.value[s].produits[i].panier.id_panier_edi_list=0,x.value=!1):Toast.fire({icon:"error",title:h.props.session.message})}})})},T=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous sur de vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(n=>{n.isConfirmed&&Z.Inertia.post("/cart/empty",{},{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})},J=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n);const K=(n,s)=>{var i=void 0;return n.forEach(a=>{a.classList!=null&&a.classList.length>0&&a.classList.contains(s)&&(i=a)}),i};var W=(n,s)=>{n.preventDefault();var i=K(n.path,"editQteModal");if(i!=null){var a=new FormData(i);s.quantiter=a.get("quantiter")}},V=(n,s)=>{(typeof s=="object"||s instanceof Object)&&s!=null&&s!=null&&s!=""&&(s=s.img_produit),s!=null&&s!=null&&s!=""&&document.getElementsByClassName(n).length==1&&(document.getElementsByClassName(n)[0].classList.remove("opacity-100"),document.getElementsByClassName(n)[0].classList.add("opacity-50"),document.getElementsByClassName(n)[0].src="https://gestion.tapis-nazar.fr/img/produit/"+I(s),document.getElementsByClassName(n)[0].classList.remove("opacity-50"),document.getElementsByClassName(n)[0].classList.add("opacity-100"))};return(n,s)=>(d(),c(C,null,[o(t(X),{title:"Products"}),e("section",ce,[o(ae,{links:t(D)},null,8,["links"]),e("section",me,[e("div",pe,[e("a",_e,[o(t(ee),{class:"h-4 w-4 absolute left-0 bottom-1/4 top-1/4 text-black group-hover:text-primary-300 transition duration-300"}),fe])]),e("div",ve,[e("h1",ge,m(l.gamme.nom_gamme),1)]),e("div",xe,[e("span",null,"Tapis "+m(l.gamme.type_tapis==0?"int\xE9rieur":l.gamme.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+m(l.gamme.type_poils==1?"courts":"longs")+" - "+m(l.gamme.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",he,m(l.gamme.nom_special),1),e("span",null,"Prix HT m\xB2 : "+m(l.gamme.prix_vente_ht_m2_remise?l.gamme.prix_vente_ht_m2_remise:l.gamme.prix_vente_ht_m2)+" \u20AC",1),l.gamme.nom_trame!=null&&l.gamme.nom_trame!=""?(d(),c("div",be,[e("a",{href:"https://gestion.tapis-nazar.fr/xls/trame/"+l.gamme.nom_trame,class:"py-2 px-4 w-full flex items-center justify-center group border border-blue-300 rounded bg-blue-700 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300",download:""},[o(t(ue),{class:"w-5 h-5 mr-2"}),v("T\xE9l\xE9charger la trame")],8,ye)])):y("",!0),e("div",we,[e("button",{type:"button",onClick:s[0]||(s[0]=(...i)=>t(T)&&t(T)(...i)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[o(t(R),{class:"w-5 h-5 mr-2"}),v("Vider mon panier")]),ke])])]),e("div",Ce,[e("div",je,[e("div",Be,[e("div",Ie,[(d(!0),c(C,null,E(t(_),(i,a)=>(d(),c("div",{class:"border-b border-primary-200 min-w-full",key:a},[e("table",Pe,[e("tbody",null,[e("tr",qe,[e("td",Te,[e("div",Ve,[i.img_produit!=null?(d(),c("div",Me,[e("div",Ne,[o(te,{class:"text-lg text-black"})]),e("img",{onClick:u=>Q(i.img_produit,l.gamme.nom_gamme,i.nom_design),src:"https://gestion.tapis-nazar.fr/img/produit/"+t(I)(i.img_produit),alt:i.code_sku,class:j(["imgView_"+a,"z-20 relative hover:opacity-50 transition-all duration-300 w-full h-full object-contain"])},null,10,Ee)])):(d(),c("div",Le,[o(re)]))]),e("div",$e,[e("span",ze,m(i.nom_design),1)])]),(d(!0),c(C,null,E(i.produits,(u,h)=>(d(),c("td",{key:h,onMouseover:M=>t(V)("imgView_"+a,u.photo_produit),onMouseleave:M=>t(V)("imgView_"+a,i.img_produit),class:"whitespace-nowrap px-4 py-4 h-24 table-cell align-middle"},[e("div",Ae,[e("div",Oe,m(u.largeur)+"x"+m(u.longueur),1),e("div",Ue,[o(t(oe),{placement:"right-start",triggers:["hover","focus","click"]},{popper:p(()=>[u.stock_restant>0?(d(),c("span",Qe,m(u.isInPanier?"Modifier quantiter":"Ajouter au")+" panier",1)):(d(),c("span",Ge," Rupture de stock "))]),default:p(()=>[e("div",null,[u.stock_restant>0?(d(),c("div",Fe,[e("button",{onClick:M=>t(H)(!0,u,a,h),class:j([u.stock_restant>10?"bg-green-700":u.stock_restant>0?"bg-orange-400 ":"bg-red-700","w-[35px] h-[35px] block rounded-full flex items-center justify-center"])},[u.isInPanier?(d(),c("span",De,m(u.panier.quantiter),1)):(d(),L(ie,{key:0,class:"text-xl text-white items-center justify-center"}))],10,Re)])):(d(),c("span",He))])]),_:2},1024)]),e("div",Je,[e("span",Ke,m(t(J)(u.prixProduit))+" HT",1)])])],40,Se))),128))])])])]))),128))])])])])]),o(t(A),{show:k.value,as:"template",unmount:!1},{default:p(()=>[o(t(O),{as:"div",onClose:P,class:"relative z-[60]",unmount:!1},{default:p(()=>[o(t(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[We]),_:1}),e("div",Xe,[e("div",Ye,[o(t(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[o(t(U),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",unmount:!1},{default:p(()=>[o(t(F),{unmount:!1,as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:p(()=>[v(" Visuel image "),Ze]),_:1}),et,e("div",{class:"flex flex-row-reverse"},[e("button",{type:"button",class:"mt-4 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300",onClick:P},"Fermer")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),o(t(A),{appear:"",show:x.value,as:"template",unmount:!1},{default:p(()=>[o(t(O),{as:"div",class:"relative z-50"},{default:p(()=>[o(t(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[tt]),_:1}),e("div",st,[e("div",it,[o(t(w),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[o(t(U),{class:"w-full border-[5px] border-primary-200 max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:p(()=>[t(f)!=!1?(d(),L(t(F),{key:0,as:"h3",class:"lg:text-lg text-sm text-center font-medium leading-6 text-gray-900"},{default:p(()=>[v(m(t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0?"Modifier Quantit\xE9":"Ajouter ")+" produit "+m(t(f).sku),1)]),_:1})):y("",!0),t(f)!=!1?(d(),c("form",{key:1,class:"editQteModal",onSubmit:s[6]||(s[6]=Y(i=>t(G)(i,t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0),["prevent"]))},[$(e("input",{type:"hidden",name:"id_produit",id:"id_produit","onUpdate:modelValue":s[1]||(s[1]=i=>t(r).idProduit=i)},null,512),[[z,t(r).idProduit]]),$(e("input",{type:"hidden",name:"id_panier_edi_list",id:"id_panier_edi_list","onUpdate:modelValue":s[2]||(s[2]=i=>t(r).id_panier_edi_list=i)},null,512),[[z,t(r).id_panier_edi_list]]),e("div",rt,[e("div",ot,[nt,o(se,{onChange:s[3]||(s[3]=i=>t(W)(i,t(r))),value:t(r).quantiter,id:"quantiter",min:"0",max:t(f).stock_restant,name:"quantiter",placeholder:"Saisissez la quantiter pour la commande"},null,8,["value","max"]),o(B,{class:"mt-2",message:t(r).errors.quantiter},null,8,["message"]),o(B,{class:"mt-2",message:t(r).errors.idProduit},null,8,["message"]),o(B,{class:"mt-2",message:t(r).errors.id_panier_edi_list},null,8,["message"])]),t(f).isInPanier?(d(),c("div",at,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>t(q)(t(f).panier.id_panier_edi_list,t(r).key_tab_1,t(r).key_tab_2)),class:"w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[o(t(R),{class:"w-5 h-5 mr-2"}),v("Suprimmer le produit du panier ")])])):y("",!0)]),e("div",lt,[e("button",{onClick:s[5]||(s[5]=i=>{x.value=!1}),type:"button",class:"mx-10 inline-flex justify-center rounded-md border border-transparent hover:border-red-100 px-4 py-2 text-sm font-medium text-red-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Annuler "),e("button",{class:j([{"opacity-25":t(r).processing},"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"]),disabled:t(r).processing,type:"submit"},[v(" Valider "),o(t(de),{class:"h-6 w-6 ml-1 group-hover:translate-x-1 group-disabled:translate-x-0 transition-all duration-300",viewBox:"0 0 24 24",fill:"none"})],10,dt)])],32)):y("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}});export{jt as default};
