import{_ as x}from"./AuthenticatedLayout.f90d6176.js";import{z as h,P as w,o as l,a as r,d as f,u as i,f as e,t,k as c,F as y,K as j,H as P}from"./app.528cad76.js";import{_ as C}from"./EtapeOrder.5c6178e5.js";import"./LangueChoice.c0ee0651.js";const V={class:"container mx-auto mt-5"},F={class:"grid grid-cols-4"},H={class:"xl:col-span-1 col-span-4"},B={class:"xl:col-span-3 col-span-4"},E=e("h1",{class:"text-center text-3xl text-primary-300"},"Finalisation de la commande",-1),A={class:"m-5"},M={class:"grid grid-cols-2"},N={class:"bg-primary-50 rounded sm:col-span-1 col-span-2 m-2 flex flex-col p-4"},q=e("h2",{class:"text-center font-bold"},"Adresse de livraison",-1),z={key:0},U={key:1},K={class:"bg-primary-50 rounded sm:col-span-1 col-span-2 m-2 flex flex-col p-4"},L=e("h2",{class:"text-center font-bold"},"Adresse de facturation",-1),Q={key:0},S={key:1},$={class:"bg-primary-50 rounded m-2 p-4"},D=e("h2",{class:"text-center font-bold"},"Total Commande",-1),O={class:"grid lg:grid-cols-5 grid-cols-4 justify-center flex-row mt-4 mx-6"},R={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},G={class:"font-semibold text-gray-600"},I=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),J={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},W={class:"font-semibold text-gray-600"},X=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),Y={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},Z={lass:"font-semibold text-gray-600"},ee=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),se={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},te={lass:"font-semibold text-gray-600"},ae=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),ne={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},oe={lass:"font-semibold text-gray-600"},le={class:"grid grid-cols-1 flex items-center justify-center my-4 mx-2"},re=e("h2",{class:"px-5 py-3 bg-primary-50 rounded font-bold text-center"},"Produits",-1),ie={key:0,class:"grid 2xl:grid-cols-3 lg:grid-cols-4 w-full p-5 h-90 bg-gray-50"},ce={class:"w-full lg:p-4 sm:p-3 p-2 grid bg-gray-100 rounded grid-cols-12 my-2"},de={class:"xl:col-span-4 lg:col-span-4 sm:col-span-2 xsm:col-span-4 col-span-4 flex items-center justify-center"},pe={key:0,class:"lg:h-[150px] sm:h-[130px] h-full w-full px-2"},me=["src","alt"],_e={key:1},ue=e("span",null,"Pas de photo pour ce produit !",-1),ge=[ue],xe={class:"xl:col-span-8 lg:col-span-8 sm:col-span-10 xsm:col-span-8 col-span-8 flex flex-col xl:text-lg text-sm"},he={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},fe={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},ye={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},be={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},ve={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},ke={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Te={class:"grid grid-cols-4 bg-primary-50 rounded px-4 py-2 mb-4"},we=e("div",{class:"lg:my-0 my-2 lg:col-span-2 col-span-4 flex items-center justify-center"},[e("input",{disabled:"",id:"paymentCard",name:"paymentType",type:"radio",value:"2",class:"w-4 h-4 cursor-not-allowed text-primary-200 bg-gray-200 border-gray-300 rounded focus:ring-primary-200 focus:ring-2 bg-primary-100"}),e("label",{for:"paymentCard",class:"ml-2 text-lg font-medium text-gray-900"},"Paiement par CB")],-1),je={class:"lg:my-0 my-2 lg:col-span-2 col-span-4 flex items-center justify-center"},Pe=e("label",{for:"paymentVirement",class:"ml-2 text-lg font-medium text-gray-900"},"Paiement par Virement Bancaire",-1),Ce={class:"flex justify-center mb-5"},Ve=["disabled"],Fe={layout:(d,s)=>d(x,()=>child),layout:x},Me=Object.assign(Fe,{__name:"Validation",props:["client","panier","produits"],setup(d){const s=d;var m=h(w().props.value.auth.user[0].client),b=["Panier","Adresse Livraison / Facturation","Finaliser commande"];const _=(o,n)=>o.toFixed(n);var p=h(0),u=()=>{axios.post("/cart/adresses/validation/order",{paymentType:p.value}).then(o=>{o.status==200?document.location.href="/shippings/order/clients/"+o.data.num_commande:Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'enregistrement de votre commande, veuillez ressayer !"})})},v=o=>(Math.round(o*100)/100).toFixed(2),g=o=>{var n=o;return m.value.taux_remise>0&&(n=n-n*(m.value.taux_remise/100)),v(n)},k=(o,n)=>{o.target.checked?p.value=n:p.value=0};return(o,n)=>(l(),r(y,null,[f(i(P),{title:"Validation - Panier"}),e("section",V,[e("div",F,[e("div",H,[f(C,{etape:3,nbEtape:3,listeEtape:i(b)},null,8,["listeEtape"])]),e("div",B,[E,e("div",A,[e("div",M,[e("div",N,[q,e("span",null,t(s.client.nom_adresse)+",",1),e("span",null,t(s.client.adresse1)+",",1),s.client.adresse2!=""&&s.client.adresse2!=null?(l(),r("span",z,t(s.client.adresse2)+",",1)):c("",!0),s.client.adresse3!=""&&s.client.adresse3!=null?(l(),r("span",U,t(s.client.adresse3)+",",1)):c("",!0),e("span",null,t(s.client.code_postal+", "+s.client.ville)+",",1),e("span",null,t(s.client.pays),1)]),e("div",K,[L,e("span",null,t(s.client.nom_adresse_facturation)+",",1),e("span",null,t(s.client.adresse1_facturation)+",",1),s.client.adresse2_facturation!=""&&s.client.adresse2_facturation!=null?(l(),r("span",Q,t(s.client.adresse2_facturation)+",",1)):c("",!0),s.client.adresse3_facturation!=""&&s.client.adresse3_facturation!=null?(l(),r("span",S,t(s.client.adresse3_facturation)+",",1)):c("",!0),e("span",null,t(s.client.code_postal_facturation+", "+s.client.ville_facturation)+",",1),e("span",null,t(s.client.pays_facturation),1)])]),e("div",$,[D,e("div",O,[e("div",R,[e("span",G,"Quantiter : "+t(s.panier.produits_total)+" pcs",1),I]),e("div",J,[e("span",W,"M\xB2 : "+t(s.panier.total_m2)+" m\xB2",1),X]),e("div",Y,[e("span",Z,"Prix HT : "+t(s.panier.total_HT)+" \u20AC",1),ee]),e("div",se,[e("span",te,"Prix TVA : "+t(s.panier.total_taxe)+" \u20AC",1),ae]),e("div",ne,[e("span",oe,"Prix TTC : "+t(s.panier.total_ttc)+" \u20AC",1)])])]),e("div",le,[re,d.produits!=null?(l(),r("div",ie,[(l(!0),r(y,null,j(s.produits.panier,(a,T)=>(l(),r("div",{key:T,class:"2xl:col-span-1 lg:col-span-2 col-span-4 w-full px-2"},[e("div",ce,[e("div",de,[a.photo!=null?(l(),r("div",pe,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+a.photo.img_produit,alt:a.code_sku,class:"w-full h-full object-cover rounded-xl"},null,8,me)])):(l(),r("div",_e,ge))]),e("div",xe,[e("span",he,"SKU : "+t(a.code_sku),1),e("span",fe,"Taille : "+t(a.dimension.largeur+"x"+a.dimension.longueur),1),e("span",ye,"Prix du M\xB2 : "+t(i(g)(a.gamme.prix_vente_ht_m2))+" \u20AC HT",1),e("span",be,"M\xB2 : "+t(_(a.dimension.largeur/100*(a.dimension.longueur/100)*a.panier.quantiter,2))+" m\xB2",1),e("span",ve,"Quantiter : "+t(a.panier.quantiter),1),e("span",ke,"Prix HT : "+t(_(a.dimension.largeur/100*(a.dimension.longueur/100)*a.panier.quantiter*i(g)(a.gamme.prix_vente_ht_m2),2))+" \u20AC",1)])])]))),128))])):c("",!0)]),e("form",Te,[we,e("div",je,[e("input",{onClick:n[0]||(n[0]=a=>i(k)(a,1)),id:"paymentVirement",name:"paymentType",type:"radio",value:"1",class:"w-4 h-4 text-primary-200 bg-gray-100 border-gray-300 rounded focus:ring-primary-200 focus:ring-2 bg-primary-100"}),Pe])]),e("div",Ce,[e("button",{disabled:i(p)==0,onClick:n[1]||(n[1]=(...a)=>i(u)&&i(u)(...a)),type:"button",class:"p-2 border border-primary-300 rounded bg-primary-50 hover:bg-primary-100 transition duration-300 disabled:cursor-not-allowed disabled:bg-primary-200"},"Finaliser la commande",8,Ve)])])])])])],64))}});export{Me as default};
