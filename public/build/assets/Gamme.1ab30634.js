import{o as l,a as d,f as t,A as b,b as L,d as r,u as e,t as m,h as g,k as w,F as k,J as B,e as p,H as Z,n as P,K as N,j as ee,w as $,g as I,N as te}from"./app.bf21927d.js";import{r as se,a as ie,E as re,_ as oe,C as ae}from"./InputNumberProduit.d329e886.js";import{_ as A,I as O}from"./AuthenticatedLayout.4a4d57de.js";import{R as ne,L as le}from"./MenuRight.06fdd53d.js";import{T as de}from"./floating-vue.es.d1feba92.js";import{S as ue,N as ce,P as pe,a as me,A as _e,b as fe}from"./pagination.min.27040c3c.js";import{d as T}from"./index.58540663.js";import{r as ve,_ as ge}from"./Breadcrumbs.d7de910d.js";import{_ as q}from"./InputError.c363ae2d.js";import{r as xe}from"./ListBulletIcon.0a3997ad.js";import{r as he}from"./ArrowRightCircleIcon.d787e6a6.js";import{f as R,o as C}from"./transition.3d0a8e53.js";import{N as U,_ as F,U as H}from"./dialog.f16e6a25.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./micro-task.fe338338.js";import"./description.3118254a.js";function D(y,u){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[t("path",{"fill-rule":"evenodd",d:"M2.515 10.674a1.875 1.875 0 000 2.652L8.89 19.7c.352.351.829.549 1.326.549H19.5a3 3 0 003-3V6.75a3 3 0 00-3-3h-9.284c-.497 0-.974.198-1.326.55l-6.375 6.374zM12.53 9.22a.75.75 0 10-1.06 1.06L13.19 12l-1.72 1.72a.75.75 0 101.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L15.31 12l1.72-1.72a.75.75 0 10-1.06-1.06l-1.72 1.72-1.72-1.72z","clip-rule":"evenodd"})])}const be={class:"container mx-auto"},ye={class:"relative container mx-auto grid grid-cols-12 mb-4"},we={class:"col-span-2 flex items-end"},ke={href:"/order_entrepot/gamme",class:"relative inline-block group"},Ce=t("span",{class:"inline-block border-b border-black pl-5 group-hover:text-primary-300 group-hover:border-primary-300 transition duration-300"},"Retourner aux gammes",-1),je={class:"flex items-center justify-center col-span-7"},Be={class:"text-6xl font-bold"},Pe={class:"col-span-3 rounded bg-primary-white border border-primary-100 text-center flex flex-col text-primary-300"},Ne={class:"capitalize"},Te={key:0},qe={key:1},Se={key:2,class:"sm:w-auto w-full py-2 px-4 flex items-center justify-center"},ze=["href"],Me={class:"sm:w-auto w-full py-2 flex items-center justify-center"},Ve=t("a",{href:"/cart",class:"py-2 px-4 ml-2 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},"Voir mon panier",-1),Ee={class:"flex flex-col"},Le={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},$e={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},Ie={class:"min-w-full overflow-hidden border border-primary-200 p-4"},Ae={class:"text-left text-sm font-light"},Oe={class:"px-4 py-4"},Re={class:"whitespace-nowrap px-4 py-4 w-[190px] overflow-x-hidden"},Ue={class:"h-24 w-full mb-2"},Fe={key:0,class:"cursor-pointer relative overflow-hidden w-full h-full flex justify-center"},He={class:"absolute flex items-center justify-center w-full h-full"},De=["onClick","src","alt"],Qe={key:1,class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Ge={class:"text-center w-full"},Je={class:"font-bold pt-2"},Ke=["onMouseover","onMouseleave"],We={class:"w-full h-full flex flex-col items-center justify-between"},Xe={class:"w-full font-bold text-center"},Ye={class:"flex items-center justify-center"},Ze={key:0,class:"hover:scale-110 transition duration-300"},et=["onClick"],tt={key:1,class:"text-xl text-white items-center justify-center"},st={key:1,class:"bg-red-700 w-[35px] h-[35px] block rounded-full flex items-center justify-center"},it={key:0},rt={key:1},ot={class:"text-center w-full"},at={class:"font-bold"},nt=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),lt={class:"fixed inset-0 overflow-y-auto"},dt={class:"flex min-h-full items-center justify-center p-4 text-center"},ut={class:"mt-2 h-[40rem] w-full"},ct={class:"swiper-button-prev-custom absolute justify-center items-center top-0 bottom-0 right-0 z-40 cursor-pointer lg:flex hidden"},pt={class:"swiper-button-next-custom absolute justify-center items-center top-0 bottom-0 left-0 z-40 cursor-pointer lg:flex hidden"},mt=t("div",{class:"swiper-pagination-custom lg:hidden flex items-center justify-center py-2"},null,-1),_t={class:"flex items-stretch justify-center w-full h-full"},ft={key:0,class:"relative w-full h-full"},vt=["src","alt"],gt={key:1,class:"text-3xl w-full flex items-stretch justify-center bg-gray-300"},xt=t("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),ht={class:"fixed inset-0 overflow-y-auto"},bt={class:"flex min-h-full items-center justify-center p-4 text-center"},yt={class:"mt-2 flex justify-center items-center"},wt={class:"text-sm text-gray-500 w-full"},kt=t("label",{class:"lg:text-lg text-sm",for:"ref"}," Quantit\xE9 : ",-1),Ct={key:0,class:"w-full mt-7 ml-5"},jt={class:"mt-4 flex justify-center"},Bt=["disabled"],Pt={layout:(y,u)=>y(A,()=>child),layout:A},Ht=Object.assign(Pt,{__name:"Gamme",props:["gamme","designpanier"],setup(y){const u=y;var Q=[{title:"Accueil",link:"/",icon:ve,active:!1},{title:"Commandes Entrep\xF4t",link:"/order_entrepot/gamme",icon:xe,active:!1},{title:"Gammes",link:"/order_entrepot/gamme",icon:"",active:!1},{title:u.gamme.nom_gamme,link:"/order_entrepot/gamme/"+u.gamme.nom_gamme,icon:"",active:!0}],_=b({nom_visuel:null,visuels:[{img_produit:null}]});const j=b(!1),x=b(!1);var f=b(u.designpanier),v=b(!1),o=L({idProduit:null,quantiter:1,id_panier_edi_list:null,key_tab_1:0,key_tab_2:0}),G=(n,s,i,a)=>{x.value=n,v.value=s,o.idProduit=s.id_produit,o.key_tab_1=i,o.key_tab_2=a,o.quantiter=s.panier.quantiter>0?s.panier.quantiter:1,o.id_panier_edi_list=s.panier.id_panier_edi_list!=null?s.panier.id_panier_edi_list:0};function S(){j.value=!1}function J(n,s,i,a){j.value=!0,_.value.nom_visuel=s+" "+i,a!=null&&a!=null?_.value.visuels=a:n!=null&&n!=null?_.value.visuels=[{img_produit:n}]:_.value.visuels=[{img_produit:null}]}var K=(n,s)=>{n.preventDefault();var i=o.key_tab_1,a=o.key_tab_2;o.quantiter>0?o.post(route("order_entrepot/panier/add"),{preserveScroll:!0,preserveState:!0,onSuccess:c=>{c.props.session.status?(f.value[i].produits[a].panier.id_panier_edi_list=c.props.session.id_panier_edi_list,f.value[i].produits[a].isInPanier=!0,f.value[i].produits[a].panier.quantiter=o.quantiter,x.value=!1,Toast.fire({icon:"success",title:s?"La quantit\xE9 pour ce produit a bien \xE9t\xE9 modifier.":"Le produit \xE0 bien ajouter au panier."})):Toast.fire({icon:"error",title:c.props.session.message})}}):z(o.id_panier_edi_list,i,a)},z=(n,s,i)=>{Swal.fire({title:"Attention",text:"\xCAtes-vous sur de supprimer cet article du panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(a=>{a.isConfirmed&&L({id_panier_edi_list:n}).post(route("order_entrepot/panier/delete"),{preserveScroll:!0,onSuccess:h=>{h.props.session.status?(Toast.fire({icon:"success",title:"Le produit a bien \xE9t\xE9 supprimer du panier."}),f.value[s].produits[i].isInPanier=!1,f.value[s].produits[i].panier.quantiter=0,f.value[s].produits[i].panier.id_panier_edi_list=0,x.value=!1):Toast.fire({icon:"error",title:h.props.session.message})}})})},M=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous sur de vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(n=>{n.isConfirmed&&te.Inertia.post("/cart/empty",{},{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})},W=n=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(n);const X=(n,s)=>{var i=void 0;return n.forEach(a=>{a.classList!=null&&a.classList.length>0&&a.classList.contains(s)&&(i=a)}),i};var Y=(n,s)=>{n.preventDefault();var i=X(n.path,"editQteModal");if(i!=null){var a=new FormData(i);s.quantiter=a.get("quantiter")}},V=(n,s)=>{(typeof s=="object"||s instanceof Object)&&s!=null&&s!=null&&s!=""&&(s=s.img_produit),s!=null&&s!=null&&s!=""&&document.getElementsByClassName(n).length==1&&(document.getElementsByClassName(n)[0].classList.remove("opacity-100"),document.getElementsByClassName(n)[0].classList.add("opacity-50"),document.getElementsByClassName(n)[0].src="https://gestion.tapis-nazar.fr/img/produit/"+T(s),document.getElementsByClassName(n)[0].classList.remove("opacity-50"),document.getElementsByClassName(n)[0].classList.add("opacity-100"))};return(n,s)=>(l(),d(k,null,[r(e(Z),{title:"Products"}),t("section",be,[r(ge,{links:e(Q)},null,8,["links"]),t("section",ye,[t("div",we,[t("a",ke,[r(e(se),{class:"h-4 w-4 absolute left-0 bottom-1/4 top-1/4 text-black group-hover:text-primary-300 transition duration-300"}),Ce])]),t("div",je,[t("h1",Be,m(u.gamme.nom_gamme),1)]),t("div",Pe,[t("span",null,"Tapis "+m(u.gamme.type_tapis==0?"int\xE9rieur":u.gamme.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),t("span",null,"Poils "+m(u.gamme.type_poils==1?"courts":"longs")+" - "+m(u.gamme.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),t("span",Ne,m(u.gamme.nom_special),1),u.gamme.prix_piece?(l(),d("span",Te,"Prix HT \xE0 la pi\xE8ce")):(l(),d("span",qe,"Prix HT m\xB2 : "+m(u.gamme.prix_vente_ht_m2_remise?u.gamme.prix_vente_ht_m2_remise:u.gamme.prix_vente_ht_m2)+" \u20AC",1)),u.gamme.nom_trame!=null&&u.gamme.nom_trame!=""?(l(),d("div",Se,[t("a",{href:"https://gestion.tapis-nazar.fr/xls/trame/"+u.gamme.nom_trame,class:"py-2 px-4 w-full flex items-center justify-center group border border-blue-300 rounded bg-blue-700 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300",download:""},[r(e(ie),{class:"w-5 h-5 mr-2"}),g("T\xE9l\xE9charger la trame")],8,ze)])):w("",!0),t("div",Me,[t("button",{type:"button",onClick:s[0]||(s[0]=(...i)=>e(M)&&e(M)(...i)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[r(e(D),{class:"w-5 h-5 mr-2"}),g("Vider mon panier")]),Ve])])]),t("div",Ee,[t("div",Le,[t("div",$e,[t("div",Ie,[(l(!0),d(k,null,B(e(f),(i,a)=>(l(),d("div",{class:"border-b border-primary-200 min-w-full",key:a},[t("table",Ae,[t("tbody",null,[t("tr",Oe,[t("td",Re,[t("div",Ue,[i.img_produit!=null?(l(),d("div",Fe,[t("div",He,[r(re,{class:"text-lg text-black"})]),t("img",{onClick:c=>J(i.img_produit,u.gamme.nom_gamme,i.nom_design,i.img_produit_list),src:"https://gestion.tapis-nazar.fr/img/produit/"+e(T)(i.img_produit),alt:i.code_sku,class:P(["imgView_"+a,"z-20 relative hover:opacity-50 transition-all duration-300 w-full h-full object-contain"])},null,10,De)])):(l(),d("div",Qe,[r(O)]))]),t("div",Ge,[t("span",Je,m(i.nom_design),1)])]),(l(!0),d(k,null,B(i.produits,(c,h)=>(l(),d("td",{key:h,onMouseover:E=>e(V)("imgView_"+a,c.photo_produit),onMouseleave:E=>e(V)("imgView_"+a,i.img_produit),class:"whitespace-nowrap px-4 py-4 h-24 table-cell align-middle"},[t("div",We,[t("div",Xe,m(c.largeur)+"x"+m(c.longueur),1),t("div",Ye,[r(e(de),{placement:"right-start",triggers:["hover","focus","click"]},{popper:p(()=>[c.stock_restant>0?(l(),d("span",it,m(c.isInPanier?"Modifier quantiter":"Ajouter au")+" panier",1)):(l(),d("span",rt," Rupture de stock "))]),default:p(()=>[t("div",null,[c.stock_restant>0?(l(),d("div",Ze,[t("button",{onClick:E=>e(G)(!0,c,a,h),class:P([c.stock_restant>10?"bg-green-700":c.stock_restant>0?"bg-orange-400 ":"bg-red-700","w-[35px] h-[35px] block rounded-full flex items-center justify-center"])},[c.isInPanier?(l(),d("span",tt,m(c.panier.quantiter),1)):(l(),N(ae,{key:0,class:"text-xl text-white items-center justify-center"}))],10,et)])):(l(),d("span",st))])]),_:2},1024)]),t("div",ot,[t("span",at,m(e(W)(c.prixProduit))+" HT",1)])])],40,Ke))),128))])])])]))),128))])])])])]),r(e(R),{show:j.value,as:"template",unmount:!1},{default:p(()=>[r(e(U),{as:"div",onClose:S,class:"relative z-[60]",unmount:!1},{default:p(()=>[r(e(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[nt]),_:1}),t("div",lt,[t("div",dt,[r(e(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[r(e(F),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",unmount:!1},{default:p(()=>[r(e(H),{unmount:!1,as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:p(()=>[g(" Visuel image "+m(e(_).nom_visuel),1)]),_:1}),t("div",ut,[r(e(ue),{modules:[e(ce),e(pe),e(me),e(_e)],"slides-per-view":1,"space-between":40,pagination:{clickable:!0,el:".swiper-pagination-custom",bulletActiveClass:"opacity-full",bulletClass:"swiper-pagination-bullet mx-2 !bg-primary-300",type:"bullets"},scrollbar:{draggable:!0},navigation:{nextEl:".swiper-button-prev-custom",prevEl:".swiper-button-next-custom",disabledClass:"lg:hidden"},class:"lg:!px-10 !px-0 lg:!py-2 lg:!pt-4 !py-2 !relative h-full"},{default:p(()=>[t("div",ct,[r(ne,{class:"!h-6 !w-12 text-5xl flex items-center justify-center text-primary-100"})]),t("div",pt,[r(le,{class:"!h-6 !w-12 text-5xl flex items-center justify-center text-primary-100"})]),mt,(l(!0),d(k,null,B(e(_).visuels,(i,a)=>(l(),N(e(fe),{class:"lg:px-2",key:a},{default:p(()=>[t("div",_t,[i.img_produit!=null?(l(),d("div",ft,[t("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+e(T)(i.img_produit),alt:e(_).nom_visuel,class:"z-20 rounded relative w-full h-full object-contain"},null,8,vt)])):(l(),d("div",gt,[r(O)]))])]),_:2},1024))),128))]),_:1},8,["modules","pagination","navigation"])]),t("div",{class:"flex flex-row-reverse"},[t("button",{type:"button",class:"mt-4 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300",onClick:S},"Fermer")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),r(e(R),{appear:"",show:x.value,as:"template",unmount:!1},{default:p(()=>[r(e(U),{as:"div",class:"relative z-50"},{default:p(()=>[r(e(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[xt]),_:1}),t("div",ht,[t("div",bt,[r(e(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[r(e(F),{class:"w-full border-[5px] border-primary-200 max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:p(()=>[e(v)!=!1?(l(),N(e(H),{key:0,as:"h3",class:"lg:text-lg text-sm text-center font-medium leading-6 text-gray-900"},{default:p(()=>[g(m(e(o).id_panier_edi_list!=null&&e(o).id_panier_edi_list!=0?"Modifier Quantit\xE9":"Ajouter ")+" produit "+m(e(v).sku),1)]),_:1})):w("",!0),e(v)!=!1?(l(),d("form",{key:1,class:"editQteModal",onSubmit:s[6]||(s[6]=ee(i=>e(K)(i,e(o).id_panier_edi_list!=null&&e(o).id_panier_edi_list!=0),["prevent"]))},[$(t("input",{type:"hidden",name:"id_produit",id:"id_produit","onUpdate:modelValue":s[1]||(s[1]=i=>e(o).idProduit=i)},null,512),[[I,e(o).idProduit]]),$(t("input",{type:"hidden",name:"id_panier_edi_list",id:"id_panier_edi_list","onUpdate:modelValue":s[2]||(s[2]=i=>e(o).id_panier_edi_list=i)},null,512),[[I,e(o).id_panier_edi_list]]),t("div",yt,[t("div",wt,[kt,r(oe,{onChange:s[3]||(s[3]=i=>e(Y)(i,e(o))),value:e(o).quantiter,id:"quantiter",min:"0",max:e(v).stock_restant,name:"quantiter",placeholder:"Saisissez la quantiter pour la commande"},null,8,["value","max"]),r(q,{class:"mt-2",message:e(o).errors.quantiter},null,8,["message"]),r(q,{class:"mt-2",message:e(o).errors.idProduit},null,8,["message"]),r(q,{class:"mt-2",message:e(o).errors.id_panier_edi_list},null,8,["message"])]),e(v).isInPanier?(l(),d("div",Ct,[t("button",{type:"button",onClick:s[4]||(s[4]=i=>e(z)(e(v).panier.id_panier_edi_list,e(o).key_tab_1,e(o).key_tab_2)),class:"w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[r(e(D),{class:"w-5 h-5 mr-2"}),g("Suprimmer le produit du panier ")])])):w("",!0)]),t("div",jt,[t("button",{onClick:s[5]||(s[5]=i=>{x.value=!1}),type:"button",class:"mx-10 inline-flex justify-center rounded-md border border-transparent hover:border-red-100 px-4 py-2 text-sm font-medium text-red-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Annuler "),t("button",{class:P([{"opacity-25":e(o).processing},"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"]),disabled:e(o).processing,type:"submit"},[g(" Valider "),r(e(he),{class:"h-6 w-6 ml-1 group-hover:translate-x-1 group-disabled:translate-x-0 transition-all duration-300",viewBox:"0 0 24 24",fill:"none"})],10,Bt)])],32)):w("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}});export{Ht as default};
