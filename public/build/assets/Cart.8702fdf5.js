import{_ as v,D as B}from"./AuthenticatedLayout.f90d6176.js";import{z as y,P as f,B as E,o as a,a as r,d as c,u as o,f as t,F as b,K as F,H as T,t as _,k as L,b as k}from"./app.528cad76.js";import{_ as j}from"./EtapeOrder.5c6178e5.js";import{_ as V,a as $}from"./ResumeOrderVertical.7ec7909a.js";import{_ as H}from"./InputNumber.cbc6515b.js";import"./LangueChoice.c0ee0651.js";const N={class:"container mx-auto mt-5"},U=t("h1",{class:"font-semibold text-lg lg:text-2xl sm:text-xl text-gray-800 text-center py-2"},"Panier",-1),A={class:"grid grid-cols-4"},M={class:"xl:col-span-1 col-span-4"},Q={class:"xl:col-span-2 lg:col-span-3 col-span-4 flex items-start justify-center"},z={key:0,class:"w-full h-90"},I={class:"sm:col-span-2 xsm:col-span-3 col-span-4 flex items-center justify-center"},K={key:0,class:"lg:h-[150px] sm:h-[130px] h-full w-full px-2"},O=["src","alt"],R={key:1},G=t("span",null,"Pas de photo pour ce produit !",-1),J=[G],W={class:"sm:col-span-10 xsm:col-span-9 col-span-8 flex flex-col xl:text-lg text-sm"},X={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Y={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Z={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},D={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},ee={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},te={class:"grid grid-cols-8"},se={class:"xl:col-span-5 col-span-4 w-full h-8 bg-gray-300 flex items-center justify-center rounded"},ie={key:0,class:"editQteForm w-full h-full"},ne=["value"],ae=["value"],re=["value"],oe=["value"],le=["value"],de={class:"xl:col-span-3 col-span-4 sm:mx-4 mx-2"},ce=["onClick"],_e={key:1,class:"flex items-center justify-center"},ue=t("span",null,"Votre panier est vide !",-1),pe=[ue],me={class:"lg:hidden block col-span-4"},fe={class:"lg:block hidden col-span-1 ml-5"},he={layout:(m,l)=>m(v,()=>child),layout:v},Pe=Object.assign(he,{__name:"Cart",props:["panier","produits"],setup(m){const l=m;var d=y(f().props.value.Panier.panier.panier),h=y(f().props.value.auth.user[0].client),P=["Panier","Adresse Livraison / Facturation","Finaliser commande"];const x=(i,n)=>i.toFixed(n),w=(i,n)=>{var e=void 0;return i.forEach(s=>{s.classList!=null&&s.classList.length>0&&s.classList.contains(n)&&(e=s)}),e};var C=(i,n)=>{i.preventDefault();var e=w(i.path,"editQteForm");if(e!=null){var s=new FormData(e);k({idProduit:s.get("id_produit"),quantiter:s.get("qte"),id_panier_edi_list:s.get("id_panier_edi_list"),id_panier_edi:s.get("id_panier_edi"),id_client_edi:s.get("id_client_edi")}).post(route("cart/products/edit"),{preserveScroll:!0,preserveState:!0,onSuccess:p=>{p.props.session.status?(d.value[s.get("key_tab")].panier.id_panier_edi_list=p.props.session.id_panier_edi_list,d.value[s.get("key_tab")].isInPanier=!0,d.value[s.get("key_tab")].panier.quantiter=s.get("qte"),Toast.fire({icon:"success",title:"La quantiter du produit "+n+" \xE0 bien \xE9t\xE9 modifier"})):Toast.fire({icon:"error",title:"Une erreur c'est produit lors de la modification de la quantiter du produit."})}})}},S=(i,n,e)=>{Swal.fire({title:"Attention",text:"Etes-vous sur de supprimer cette article du panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(s=>{s.isConfirmed&&k({id_panier_edi_list:i,id_panier_edi:n}).post(route("cart/products/delete"),{preserveScroll:!0,onSuccess:p=>{p.props.session.status?Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer du panier"}):Toast.fire({icon:"error",title:"Une erreur c'est produit lors de la supression du produit du panier"})}})})},q=i=>(Math.round(i*100)/100).toFixed(2),g=i=>{var n=i;return h.value.taux_remise>0&&(n=n-n*(h.value.taux_remise/100)),q(n)};return E(()=>{d.value=f().props.value.Panier.panier.panier}),(i,n)=>(a(),r(b,null,[c(o(T),{title:"Panier"}),t("section",N,[U,t("div",A,[t("div",M,[c(j,{etape:1,nbEtape:3,listeEtape:o(P)},null,8,["listeEtape"])]),t("div",Q,[o(d)!=null?(a(),r("div",z,[(a(!0),r(b,null,F(o(d),(e,s)=>(a(),r("div",{key:s,class:"w-full lg:p-4 sm:p-3 p-2 grid bg-gray-100 rounded grid-cols-12 my-2"},[t("div",I,[e.photo!=null?(a(),r("div",K,[t("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+e.photo.img_produit,alt:e.code_sku,class:"w-full h-full object-cover rounded-xl"},null,8,O)])):(a(),r("div",R,J))]),t("div",W,[t("span",X,"SKU : "+_(e.code_sku),1),t("span",Y,"Taille : "+_(e.dimension.largeur+"x"+e.dimension.longueur),1),t("span",Z,"Prix du M\xB2 : "+_(o(g)(e.gamme.prix_vente_ht_m2))+" \u20AC HT",1),t("span",D,"M\xB2 : "+_(x(e.dimension.largeur/100*(e.dimension.longueur/100)*e.panier.quantiter,2))+" m\xB2",1),t("span",ee,"Prix HT : "+_(x(e.dimension.largeur/100*(e.dimension.longueur/100)*e.panier.quantiter*o(g)(e.gamme.prix_vente_ht_m2),2))+" \u20AC",1),t("div",te,[t("div",se,[e.stats_produit.stock_restant>0?(a(),r("form",ie,[c(H,{onChange:u=>o(C)(u,e.design.nom_design+e.dimension.largeur+"x"+e.dimension.longueur),name:"qte",max:e.stats_produit.stock_restant,value:e.panier.quantiter>0?e.panier.quantiter:1,class:"h-full"},null,8,["onChange","max","value"]),t("input",{type:"hidden",name:"id_produit",value:e.id_produit},null,8,ne),t("input",{type:"hidden",name:"id_panier_edi_list",value:e.panier.id_panier_edi_list!=null?e.panier.id_panier_edi_list:0},null,8,ae),t("input",{type:"hidden",name:"key_tab",value:s},null,8,re),t("input",{type:"hidden",name:"id_panier_edi",value:l.panier.id_panier_edi!=null?l.panier.id_panier_edi:0},null,8,oe),t("input",{type:"hidden",name:"id_client_edi",value:e.panier.id_client_edi!=null?e.panier.id_client_edi:0},null,8,le)])):L("",!0)]),t("div",de,[t("button",{type:"button",onClick:u=>o(S)(e.panier.id_panier_edi_list!=null?e.panier.id_panier_edi_list:0,l.panier.id_panier_edi!=null?l.panier.id_panier_edi:0,s),class:"w-full bg-red-500 text-white rounded hover:bg-red-300 transition duration-300 h-full"},[c(B,{class:"text-white"})],8,ce)])])])]))),128))])):(a(),r("div",_e,pe))]),t("div",me,[c(V,{linkEtapeSuivant:"/cart/adresses",titreLink:"Valider la commande",panier:l.panier,isButtonSubmit:!1},null,8,["panier"])]),t("div",fe,[c($,{linkEtapeSuivant:"/cart/adresses",titreLink:"Valider la commande",panier:l.panier,isButtonSubmit:!1},null,8,["panier"])])])])],64))}});export{Pe as default};
