import{o as d,a as u,f as e,A as b,b as T,C as G,d as o,u as t,t as p,h as x,F as k,J as A,e as m,H as Q,n as J,K as S,k as C,j as K,w as j,g as P,N as W}from"./app.fe5102d3.js";import{r as X,E as Y,d as Z,C as ee}from"./index.40de8861.js";import{_ as $,I as te}from"./AuthenticatedLayout.d6ad7e45.js";import{_ as se}from"./Tooltip.c49c6294.js";import{r as ie,_ as re}from"./Breadcrumbs.353bfdc5.js";import{_ as B}from"./InputError.c16c5474.js";import{r as oe}from"./ListBulletIcon.a0de9c3e.js";import{r as ne}from"./ArrowRightCircleIcon.71d79d1f.js";import{f as z,o as y}from"./transition.add7e9d3.js";import{N as E,_ as N,U as L}from"./dialog.f0874ba2.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./micro-task.fe338338.js";import"./description.07950846.js";function U(h,n){return d(),u("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.515 10.674a1.875 1.875 0 000 2.652L8.89 19.7c.352.351.829.549 1.326.549H19.5a3 3 0 003-3V6.75a3 3 0 00-3-3h-9.284c-.497 0-.974.198-1.326.55l-6.375 6.374zM12.53 9.22a.75.75 0 10-1.06 1.06L13.19 12l-1.72 1.72a.75.75 0 101.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L15.31 12l1.72-1.72a.75.75 0 10-1.06-1.06l-1.72 1.72-1.72-1.72z","clip-rule":"evenodd"})])}const ae={class:"container mx-auto"},le={class:"relative container mx-auto grid grid-cols-12 mb-4"},de={class:"col-span-2 flex items-end"},ue={href:"/order_entrepot/gamme",class:"relative inline-block group"},ce=e("span",{class:"inline-block border-b border-black pl-5 group-hover:text-primary-300 group-hover:border-primary-300 transition duration-300"},"Retourner aux gammes",-1),pe={class:"flex items-center justify-center col-span-7"},me={class:"text-6xl font-bold"},_e={class:"col-span-3 rounded bg-primary-white border border-primary-100 text-center flex flex-col text-primary-300"},fe={class:"capitalize"},ve={class:"sm:w-auto w-full py-2 flex items-center justify-center"},ge=e("a",{href:"/cart",class:"py-2 px-4 ml-2 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},"Voir mon panier",-1),xe={class:"flex flex-col"},he={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},be={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},ye={class:"min-w-full overflow-hidden border border-primary-200 p-4"},we={class:"text-left text-sm font-light"},ke={class:"px-4 py-4"},Ce={class:"whitespace-nowrap px-4 py-4 w-[190px] overflow-x-hidden"},je={class:"h-24 w-full mb-2"},Pe={key:0,class:"cursor-pointer relative overflow-hidden w-full h-full flex justify-center"},Be={class:"absolute flex items-center justify-center w-full h-full"},Ie=["onClick","src","alt"],qe={key:1,class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Ve={class:"text-center w-full"},Te={class:"font-bold pt-2"},Ae={class:"w-full h-full flex flex-col items-center justify-between"},Se={class:"w-full font-bold text-center"},$e={class:"flex items-center justify-center"},ze={key:0,class:"hover:scale-110 transition duration-300"},Ee=["onClick"],Ne={key:1,class:"text-xl text-white items-center justify-center"},Le={key:1,class:"bg-red-700 w-[35px] h-[35px] block rounded-full flex items-center justify-center"},Ue={key:0},Me={key:1},Oe={class:"text-center w-full"},Fe={class:"font-bold"},He=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Re={class:"fixed inset-0 overflow-y-auto"},De={class:"flex min-h-full items-center justify-center p-4 text-center"},Ge=e("span",{id:"nomVisuelImage"},null,-1),Qe=e("div",{class:"mt-2 h-[40rem] w-full"},[e("img",{id:"visuelImage",class:"w-full h-full object-cover"})],-1),Je=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ke={class:"fixed inset-0 overflow-y-auto"},We={class:"flex min-h-full items-center justify-center p-4 text-center"},Xe={class:"mt-2 flex justify-center items-center"},Ye={class:"text-sm text-gray-500 w-full"},Ze=e("label",{class:"lg:text-lg text-sm",for:"ref"}," Quantiter : ",-1),et=["max"],tt={key:0,class:"w-full mt-7 ml-5"},st={class:"mt-4 flex justify-center"},it={type:"submit",class:"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},rt={layout:(h,n)=>h($,()=>child),layout:$},ht=Object.assign(rt,{__name:"Gamme",props:["gamme","designpanier"],setup(h){const n=h;var M=[{title:"Accueil",link:"/",icon:ie,active:!1},{title:"Commande Entrep\xF4t",link:"/order_entrepot/gamme",icon:oe,active:!1},{title:"Gamme",link:"/order_entrepot/gamme",icon:"",active:!1},{title:n.gamme.nom_gamme,link:"/order_entrepot/gamme/"+n.gamme.nom_gamme,icon:"",active:!0}];const w=b(!1),v=b(!1);var _=b(n.designpanier);console.log(n.designpanier);var f=b(!1),r=T({idProduit:null,quantiter:1,id_panier_edi_list:null,key_tab_1:0,key_tab_2:0}),O=(a,i,s,c)=>{v.value=a,f.value=i,r.idProduit=i.id_produit,r.key_tab_1=s,r.key_tab_2=c,r.quantiter=i.produit_panier.quantiter>0?i.produit_panier.quantiter:1,r.id_panier_edi_list=i.produit_panier.id_panier_edi_list!=null?i.produit_panier.id_panier_edi_list:0};function I(){w.value=!1}function F(a,i,s){w.value=!0;var c=i+" "+s;document.getElementById("visuelImage").setAttribute("src","https://gestion.tapis-nazar.fr/img/produit/"+a),document.getElementById("visuelImage").setAttribute("alt",c),document.getElementById("nomVisuelImage").textContent=c}var H=(a,i)=>{a.preventDefault();var s=r.key_tab_1,c=r.key_tab_2;r.quantiter>0?r.post(route("order_entrepot/panier/add"),{preserveScroll:!0,preserveState:!0,onSuccess:l=>{l.props.session.status?(_.value[s].produits[c].produit_panier.id_panier_edi_list=l.props.session.id_panier_edi_list,_.value[s].produits[c].isInPanier=!0,_.value[s].produits[c].produit_panier.quantiter=r.quantiter,v.value=!1,Toast.fire({icon:"success",title:i?"La quantiter pour ce produit \xE0 bien \xE9t\xE9 modifier":"Le produit \xE0 bien ajouter au panier"})):Toast.fire({icon:"error",title:l.props.session.message})}}):q(r.id_panier_edi_list,s,c)},q=(a,i,s)=>{Swal.fire({title:"Attention",text:"Etes-vous sur de supprimer cette article du panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(c=>{c.isConfirmed&&T({id_panier_edi_list:a}).post(route("order_entrepot/panier/delete"),{preserveScroll:!0,onSuccess:g=>{g.props.session.status?(Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer du panier"}),_.value[i].produits[s].isInPanier=!1,_.value[i].produits[s].produit_panier.quantiter=0,_.value[i].produits[s].produit_panier.id_panier_edi_list=0,v.value=!1):Toast.fire({icon:"error",title:g.props.session.message})}})})},V=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous sur de vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(a=>{a.isConfirmed&&W.Inertia.post("/cart/empty",{},{preserveScroll:!0,onSuccess:i=>{i.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})};const R=a=>HtmlEntities.decode(a.toLowerCase());var D=a=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(a);return G(()=>{axios.post("/order_entrepot/gamme/"+n.gamme.nom_gamme).then(a=>{a.status==200&&(_.value=a.data.designpanier)})}),(a,i)=>(d(),u(k,null,[o(t(Q),{title:"Products"}),e("section",ae,[o(re,{links:t(M)},null,8,["links"]),e("section",le,[e("div",de,[e("a",ue,[o(t(X),{class:"h-4 w-4 absolute left-0 bottom-1/4 top-1/4 text-black group-hover:text-primary-300 transition duration-300"}),ce])]),e("div",pe,[e("h1",me,p(n.gamme.nom_gamme),1)]),e("div",_e,[e("span",null,"Tapis "+p(n.gamme.type_tapis==0?"int\xE9rieur":n.gamme.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+p(n.gamme.type_poils==1?"court":"long")+" - "+p(n.gamme.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",fe,p(R(n.gamme.nom_special)),1),e("span",null,"Prix HT m\xB2 : "+p(n.gamme.prix_vente_ht_m2_remise?n.gamme.prix_vente_ht_m2_remise:n.gamme.prix_vente_ht_m2)+" \u20AC",1),e("div",ve,[e("button",{type:"button",onClick:i[0]||(i[0]=(...s)=>t(V)&&t(V)(...s)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[o(t(U),{class:"w-5 h-5 mr-2"}),x("Vider mon panier")]),ge])])]),e("div",xe,[e("div",he,[e("div",be,[e("div",ye,[(d(!0),u(k,null,A(t(_),(s,c)=>(d(),u("div",{class:"border-b border-primary-200 min-w-full",key:c},[e("table",we,[e("tbody",null,[e("tr",ke,[e("td",Ce,[e("div",je,[s.img_produit!=null?(d(),u("div",Pe,[e("div",Be,[o(Y,{class:"text-lg text-black"})]),e("img",{onClick:l=>F(s.img_produit,n.gamme.nom_gamme,s.nom_design),src:"https://gestion.tapis-nazar.fr/img/produit/"+t(Z)(s.img_produit),alt:s.code_sku,class:"z-20 relative hover:opacity-50 transition duration-300 w-full h-full object-contain"},null,8,Ie)])):(d(),u("div",qe,[o(te)]))]),e("div",Ve,[e("span",Te,p(s.design),1)])]),(d(!0),u(k,null,A(s.produits,(l,g)=>(d(),u("td",{key:g,class:"whitespace-nowrap px-4 py-4 h-24 table-cell align-middle"},[e("div",Ae,[e("div",Se,p(l.largeur)+"x"+p(l.longueur),1),e("div",$e,[o(se,null,{header:m(()=>[l.stats_produit.stock_restant>0?(d(),u("div",ze,[e("button",{onClick:ot=>t(O)(!0,l,c,g),class:J([l.stats_produit.stock_restant>10?"bg-green-700":l.stats_produit.stock_restant>0?"bg-orange-400 ":"bg-red-700","w-[35px] h-[35px] block rounded-full flex items-center justify-center"])},[l.isInPanier?(d(),u("span",Ne,p(l.produit_panier.quantiter),1)):(d(),S(ee,{key:0,class:"text-xl text-white items-center justify-center"}))],10,Ee)])):(d(),u("span",Le))]),body:m(()=>[l.stats_produit.stock_restant>0?(d(),u("span",Ue,p(l.isInPanier?"Modifier quantiter":"Ajouter au")+" panier",1)):(d(),u("span",Me," Rupture de stock "))]),_:2},1024)]),e("div",Oe,[e("span",Fe,p(t(D)(l.prixProduit))+" HT",1)])])]))),128))])])])]))),128))])])])])]),o(t(z),{show:w.value,as:"template",unmount:!1},{default:m(()=>[o(t(E),{as:"div",onClose:I,class:"relative z-30",unmount:!1},{default:m(()=>[o(t(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:m(()=>[He]),_:1}),e("div",Re,[e("div",De,[o(t(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:m(()=>[o(t(N),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",unmount:!1},{default:m(()=>[o(t(L),{unmount:!1,as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:m(()=>[x(" Visuel image "),Ge]),_:1}),Qe,e("div",{class:"flex flex-row-reverse"},[e("button",{type:"button",class:"mt-4 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300",onClick:I},"Fermer")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),o(t(z),{appear:"",show:v.value,as:"template",unmount:!1},{default:m(()=>[o(t(E),{as:"div",class:"relative z-50"},{default:m(()=>[o(t(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:m(()=>[Je]),_:1}),e("div",Ke,[e("div",We,[o(t(y),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:m(()=>[o(t(N),{class:"w-full border-[5px] border-primary-200 max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:m(()=>[t(f)!=!1?(d(),S(t(L),{key:0,as:"h3",class:"lg:text-lg text-sm text-center font-medium leading-6 text-gray-900"},{default:m(()=>[x(p(t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0?"Modifier Quantiter":"Ajouter ")+" produit "+p(t(f).code_sku),1)]),_:1})):C("",!0),t(f)!=!1?(d(),u("form",{key:1,onSubmit:i[6]||(i[6]=K(s=>t(H)(s,t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0),["prevent"]))},[j(e("input",{type:"hidden",name:"id_produit",id:"id_produit","onUpdate:modelValue":i[1]||(i[1]=s=>t(r).idProduit=s)},null,512),[[P,t(r).idProduit]]),j(e("input",{type:"hidden",name:"id_panier_edi_list",id:"id_panier_edi_list","onUpdate:modelValue":i[2]||(i[2]=s=>t(r).id_panier_edi_list=s)},null,512),[[P,t(r).id_panier_edi_list]]),e("div",Xe,[e("div",Ye,[Ze,j(e("input",{"onUpdate:modelValue":i[3]||(i[3]=s=>t(r).quantiter=s),class:"w-full lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"quantiter",type:"number",min:"0",max:t(f).stock_restant,name:"quantiter",placeholder:"Saisissez la quantiter pour la commande"},null,8,et),[[P,t(r).quantiter]]),o(B,{class:"mt-2",message:t(r).errors.quantiter},null,8,["message"]),o(B,{class:"mt-2",message:t(r).errors.idProduit},null,8,["message"]),o(B,{class:"mt-2",message:t(r).errors.id_panier_edi_list},null,8,["message"])]),t(f).isInPanier?(d(),u("div",tt,[e("button",{type:"button",onClick:i[4]||(i[4]=s=>t(q)(t(f).produit_panier.id_panier_edi_list,t(r).key_tab_1,t(r).key_tab_2)),class:"w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[o(t(U),{class:"w-5 h-5 mr-2"}),x("Suprimmer le produit du panier ")])])):C("",!0)]),e("div",st,[e("button",{onClick:i[5]||(i[5]=s=>{v.value=!1}),type:"button",class:"mx-10 inline-flex justify-center rounded-md border border-transparent hover:border-red-100 px-4 py-2 text-sm font-medium text-red-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Annuler "),e("button",it,[x(" Valider "),o(t(ne),{class:"h-6 w-6 ml-1 group-hover:translate-x-1 group-disabled:translate-x-0 transition-all duration-300",viewBox:"0 0 24 24",fill:"none"})])])],32)):C("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}});export{ht as default};
