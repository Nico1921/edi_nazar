import{A as p,I as L,B as $,o as a,a as c,d as m,u as t,f as e,j as X,n as U,h as b,k as g,F as _,K as y,t as i,H as q,J as T,q as D,S as R,N as O}from"./app.e1cf1c4a.js";import{S as J,r as K,R as Q,L as W}from"./Magnify.d566ba13.js";import{_ as z,C as Y}from"./AuthenticatedLayout.1bff93d1.js";import{E as Z}from"./MicrosoftExcel.f2e2b9d1.js";import{_ as ee,r as te}from"./Breadcrumbs.a8d3c9f4.js";import{r as re}from"./ListBulletIcon.92e3e0f6.js";import"./flag-icons.min.3dbbb609.js";const se={class:"container mx-auto mt-5"},oe=e("h1",{class:"font-semibold mx-1 lg:text-2xl text-lg text-gray-800 py-2"},"Commande Entrep\xF4t - Gamme",-1),ae={key:0,class:"bg-primary-50 rounded xl:mx-40 mb-5"},ne=e("h2",{class:"text-center lg:text-xl text-lg text-primary-300 py-1 bg-primary-100 rounded-t-lg"},"Ajouter au panier via un fichier",-1),ie={class:"p-4 flex flex-col items-center justify-items-center justify-center"},le=["onSubmit"],ce={class:"block lg:text-lg text-sm cursor-pointer text-primary-500 bg-primary-200 p-3 rounded-lg",for:"file_import_cart"},de={class:"hidden",id:"file_name_span_client"},me=e("span",{id:"file_name_client"},null,-1),ue=e("p",{class:"mt-1 text-sm text-gray-500",id:"file_input_helper"},".XLS,.XLSX",-1),pe={class:"absolute bottom-0 right-0"},ge=["href"],_e=["href"],fe={key:0,class:"col-span-1"},xe=e("button",{type:"submit",class:"p-3 rounded-lg lg:text-lg text-sm text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300"},"Importer !",-1),he=[xe],ve={class:"mx-1 my-1 flex sm:flex-row flex-col w-auto sm:flex-grow order-1 sm:order-2 mb-2 sm:mb-0"},be={class:"relative flex-grow"},ye={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},we={class:"sm:w-auto w-full sm:pl-2 pl-0 sm:pt-0 pt-2"},Ie={class:"grid grid-cols-4",id:"gammes"},Be=["href"],Ce={class:"relative group z-20"},Pe={key:0,class:"relative w-full lg:h-60 sm:h-52 h-40 z-20"},ke=["src","alt"],Ee={key:1,class:"relative w-full h-60"},Le=e("span",null,"Pas de photo pour cette gamme !",-1),Ue=[Le],Te={class:"absolute bottom-0 z-30 w-full overflow-hidden text-sm"},Re={class:"max-h-0 group-hover:max-h-60 rounded group-hover:p-1 transition-full duration-500 bg-primary-100 text-center flex flex-col sm:bg-opacity-70 text-white z-30"},ze={class:"capitalize"},Se={class:"flex flex-wrap items-center justify-center text-center lg:px-4 px-0 py-2"},je={class:"capitalize text-center font-semibold"},Ne={class:"grid grid-cols-4 justify-center items-center bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 xl:px-6"},Ve={class:"lg:col-span-1 sm:col-span-2 col-span-4 sm:text-start text-center"},Me=D('<option value="8">8 par page</option><option value="12">12 par page</option><option value="18">18 par page</option><option value="50">50 par page</option><option value="100">100 par page</option>',5),Ae=[Me],Fe={class:"lg:col-span-2 sm:col-span-2 col-span-4 lg:text-center sm:text-end text-center sm:my-0 my-2"},Ge={class:"flex lg:justify-end justify-center lg:col-span-1 col-span-4"},He={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},$e=["href"],Xe={key:0},qe={layout:(f,x)=>f(z,()=>child),layout:z},Ze=Object.assign(qe,{__name:"Products",props:["products","dimensions"],setup(f){const x=f;var S=[{title:"Accueil",link:"/",icon:te,active:!1},{title:"Commande Entrep\xF4t - Gamme",link:"/order_entrepot/gamme",icon:re,active:!0}];const j=new URL("/build/assets/Template_Vierge_Com.b1659618.xlsx",self.location).href,N=new URL("/build/assets/Template_Model_Com.8eb69b5c.xlsx",self.location).href;p(!1);var l=p(x.products),w=p(L().props.value.auth.user[0].client);let u=p(!1);var V=p(L().props.value.session.typeVente),I=o=>{o.target.value==""?(document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),u.value=!1):(document.getElementById("file_name_client").innerText=o.target.files[0].name,document.getElementById("file_name_span_client").classList.remove("hidden"),u.value=!0)},B=()=>{document.getElementById("file_import_cart").value=null,document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),u.value=!1};const M=()=>{var o=new FormData(document.getElementById("fileCartImport"));R.post("/order_entrepot/panier/import",o).then(s=>{console.log(s),s.status?document.location.href="/cart":Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'importation de votre fichier, veuillez v\xE9rifier que votre fichier correspond bien \xE0 l'exemple fournis puis ressayer !"})})},h=o=>HtmlEntities.decode(o.toLowerCase()),A=o=>x.dimensions.filter(({id_gamme:s})=>s===o);var d={previous:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",previous_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",next:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",next_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",number:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",number_active:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 bg-gray-100"},C=()=>{const o=new URL(window.location.href);var s=document.getElementById("per_page");o.searchParams.set("perPage",s.value),window.location.href=o.href},F=()=>{const o=new URL(window.location.href);return o.searchParams.get("perPage")!=null?o.searchParams.get("perPage"):12},P=o=>{var s="/order_entrepot/gamme?filter[nom_gamme]="+o.target.value;R.post(encodeURI(s)).then(r=>{if(r.status==200){const n=new URL(window.location.href);n.searchParams.set("filter[nom_gamme]",o.target.value),l.value=r.data.products,window.history.replaceState("","",n.href)}})},G=o=>(Math.round(o*100)/100).toFixed(2),H=o=>{var s=o;return w.value.taux_remise>0&&(s=s-s*(w.value.taux_remise/100)),G(s)},k=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous de vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(o=>{o.isConfirmed&&O.Inertia.post("/cart/empty",{},{preserveScroll:!0,onSuccess:s=>{console.log(s),s.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})};return $(()=>{var o=document.getElementById("per_page");o.value=F();const s=new URL(window.location.href);var r=document.getElementById("searchGamme");r.value=s.searchParams.get("filter[nom_gamme]")}),(o,s)=>(a(),c(_,null,[m(t(q),{title:"Produits"}),e("section",se,[m(ee,{links:t(S)},null,8,["links"]),oe,t(V)==1?(a(),c("div",ae,[ne,e("div",ie,[e("form",{id:"fileCartImport",class:"grid grid-cols-4",onSubmit:X(M,["prevent"])},[e("div",{class:U(t(u)?"relative col-span-3 lg:mx-2 mx-1":"relative col-span-4 lg:mx-2 mx-1")},[e("label",ce,[b("Importer fichier de commandes "),m(Z)]),e("span",de,[e("button",{type:"button",onClick:s[0]||(s[0]=(...r)=>t(B)&&t(B)(...r))},[m(Y)]),me]),e("input",{onChange:s[1]||(s[1]=(...r)=>t(I)&&t(I)(...r)),type:"file",class:"hidden",id:"file_import_cart",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"fileImport"},null,32),ue,e("span",pe,[e("a",{href:t(j),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Template vierge",8,ge),b(" / "),e("a",{href:t(N),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Mod\xE8le",8,_e)])],2),t(u)?(a(),c("div",fe,he)):g("",!0)],40,le)])])):g("",!0),e("div",ve,[e("div",be,[e("input",{class:"block w-full pl-9 text-sm rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",placeholder:"Recherche...",id:"searchGamme",type:"text",name:"global",onInput:s[2]||(s[2]=(...r)=>t(P)&&t(P)(...r))},null,32),e("div",ye,[m(J,{class:"text-xl mb-1"})])]),e("div",we,[e("button",{type:"button",onClick:s[3]||(s[3]=(...r)=>t(k)&&t(k)(...r)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[m(t(K),{class:"w-5 h-5 mr-2"}),b("Vider mon panier")])])]),e("div",Ie,[(a(!0),c(_,null,y(t(l).data,(r,n)=>(a(),c("a",{key:n,href:"/order_entrepot/gamme/"+h(r.nom_gamme),class:"z-30 lg:col-span-1 col-span-2 group p-4 hover:scale-110 transition-full duration-300 cursor-pointer"},[e("div",Ce,[r.img_gamme!=null?(a(),c("div",Pe,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/gamme/"+r.img_gamme,alt:r.nom_gamme,class:"z-20 rounded relative w-full h-full object-cover"},null,8,ke)])):(a(),c("div",Ee,Ue)),e("div",Te,[e("div",Re,[e("span",null,"Tapis "+i(r.type_tapis==0?"int\xE9rieur":r.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+i(r.type_poils==1?"court":"long")+" - "+i(r.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",ze,i(h(r.nom_special)),1),e("div",Se,[(a(!0),c(_,null,y(A(r.id_gamme),(E,v)=>(a(),c("span",{key:v,class:"block text-center w-auto lg:px-1"},i(!Number.isInteger(v/3)&&v!=0?" - ":"")+" "+i(E.largeur)+"x"+i(E.longueur)+"cm ",1))),128))]),e("span",null,"Prix HT m\xB2 : "+i(t(H)(r.prix_vente_ht_m2))+" \u20AC",1)])])]),e("div",null,[e("h2",je,"Collection "+i(h(r.nom_gamme)),1)])],8,Be))),128))]),e("div",Ne,[e("div",Ve,[e("select",{id:"per_page",name:"per_page",dusk:"per-page-full",onChange:s[4]||(s[4]=(...r)=>t(C)&&t(C)(...r)),class:"xl:mr-5 mr-2 focus:ring-indigo-500 focus:border-indigo-500 min-w-max shadow-sm text-sm border-gray-300 rounded-md"},Ae,32),e("span",null,"Page "+i(t(l).current_page)+" sur "+i(t(l).last_page),1)]),e("span",Fe,i(t(l).total)+" R\xE9sultats",1),e("div",Ge,[e("nav",He,[(a(!0),c(_,null,y(t(l).links,(r,n)=>(a(),c("a",{key:n,class:U(n!=0&&n+1!=t(l).links.length?r.active?t(d).number_active:t(d).number:n==0?t(l).current_page==1?t(d).previous_disabled:t(d).previous:t(l).current_page==t(l).last_page?t(d).next_disabled:t(d).next),href:r.url},[n!=0&&n+1!=t(l).links.length?(a(),c("span",Xe,i(r.label),1)):g("",!0),n+1==t(l).links.length?(a(),T(Q,{key:1})):g("",!0),n==0?(a(),T(W,{key:2})):g("",!0)],10,$e))),128))])])])])],64))}});export{Ze as default};
