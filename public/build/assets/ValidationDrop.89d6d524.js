import{A as p,I as h,o as d,a as c,d as l,u as s,f as e,t as o,F as y,J as L,k as v,e as _,i as S,w as b,p as w,h as j,H as F,n as f,S as k}from"./app.e37d2480.js";import{_ as P,r as G}from"./AuthenticatedLayout.4375093e.js";import{_ as Q}from"./EtapeOrder.c57dd0ad.js";import{y as O,_ as U,r as Z,O as J,g as B,h as A,a as R,b as z}from"./BouttonPaiement.acd3bb9b.js";import{r as $}from"./ArrowRightCircleIcon.466488fd.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./label.a54ce106.js";import"./description.0e4aadc3.js";import"./use-controllable.2aa5dafc.js";const W={class:"container mx-auto mt-5"},q={class:"grid grid-cols-4"},X={class:"col-span-4"},K={class:"col-span-4 xl:mx-16 lg:mx-8"},ee=e("h1",{class:"text-center text-3xl text-primary-300"},"Finalisation de la commande",-1),se={class:"m-5"},te={class:"bg-primary-50 rounded m-2 p-4"},oe=e("h2",{class:"text-center font-bold"},"Total Commande",-1),ae={class:"grid lg:grid-cols-5 grid-cols-4 justify-center flex-row mt-4 mx-6"},le={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},ie={class:"font-semibold text-gray-600"},ne=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),re={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},de={class:"font-semibold text-gray-600"},ce=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),me={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},pe={lass:"font-semibold text-gray-600"},_e=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),ue={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},xe={lass:"font-semibold text-gray-600"},ge=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),he={class:"lg:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},fe={lass:"font-semibold text-gray-600"},ye={class:"xl:max-h-[calc(100vh-550px)] lg:max-h-[calc(100vh-250px)] max-h-screen sm:px-6 overflow-auto grid grid-cols-1 flex items-center justify-center my-4 mx-2"},ve={class:"border p-4 rounded-lg shadow-lg hover:shadow-xl transition-shadow"},be={class:"flex justify-between items-center mb-4"},we={class:"text-xl font-bold"},je={class:"flex items-center mb-4"},Ie={class:"font-bold"},Ne={class:"text-gray-600"},Ce=e("div",{class:"border-b border-gray-300 mb-4"},null,-1),Te={key:0,class:"grid 2xl:grid-cols-3 lg:grid-cols-4 w-full p-5 h-90 bg-gray-50"},Me={class:"w-full lg:p-4 sm:p-3 p-2 grid bg-gray-100 rounded grid-cols-12 my-2"},De={class:"xl:col-span-4 lg:col-span-4 sm:col-span-2 xsm:col-span-4 col-span-4 flex items-center justify-center"},Le={key:0,class:"lg:h-[150px] sm:h-[130px] h-full w-full px-2"},ke=["src","alt"],Pe={key:1},Be=e("span",null,"Pas de photo pour ce produit !",-1),Ae=[Be],ze={class:"xl:col-span-8 lg:col-span-8 sm:col-span-10 xsm:col-span-8 col-span-8 flex flex-col xl:text-lg text-sm"},Ee={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Ye={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Ve={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},He={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Se={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Fe={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Ge={key:1,class:"flex items-center"},Qe=e("span",{class:"font-semibold"},"Panier Vide !",-1),Oe=[Qe],Ue={class:"border-t border-gray-300 mt-4 pt-4 text-right"},Ze={class:"font-bold text-xl"},Je={class:"bg-gray-100 rounded-b-lg"},Re=e("div",{class:"text-center bg-primary-50 rounded-t-lg py-1"},[e("h2",{class:"text-lg font-bold"},"Moyen de paiement")],-1),$e={key:0,class:"bg-yellow-200 px-4 py-2 rounded flex items-center"},We=e("span",{class:"pl-2 text-yellow-600"},"Pour continuer, veuillez s\xE9lectionner votre moyen de paiement et accepter les CGV.",-1),qe={class:"mx-auto w-full my-2"},Xe={class:"flex sm:flex-row flex-col w-full sm:justify-evenly justify-center items-center"},Ke={class:"flex w-full items-center justify-between"},es={class:"flex items-center"},ss={class:"text-sm"},ts=e("span",{class:"ml-2"}," Carte Bancaire",-1),os={class:"shrink-0 text-white"},as={class:"flex w-full items-center justify-between"},ls={class:"flex items-center"},is={class:"text-sm"},ns=e("span",{class:"ml-2"}," Virement Bancaire",-1),rs={class:"shrink-0 text-white"},ds={class:"flex items-center my-6 mx-auto max-w-sm"},cs=e("label",{for:"checkVenteCondition",class:"ml-2 sm:text-lg text-sm font-medium text-gray-900"},[j("J'accepte les "),e("a",{href:"/cgv",class:"text-gray-400 underline hover:text-[1.15rem] cursor-pointer transition-all duration-300"},"conditions g\xE9n\xE9rales de vente")],-1),ms={class:"py-2"},ps={id:"paymentCB",class:"flex items-center justify-center mb-5"},_s={key:0,class:"flex justify-center mb-5"},us=["disabled"],xs={layout:(I,N)=>I(P,()=>child),layout:P},Ns=Object.assign(xs,{__name:"ValidationDrop",props:["client","panier","produits"],setup(I){p(h().props.value.auth.user[0].client);var N=p(h().props.value.PanierDrop.panier.clients),u=p(h().props.value.PanierDrop.panier.panierActuel);p(h().props.value.PanierDrop);var E=["/dropshipping/cart","/dropshipping/cart/adresses","/dropshipping/cart/validation"],Y=["Panier","Adresse Livraison / Facturation","Finaliser commande"];const V="data:image/svg+xml;base64,PHN2ZyB2ZXJzaW9uPSIxLjIiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgdmlld0JveD0iMCAwIDQwMDAgNDAwMCIgd2lkdGg9IjEwMDAiIGhlaWdodD0iMTAwMCI+PHN0eWxlPi5he2ZpbGw6I2EzYTNhM30uYntmaWxsOiNmZmZ9PC9zdHlsZT48cGF0aCBjbGFzcz0iYSIgZD0ibTQwMDAgNDAwMGgtNDAwMHYtNDAwMGg0MDAweiIvPjxwYXRoIGNsYXNzPSJiIiBkPSJtMzI2NSAzMDQ2Ljh2MjY1LjJoLTI1MzB2LTI2NS4yYzAtNDg5IDU2Ni40LTg4NS41IDEyNjUtODg1LjUgNjk4LjYgMCAxMjY1IDM5Ni41IDEyNjUgODg1LjV6Ii8+PHBhdGggY2xhc3M9ImIiIGQ9Im0yNjI0LjEgMTMxMi4xYzAgMzQ0LjYtMjc5LjQgNjI0LTYyNC4xIDYyNC0zNDQuNyAwLTYyNC4xLTI3OS40LTYyNC4xLTYyNCAwLTM0NC43IDI3OS40LTYyNC4xIDYyNC4xLTYyNC4xIDM0NC43IDAgNjI0LjEgMjc5LjQgNjI0LjEgNjI0LjF6Ii8+PC9zdmc+",C=(m,i)=>parseFloat(m).toFixed(i);var g=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m),n=p(0),x=p(0),T=()=>{k.post("/dropshipping/cart/validation/order",{paymentType:n.value}).then(m=>{m.status==200?document.location.href="/shippings/order/clients/"+m.data.num_commande:Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'enregistrement de votre commande, veuillez ressayer !"})})},M=(m,i)=>{i==2&&document.getElementById("paymentCB").getElementsByTagName("form").length===0&&k.post("/dropshipping/cart/payment/cb",{paymentType:n.value}).then(t=>{if(t.status==200)if(t.data.statut){var r=document.getElementById("bouttonPaiement");document.getElementById("paymentCB").innerHTML=t.data.formpay,document.getElementById("submitPayButton").appendChild(r)}else Toast.fire({icon:"error",title:t.data.msg});else Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la g\xE9n\xE9ration du formulaire de paiement, veuillez ressayer !"})})},D=m=>{m.target.checked?x.value=!0:x.value=!1};return(m,i)=>(d(),c(y,null,[l(s(F),{title:"Validation - Panier"}),e("section",W,[e("div",q,[e("div",X,[l(Q,{hrefEtape:s(E),etape:3,nbEtape:3,listeEtape:s(Y)},null,8,["hrefEtape","listeEtape"])]),e("div",K,[ee,e("div",se,[e("div",te,[oe,e("div",ae,[e("div",le,[e("span",ie,"Quantiter : "+o(s(u).produits_total)+" pcs",1),ne]),e("div",re,[e("span",de,"M\xB2 : "+o(s(u).total_m2)+" m\xB2",1),ce]),e("div",me,[e("span",pe,"Prix HT : "+o(s(g)(s(u).total_HT)),1),_e]),e("div",ue,[e("span",xe,"Prix TVA : "+o(s(g)(s(u).total_taxe)),1),ge]),e("div",he,[e("span",fe,"Prix TTC : "+o(s(g)(s(u).total_ttc)),1)])])]),e("div",ye,[(d(!0),c(y,null,L(s(N),(t,r)=>(d(),c("div",{key:r,class:"my-2"},[e("div",ve,[e("div",be,[e("h2",we,o(t.client.ref_externe)+" - "+o(t.client.prenom+" "+t.client.nom),1)]),e("div",je,[e("img",{src:V,alt:"Logo client",class:"w-12 h-12 rounded-full mr-4"}),e("div",null,[e("p",Ie,o(t.client.nom_adresse),1),e("p",Ne,o(t.client.adresse1)+", "+o(t.client.adresse2!=""&&t.client.adresse2!=null?t.client.adresse2+",":"")+" "+o(t.client.adresse3!=""&&t.client.adresse3!=null?t.client.adresse3+",":"")+" "+o(t.client.code_postal)+" "+o(t.client.ville)+", "+o(t.client.pays),1)])]),Ce,e("div",null,[t.produits!=null?(d(),c("div",Te,[t.produits.length>0?(d(!0),c(y,{key:0},L(t.produits,(a,H)=>(d(),c("div",{key:H,class:"2xl:col-span-1 lg:col-span-2 col-span-4 w-full px-2"},[e("div",Me,[e("div",De,[a.photo!=null?(d(),c("div",Le,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+a.photo.img_produit,alt:a.code_sku,class:"w-full h-full object-cover rounded-xl"},null,8,ke)])):(d(),c("div",Pe,Ae))]),e("div",ze,[e("span",Ee,"SKU : "+o(a.code_sku),1),e("span",Ye,"Taille : "+o(a.dimension.largeur+"x"+a.dimension.longueur),1),e("span",Ve,"Prix du M\xB2 : "+o(a.gamme.prix_vente_ht_m2_remise?a.gamme.prix_vente_ht_m2_remise:a.gamme.prix_vente_ht_m2)+" \u20AC HT",1),e("span",He,"M\xB2 : "+o(C(a.dimension.largeur/100*(a.dimension.longueur/100)*a.panier.quantiter,2))+" m\xB2",1),e("span",Se,"Quantiter : "+o(a.panier.quantiter),1),e("span",Fe,"Prix HT : "+o(C(a.dimension.largeur/100*(a.dimension.longueur/100)*a.panier.quantiter*a.gamme.prix_vente_ht_m2_remise?a.gamme.prix_vente_ht_m2_remise:a.gamme.prix_vente_ht_m2,2))+" \u20AC",1)])])]))),128)):(d(),c("div",Ge,Oe))])):v("",!0)]),e("div",Ue,[e("p",Ze,"Total commande HT : "+o(s(g)(t.client.total_ht)),1)])])]))),128))]),e("div",Je,[Re,s(n)==0||!s(x)?(d(),c("div",$e,[l(s(Z),{class:"h-8 w-8 text-yellow-600"}),We])):v("",!0),e("div",qe,[l(s(O),{modelValue:s(n),"onUpdate:modelValue":i[2]||(i[2]=t=>S(n)?n.value=t:n=t)},{default:_(()=>[l(s(J),{class:"sr-only"},{default:_(()=>[j("Type de paiement")]),_:1}),e("div",Xe,[l(s(B),{as:"template",value:"2",onClick:i[0]||(i[0]=t=>s(M)(t,2))},{default:_(({active:t,checked:r})=>[e("div",{class:f([[t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-300":"",r?"bg-blue-900 bg-opacity-75 text-white ":"bg-white "],"relative sm:my-0 my-2 mx-2 w-full sm:max-w-sm max-w-xs flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none"])},[e("div",Ke,[e("div",es,[e("div",ss,[l(s(A),{as:"span",class:f([r?"text-blue-100":"text-gray-500","inline flex items-center"])},{default:_(()=>[l(s(R),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"}),ts]),_:2},1032,["class"])])]),b(e("div",os,[l(s(z),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"})],512),[[w,r]])])],2)]),_:1}),l(s(B),{as:"template",value:"1",onClick:i[1]||(i[1]=t=>s(M)(t,1))},{default:_(({active:t,checked:r})=>[e("div",{class:f([[t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-300":"",r?"bg-blue-900 bg-opacity-75 text-white ":"bg-white "],"relative w-full sm:my-0 my-2 mx-2 sm:max-w-sm max-w-xs flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none"])},[e("div",as,[e("div",ls,[e("div",is,[l(s(A),{as:"span",class:f([r?"text-blue-100":"text-gray-500","inline flex items-center"])},{default:_(()=>[l(s(G),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"}),ns]),_:2},1032,["class"])])]),b(e("div",rs,[l(s(z),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"})],512),[[w,r]])])],2)]),_:1})])]),_:1},8,["modelValue"]),e("div",ds,[e("input",{onClick:i[3]||(i[3]=(...t)=>s(D)&&s(D)(...t)),id:"checkVenteCondition",type:"checkbox",value:"1",class:"w-4 h-4 text-primary-200 bg-gray-100 border-gray-300 rounded focus:ring-primary-200 focus:ring-2 bg-primary-100"}),cs])]),e("div",ms,[b(e("div",ps,[l(U,{disabled:s(n)==0||!s(x),id:"bouttonPaiement"},null,8,["disabled"])],512),[[w,s(n)==2]]),s(n)==1||s(n)==0?(d(),c("div",_s,[e("button",{disabled:s(n)==0||!s(x),onClick:i[4]||(i[4]=(...t)=>s(T)&&s(T)(...t)),type:"button",class:"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},[j("Finaliser la commande "),l(s($),{class:"h-6 w-6 ml-1 group-hover:translate-x-1 group-disabled:translate-x-0 transition-all duration-300",viewBox:"0 0 24 24",fill:"none"})],8,us)])):v("",!0)])])])])])])],64))}});export{Ns as default};
