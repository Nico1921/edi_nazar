import{z as m,P as u,A as O,B as X,o as i,a as o,d as f,u as r,f as e,t as l,k as c,j as $,n as A,h as R,F as x,K as I,H as K,Q as V,O as Q,M as T,W}from"./app.4ddaa9db.js";import{S as J,R as Y,L as Z}from"./Magnify.48fcdbee.js";import{_ as j,C as ee}from"./AuthenticatedLayout.f96130c6.js";import{E as te}from"./MicrosoftExcel.b6076477.js";import{_ as re}from"./ListClients.9dcba856.js";import{_ as se}from"./ModalImportMKP.a4800483.js";import"./LangueChoice.37bf89c9.js";import"./InputError.97ae0743.js";import"./XMarkIcon.caf61533.js";import"./combobox.21112ded.js";import"./transition.a8abbbf8.js";import"./dialog.3e346f9a.js";import"./micro-task.fe338338.js";import"./description.324778bc.js";const ae={class:"container mx-auto mt-5"},ie=e("h1",{class:"font-semibold text-sm lg:text-2xl sm:text-lg text-gray-800 py-2"},"Dropshipping - Gamme",-1),ne={key:0,class:"flex justify-between sm:flex-row flex-col"},oe={key:0,class:"flex items-center px-2"},le={class:"text-lg text-gray-600"},de={key:1,class:"mb-4 px-2"},me={key:1,class:"bg-primary-50 rounded mx-40 mb-5"},ce=e("h2",{class:"text-center text-xl text-primary-300 py-1 bg-primary-100 rounded-t-lg"},"Ajouter au panier via un fichier",-1),pe={class:"p-4 flex flex-col items-center justify-items-center justify-center"},ue=["onSubmit"],_e={class:"block cursor-pointer text-primary-500 bg-primary-200 p-3 rounded-lg",for:"file_Client_Import"},ge={class:"hidden",id:"file_name_span_client"},fe=e("span",{id:"file_name_client"},null,-1),he=e("p",{class:"mt-1 text-sm text-gray-500",id:"file_input_helper"},".XLS,.XLSX",-1),ve={class:"absolute bottom-0 right-0"},xe=["href"],ye=["href"],be={key:0,class:"col-span-1"},we=e("button",{type:"submit",class:"p-3 rounded-lg text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300"},"Importer !",-1),Ie=[we],Te={class:"flex flex-row w-full sm:w-auto sm:flex-grow order-1 sm:order-2 mb-2 sm:mb-0 sm:mr-4"},Ee={class:"relative flex-grow"},Be={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Pe={class:"grid grid-cols-4",id:"gammes"},ke=["href"],Ce={class:"relative group"},Le={key:0,class:"relative w-full h-60"},Ue=["src","alt"],Ae={key:1,class:"relative w-full h-60"},Re=e("span",null,"Pas de photo pour cette gamme !",-1),Ve=[Re],je={class:"absolute bottom-0 z-30 w-full overflow-hidden"},Ne={class:"max-h-0 group-hover:max-h-60 group-hover:p-1 transition-full duration-500 bg-primary-100 text-center flex flex-col bg-opacity-70 text-white"},ze={class:"capitalize"},Fe={class:"flex flex-wrap items-center justify-center text-center px-4 py-2"},Se={class:"capitalize text-center font-semibold"},De={class:"flex justify-center items-center bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Me={class:"w-1/3"},He=Q('<option value="8">8 par page</option><option value="12">12 par page</option><option value="18">18 par page</option><option value="50">50 par page</option><option value="100">100 par page</option>',5),qe=[He],Ge={class:"w-1/3 text-center"},Oe={class:"flex justify-end w-1/3"},Xe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},$e=["href"],Ke={key:0},Qe=e("div",{id:"modalImport"},null,-1),We=e("div",{id:"productClientView"},null,-1),Je={layout:(y,h)=>y(j,()=>child),layout:j},pt=Object.assign(Je,{__name:"Gammes",props:["products","dimensions","produitsAchat"],setup(y){const h=y,N=new URL("/build/assets/Template_Vierge_Drop.fa38da01.xlsx",self.location).href,z=new URL("/build/assets/Template_Model_Drop.c0bac778.xlsx",self.location).href;m(!1);var d=m(h.products),F=m(u().props.value.dynamique_client),E=m(h.produitsAchat.panier),B=m(u().props.value.auth.user[0].client);let _=m(!1);var S=m(u().props.value.session.typeVente),v=m(u().props.value.PanierDrop),g=m(v.value.panier.clientActuel),P=s=>{s.target.value==""?(document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),_.value=!1):(document.getElementById("file_name_client").innerText=s.target.files[0].name,document.getElementById("file_name_span_client").classList.remove("hidden"),_.value=!0)},k=()=>{document.getElementById("file_import_clients").value=null,document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),_.value=!1};const D=()=>{var s=new FormData(document.getElementById("fileClientImport"));T.post("/dropshipping/clients/import",s).then(a=>{if(console.log(a),a.status){document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount();var t=a.data,n=W(se,{isOpen:!0,importMKP:t.importCommandes,reussi:t.valider,erreur:t.erreur,qteFinal:t.qteFinal,m2Final:t.m2Final,prixHT_TT:t.prixHT_TT,prixTVA_TT:t.prixTVA_TT,prixTTC_TT:t.prixTTC_TT,stockInvalide:t.stockInvalide});n.mount(document.getElementById("modalImport"))}else Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'importation de votre fichier, veuillez v\xE9rifier que votre fichier correspond bien \xE0 l'exemple fournis puis ressayer !"})})},b=s=>HtmlEntities.decode(s.toLowerCase()),M=s=>h.dimensions.filter(({id_gamme:a})=>a===s);var p={previous:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",previous_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",next:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",next_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",number:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",number_active:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 bg-gray-100"},C=()=>{const s=new URL(window.location.href);var a=document.getElementById("per_page");s.searchParams.set("perPage",a.value),window.location.href=s.href},H=()=>{const s=new URL(window.location.href);return s.searchParams.get("perPage")!=null?s.searchParams.get("perPage"):12},L=s=>{var a="/orders/clients/products?filter[nom_gamme]="+s.target.value;T.post(encodeURI(a)).then(t=>{if(t.status==200){const n=new URL(window.location.href);n.searchParams.set("filter[nom_gamme]",s.target.value),d.value=t.data.products,window.history.replaceState("","",n.href)}})},q=s=>(Math.round(s*100)/100).toFixed(2),G=s=>{var a=s;return B.value.taux_remise>0&&(a=a-a*(B.value.taux_remise/100)),q(a)};return O(()=>{var s=document.getElementById("per_page");s.value=H();const a=new URL(window.location.href);var t=document.getElementById("searchGamme");t.value=a.searchParams.get("filter[nom_gamme]"),document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount()}),X(()=>{F.value=u().props.value.dynamique_client,v.value=u().props.value.PanierDrop,g.value=v.value.panier.clientActuel,T.get("/dropshipping/panier/view").then(s=>{s.data.produitsAchat!=null&&(s.data.produitsAchat.panier!=null?E.value=s.data.produitsAchat.panier:E.value=[])})}),(s,a)=>(i(),o(x,null,[f(r(K),{title:"Products"}),e("section",ae,[ie,r(g)!=null?(i(),o("div",ne,[r(g).id_client_edi!=null?(i(),o("div",oe,[e("h3",le,"Commande client N\xB0 : "+l(r(g).ref_externe),1)])):c("",!0),r(g).id_client_edi!=null?(i(),o("div",de,[f(re,{data:r(v).panier},null,8,["data"])])):c("",!0)])):c("",!0),r(S)==2?(i(),o("div",me,[ce,e("div",pe,[e("form",{id:"fileClientImport",class:"grid grid-cols-4",onSubmit:$(D,["prevent"])},[e("div",{class:A(r(_)?"relative col-span-3 mx-2":"relative col-span-4 mx-2")},[e("label",_e,[R("Importer mon fichier de commandes "),f(te)]),e("span",ge,[e("button",{type:"button",onClick:a[0]||(a[0]=(...t)=>r(k)&&r(k)(...t))},[f(ee)]),fe]),e("input",{onChange:a[1]||(a[1]=(...t)=>r(P)&&r(P)(...t)),type:"file",class:"hidden",id:"file_Client_Import",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"fileImport"},null,32),he,e("span",ve,[e("a",{href:r(N),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Template vierge",8,xe),R(" / "),e("a",{href:r(z),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Mod\xE8le",8,ye)])],2),r(_)?(i(),o("div",be,Ie)):c("",!0)],40,ue)])])):c("",!0),e("div",Te,[e("div",Ee,[e("input",{class:"block w-full pl-9 text-sm rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",placeholder:"Recherche...",id:"searchGamme",type:"text",name:"global",onInput:a[2]||(a[2]=(...t)=>r(L)&&r(L)(...t))},null,32),e("div",Be,[f(J,{class:"text-xl mb-1"})])])]),e("div",Pe,[(i(!0),o(x,null,I(r(d).data,(t,n)=>(i(),o("a",{key:n,href:"/dropshipping/gamme/"+b(t.nom_gamme),class:"col-span-1 group p-4 hover:scale-110 transition-full duration-300 cursor-pointer"},[e("div",Ce,[t.img_gamme!=null?(i(),o("div",Le,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/gamme/"+t.img_gamme,alt:t.nom_gamme,class:"z-20 rounded relative w-full h-full object-cover"},null,8,Ue)])):(i(),o("div",Ae,Ve)),e("div",je,[e("div",Ne,[e("span",null,"Tapis "+l(t.type_tapis==0?"int\xE9rieur":t.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+l(t.type_poils==1?"court":"long")+" - "+l(t.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",ze,l(b(t.nom_special)),1),e("div",Fe,[(i(!0),o(x,null,I(M(t.id_gamme),(U,w)=>(i(),o("span",{key:w,class:"block text-center w-auto px-1"},l(!Number.isInteger(w/3)&&w!=0?" - ":"")+" "+l(U.largeur)+"x"+l(U.longueur)+"cm ",1))),128))]),e("span",null,"Prix HT m\xB2 : "+l(r(G)(t.prix_vente_ht_m2))+" \u20AC",1)])])]),e("div",null,[e("h2",Se,"Collection "+l(b(t.nom_gamme)),1)])],8,ke))),128))]),e("div",De,[e("div",Me,[e("select",{id:"per_page",name:"per_page",dusk:"per-page-full",onChange:a[3]||(a[3]=(...t)=>r(C)&&r(C)(...t)),class:"mr-5 focus:ring-indigo-500 focus:border-indigo-500 min-w-max shadow-sm text-sm border-gray-300 rounded-md"},qe,32),e("span",null,"Page "+l(r(d).current_page)+" sur "+l(r(d).last_page),1)]),e("span",Ge,l(r(d).total)+" R\xE9sultats",1),e("div",Oe,[e("nav",Xe,[(i(!0),o(x,null,I(r(d).links,(t,n)=>(i(),o("a",{key:n,class:A(n!=0&&n+1!=r(d).links.length?t.active?r(p).number_active:r(p).number:n==0?r(d).current_page==1?r(p).previous_disabled:r(p).previous:r(d).current_page==r(d).last_page?r(p).next_disabled:r(p).next),href:t.url},[n!=0&&n+1!=r(d).links.length?(i(),o("span",Ke,l(t.label),1)):c("",!0),n+1==r(d).links.length?(i(),V(Y,{key:1})):c("",!0),n==0?(i(),V(Z,{key:2})):c("",!0)],10,$e))),128))])])])]),Qe,We],64))}});export{pt as default};
