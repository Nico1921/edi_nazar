import{A as g,J as q,o as r,a as c,d as i,u as s,f as e,t as o,k as p,F as T,q as S,e as u,i as $,w as y,p as b,h as v,H as M,n as h,$ as C}from"./app.97255e9c.js";import{_ as B,d as N,s as z}from"./AuthenticatedLayout.872a0e20.js";import{_ as I}from"./EtapeOrder.604ef844.js";import{y as L,_ as U,r as R,O,g as j,h as V,a as D,b as E}from"./BouttonPaiement.8fde47e9.js";import{r as J}from"./ArrowRightCircleIcon.1b6e47c6.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./label.7ff9aede.js";import"./description.0128158c.js";import"./use-controllable.fa0acec4.js";const Q={class:"container mx-auto mt-5"},G={class:"grid grid-cols-4"},K={class:"col-span-4"},W={class:"col-span-4 xl:mx-16 lg:mx-8"},X=e("h1",{class:"text-center text-3xl text-primary-300"},"Finalisation de la commande",-1),Y={class:"m-5"},Z={class:"grid grid-cols-2"},ee={class:"bg-primary-50 rounded sm:col-span-1 col-span-2 m-2 flex flex-col p-4"},te=e("h2",{class:"text-center font-bold"},"Adresse de livraison",-1),se={key:0},ae={key:1},oe={class:"bg-primary-50 rounded sm:col-span-1 col-span-2 m-2 flex flex-col p-4"},le=e("h2",{class:"text-center font-bold"},"Adresse de facturation",-1),ne={key:0},ie={key:1},re={class:"bg-primary-50 rounded m-2 p-4"},ce=e("h2",{class:"text-center font-bold"},"Total Commande",-1),de={class:"grid 2xl:grid-cols-7 grid-cols-4 justify-center flex-row mt-4 mx-6"},me={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},pe={class:"font-semibold text-gray-600"},ue=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),_e={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},xe={class:"font-semibold text-gray-600"},fe=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),he={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},ge={lass:"font-semibold text-gray-600"},ye=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),be={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},ve={lass:"font-semibold text-gray-600"},we=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),ke={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},Pe={lass:"font-semibold text-gray-600"},Te=e("hr",{class:"absolute sm:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),Ce={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},Be={lass:"font-semibold text-gray-600"},je=e("hr",{class:"absolute lg:block hidden w-px h-5 border border-primary-100 right-0"},null,-1),Ve={class:"2xl:col-span-1 sm:col-span-2 col-span-4 flex justify-center relative"},Ee={lass:"font-semibold text-gray-600"},Fe={class:"grid grid-cols-1 flex items-center justify-center my-4 mx-2"},He=e("h2",{class:"px-5 py-3 bg-primary-50 rounded font-bold text-center"},"Produits",-1),Ae={key:0,class:"grid 2xl:grid-cols-3 lg:grid-cols-4 w-full p-5 h-90 bg-gray-50 xl:max-h-[calc(100vh-550px)] lg:max-h-[calc(100vh-250px)] max-h-screen overflow-auto"},qe={class:"w-full lg:p-4 sm:p-3 p-2 grid bg-gray-100 rounded grid-cols-12 my-2"},Se={class:"xl:col-span-4 lg:col-span-4 sm:col-span-2 xsm:col-span-4 col-span-4 flex items-center justify-center"},$e={key:0,class:"lg:h-[150px] sm:h-[130px] h-full w-full px-2"},Me=["src","alt"],Ne={key:1},ze=e("span",null,"Pas de photo pour ce produit !",-1),Ie=[ze],Le={class:"xl:col-span-8 lg:col-span-8 sm:col-span-10 xsm:col-span-8 col-span-8 flex flex-col xl:text-lg text-sm"},Ue={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Re={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Oe={key:0,class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},De={key:1,class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Je={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Qe={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Ge={class:"text-gray-600 sm:text-sm text-[0.700rem] font-bold"},Ke={class:"bg-gray-100 rounded-b-lg"},We=e("div",{class:"text-center bg-primary-50 rounded-t-lg py-1"},[e("h2",{class:"text-lg font-bold"},"Moyens de paiement")],-1),Xe={key:0,class:"bg-yellow-200 px-4 py-2 rounded flex items-center"},Ye=e("span",{class:"pl-2 text-yellow-600"},"Pour continuer, veuillez s\xE9lectionner votre moyen de paiement et accepter les CGV.",-1),Ze={class:"mx-auto w-full my-4"},et={class:"flex sm:flex-row flex-col w-full sm:justify-evenly justify-center items-center"},tt={class:"flex w-full items-center justify-between"},st={class:"flex items-center"},at={class:"text-sm"},ot=e("span",{class:"ml-2"}," Carte Bancaire",-1),lt={class:"shrink-0 text-white"},nt={class:"flex w-full items-center justify-between"},it={class:"flex items-center"},rt={class:"text-sm"},ct=e("span",{class:"ml-2"}," Virement Bancaire",-1),dt={class:"shrink-0 text-white"},mt={class:"flex items-center my-6 mx-auto max-w-sm"},pt=e("label",{for:"checkVenteCondition",class:"ml-2 sm:text-lg text-sm font-medium text-gray-900"},[v("J'accepte les "),e("a",{href:"/cgv",class:"text-gray-400 underline hover:text-[1.15rem] cursor-pointer transition-all duration-300"},"conditions g\xE9n\xE9rales de vente")],-1),ut={class:"py-2"},_t={id:"paymentCB",class:"flex items-center justify-center mb-5"},xt={key:0,class:"flex justify-center mb-5"},ft=["disabled"],ht={layout:(f,a)=>f(B,()=>child),layout:B},Bt=Object.assign(ht,{__name:"Validation",props:["client","panier","produits"],setup(f){const a=f;g(q().props.value.auth.user[0].client);var F=["Panier","Adresse Livraison / Facturation","Finaliser commande"],H=["/cart","/cart/adresses","/cart/validation"];const A=(m,l)=>parseFloat(m).toFixed(l);var _=g(0),d=g(0),w=()=>{const m=document.querySelectorAll(".btnProcess");for(let l=0;l<m.length;l++)m[l].classList.add("opacity-25"),m[l].setAttribute("disabled","disabled");C.post("/cart/validation/order",{paymentType:d.value}).then(l=>{if(l.status==200)document.location.href="/shippings/order/clients/"+l.data.num_commande;else{Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'enregistrement de votre commande, veuillez ressayer !"});const t=document.querySelectorAll(".btnProcess");for(let n=0;n<t.length;n++)t[n].classList.remove("opacity-25"),t[n].removeAttribute("disabled")}})},k=(m,l)=>{l==2&&document.getElementById("paymentCB").getElementsByTagName("form").length===0&&C.post("/cart/payment/cb",{paymentType:d.value}).then(t=>{if(t.status==200)if(t.data.statut){var n=document.getElementById("bouttonPaiement");document.getElementById("paymentCB").innerHTML=t.data.formpay,document.getElementById("submitPayButton").appendChild(n)}else Toast.fire({icon:"error",title:t.data.msg});else Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la g\xE9n\xE9ration du formulaire de paiement, veuillez ressayer !"})})},P=m=>{m.target.checked?_.value=!0:_.value=!1},x=m=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(m);return(m,l)=>(r(),c(T,null,[i(s(M),{title:"Validation - Panier"}),e("section",Q,[e("div",G,[e("div",K,[i(I,{hrefEtape:s(H),etape:3,nbEtape:3,listeEtape:s(F)},null,8,["hrefEtape","listeEtape"])]),e("div",W,[X,e("div",Y,[e("div",Z,[e("div",ee,[te,e("span",null,o(a.client.nom_adresse)+",",1),e("span",null,o(a.client.adresse1)+",",1),a.client.adresse2!=""&&a.client.adresse2!=null?(r(),c("span",se,o(a.client.adresse2)+",",1)):p("",!0),a.client.adresse3!=""&&a.client.adresse3!=null?(r(),c("span",ae,o(a.client.adresse3)+",",1)):p("",!0),e("span",null,o(a.client.code_postal+", "+a.client.ville)+",",1),e("span",null,o(a.client.pays),1)]),e("div",oe,[le,e("span",null,o(a.client.nom_adresse_facturation)+",",1),e("span",null,o(a.client.adresse1_facturation)+",",1),a.client.adresse2_facturation!=""&&a.client.adresse2_facturation!=null?(r(),c("span",ne,o(a.client.adresse2_facturation)+",",1)):p("",!0),a.client.adresse3_facturation!=""&&a.client.adresse3_facturation!=null?(r(),c("span",ie,o(a.client.adresse3_facturation)+",",1)):p("",!0),e("span",null,o(a.client.code_postal_facturation+", "+a.client.ville_facturation)+",",1),e("span",null,o(a.client.pays_facturation),1)])]),e("div",re,[ce,e("div",de,[e("div",me,[e("span",pe,"Quantit\xE9 : "+o(a.panier.produits_total)+" pcs",1),ue]),e("div",_e,[e("span",xe,"M\xB2 : "+o(a.panier.total_m2)+" m\xB2",1),fe]),e("div",he,[e("span",ge,"Montant HT : "+o(s(x)(a.panier.montant_ht)),1),ye]),e("div",be,[e("span",ve,"Transport HT : "+o(s(x)(a.panier.prix_transport)),1),we]),e("div",ke,[e("span",Pe,"Prix HT : "+o(s(x)(a.panier.total_HT)),1),Te]),e("div",Ce,[e("span",Be,"Prix TVA : "+o(s(x)(a.panier.total_taxe)),1),je]),e("div",Ve,[e("span",Ee,"Prix TTC : "+o(s(x)(a.panier.total_ttc)),1)])])]),e("div",Fe,[He,f.produits!=null?(r(),c("div",Ae,[(r(!0),c(T,null,S(a.produits.panier,(t,n)=>(r(),c("div",{key:n,class:"2xl:col-span-1 lg:col-span-2 col-span-4 w-full px-2"},[e("div",qe,[e("div",Se,[t.photo!=null?(r(),c("div",$e,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+s(N)(t.photo.img_produit),alt:t.code_sku,class:"w-full h-full object-cover rounded-xl"},null,8,Me)])):(r(),c("div",Ne,Ie))]),e("div",Le,[e("span",Ue,"SKU : "+o(t.code_sku),1),e("span",Re,"Taille : "+o(t.dimension.largeur+"x"+t.dimension.longueur),1),t.isPrixPieceSpecifique?(r(),c("span",Oe,"Prix par pi\xE8ce : "+o(t.prixPieceSpecifique)+" \u20AC HT",1)):(r(),c("span",De,"Prix du M\xB2 : "+o(t.gamme.prix_vente_ht_m2_remise)+" \u20AC HT",1)),e("span",Je,"M\xB2 : "+o(A(t.dimension.largeur/100*(t.dimension.longueur/100)*t.panier.quantiter,2))+" m\xB2",1),e("span",Qe,"Quantit\xE9 : "+o(t.panier.quantiter),1),e("span",Ge,"Prix HT : "+o(t.panier.prix_ht_total)+" \u20AC",1)])])]))),128))])):p("",!0)]),e("div",Ke,[We,s(d)==0||!s(_)?(r(),c("div",Xe,[i(s(R),{class:"h-8 w-8 text-yellow-600"}),Ye])):p("",!0),e("div",Ze,[i(s(L),{modelValue:s(d),"onUpdate:modelValue":l[2]||(l[2]=t=>$(d)?d.value=t:d=t)},{default:u(()=>[i(s(O),{class:"sr-only"},{default:u(()=>[v("Type de paiement")]),_:1}),e("div",et,[i(s(j),{as:"template",value:"2",onClick:l[0]||(l[0]=t=>s(k)(t,2))},{default:u(({active:t,checked:n})=>[e("div",{class:h([[t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-300":"",n?"bg-blue-900 bg-opacity-75 text-white ":"bg-white "],"relative sm:my-0 my-2 mx-2 w-full sm:max-w-sm max-w-xs flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none"])},[e("div",tt,[e("div",st,[e("div",at,[i(s(V),{as:"span",class:h([n?"text-blue-100":"text-gray-500","inline flex items-center"])},{default:u(()=>[i(s(D),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"}),ot]),_:2},1032,["class"])])]),y(e("div",lt,[i(s(E),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"})],512),[[b,n]])])],2)]),_:1}),i(s(j),{as:"template",value:"1",onClick:l[1]||(l[1]=t=>s(k)(t,1))},{default:u(({active:t,checked:n})=>[e("div",{class:h([[t?"ring-2 ring-white ring-opacity-60 ring-offset-2 ring-offset-blue-300":"",n?"bg-blue-900 bg-opacity-75 text-white ":"bg-white "],"relative w-full sm:my-0 my-2 mx-2 sm:max-w-sm max-w-xs flex cursor-pointer rounded-lg px-5 py-4 shadow-md focus:outline-none"])},[e("div",nt,[e("div",it,[e("div",rt,[i(s(V),{as:"span",class:h([n?"text-blue-100":"text-gray-500","inline flex items-center"])},{default:u(()=>[i(s(z),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"}),ct]),_:2},1032,["class"])])]),y(e("div",dt,[i(s(E),{class:"h-6 w-6",viewBox:"0 0 24 24",fill:"none"})],512),[[b,n]])])],2)]),_:1})])]),_:1},8,["modelValue"])]),e("div",mt,[e("input",{onClick:l[3]||(l[3]=(...t)=>s(P)&&s(P)(...t)),id:"checkVenteCondition",type:"checkbox",value:"1",class:"w-4 h-4 text-primary-200 bg-gray-100 border-gray-300 rounded focus:ring-primary-200 focus:ring-2 bg-primary-100"}),pt]),e("div",ut,[y(e("div",_t,[i(U,{disabled:s(d)==0||!s(_),id:"bouttonPaiement"},null,8,["disabled"])],512),[[b,s(d)==2]]),s(d)==1||s(d)==0?(r(),c("div",xt,[e("button",{disabled:s(d)==0||!s(_),onClick:l[4]||(l[4]=(...t)=>s(w)&&s(w)(...t)),type:"button",class:"btnProcess py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"},[v("Finaliser la commande "),i(s(J),{class:"h-6 w-6 ml-1 group-hover:translate-x-1 group-disabled:translate-x-0 transition-all duration-300",viewBox:"0 0 24 24",fill:"none"})],8,ft)])):p("",!0)])])])])])])],64))}});export{Bt as default};
