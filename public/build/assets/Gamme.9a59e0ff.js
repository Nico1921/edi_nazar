import{o,a as l,f as e,t as c,k as j,m as J,A as g,I as K,b as q,B as Z,C as W,d as n,u as t,h as k,F as A,J as T,e as p,H as X,n as Y,K as z,j as ee,w as P,g as V,N as te}from"./app.4117af2d.js";import{E as se}from"./EyeOutline.eae7a085.js";import{_ as M,I as ie}from"./AuthenticatedLayout.7e4d9990.js";import{_ as re}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as ne}from"./Tooltip.c1050314.js";import{r as oe,_ as ae}from"./Breadcrumbs.8f60e3b7.js";import{_ as B}from"./InputError.928bbc11.js";import{r as le}from"./ListBulletIcon.d16c8b96.js";import{f as S,o as C}from"./transition.04b84ca4.js";import{N as $,_ as N,U as E}from"./dialog.f9399a72.js";import"./micro-task.fe338338.js";import"./description.4243067b.js";function de(_,a){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M11.03 3.97a.75.75 0 010 1.06l-6.22 6.22H21a.75.75 0 010 1.5H4.81l6.22 6.22a.75.75 0 11-1.06 1.06l-7.5-7.5a.75.75 0 010-1.06l7.5-7.5a.75.75 0 011.06 0z","clip-rule":"evenodd"})])}function U(_,a){return o(),l("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M2.515 10.674a1.875 1.875 0 000 2.652L8.89 19.7c.352.351.829.549 1.326.549H19.5a3 3 0 003-3V6.75a3 3 0 00-3-3h-9.284c-.497 0-.974.198-1.326.55l-6.375 6.374zM12.53 9.22a.75.75 0 10-1.06 1.06L13.19 12l-1.72 1.72a.75.75 0 101.06 1.06l1.72-1.72 1.72 1.72a.75.75 0 101.06-1.06L15.31 12l1.72-1.72a.75.75 0 10-1.06-1.06l-1.72 1.72-1.72-1.72z","clip-rule":"evenodd"})])}const ue={name:"CartPlusIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ce=["aria-hidden","aria-label"],me=["fill","width","height"],pe={d:"M11,9H13V6H16V4H13V1H11V4H8V6H11M7,18A2,2 0 0,0 5,20A2,2 0 0,0 7,22A2,2 0 0,0 9,20A2,2 0 0,0 7,18M17,18A2,2 0 0,0 15,20A2,2 0 0,0 17,22A2,2 0 0,0 19,20A2,2 0 0,0 17,18M7.17,14.75L7.2,14.63L8.1,13H15.55C16.3,13 16.96,12.59 17.3,11.97L21.16,4.96L19.42,4H19.41L18.31,6L15.55,11H8.53L8.4,10.73L6.16,6L5.21,4L4.27,2H1V4H3L6.6,11.59L5.25,14.04C5.09,14.32 5,14.65 5,15A2,2 0 0,0 7,17H19V15H7.42C7.29,15 7.17,14.89 7.17,14.75Z"},fe={key:0};function _e(_,a,f,b,h,v){return o(),l("span",J(_.$attrs,{"aria-hidden":!f.title,"aria-label":f.title,class:"material-design-icon cart-plus-icon",role:"img",onClick:a[0]||(a[0]=w=>_.$emit("click",w))}),[(o(),l("svg",{fill:f.fillColor,class:"material-design-icon__svg",width:f.size,height:f.size,viewBox:"0 0 24 24"},[e("path",pe,[f.title?(o(),l("title",fe,c(f.title),1)):j("",!0)])],8,me))],16,ce)}const ve=re(ue,[["render",_e]]),xe={class:"container mx-auto"},ge={class:"relative container mx-auto grid grid-cols-12 mb-4"},he={class:"col-span-2 flex items-end"},ye={href:"/order_entrepot/gamme",class:"relative inline-block group"},be=e("span",{class:"inline-block border-b border-black pl-5 group-hover:text-primary-300 group-hover:border-primary-300 transition duration-300"},"Retourner aux gammes",-1),we={class:"flex items-center justify-center col-span-7"},ke={class:"text-6xl font-bold"},Ce={class:"col-span-3 rounded bg-primary-white border border-primary-100 text-center flex flex-col text-primary-300"},je={class:"capitalize"},Ae={class:"sm:w-auto w-full py-2 flex items-center justify-center"},Pe={class:"flex flex-col"},Ve={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Be={class:"inline-block min-w-full py-2 sm:px-6 lg:px-8"},He={class:"min-w-full overflow-hidden border border-primary-200 p-4"},Ie={class:"text-left text-sm font-light"},Le={class:"px-4 py-4"},qe={class:"whitespace-nowrap px-4 py-4"},Te={class:"h-24 w-full mb-2"},ze={key:0,class:"cursor-pointer relative overflow-hidden w-full h-full flex justify-center"},Me={class:"absolute flex items-center justify-center w-full h-full"},Se=["onClick","src","alt"],$e={key:1,class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Ne={class:"text-center w-full"},Ee={class:"font-bold pt-2"},Ue={class:"w-full h-full flex flex-col items-center justify-between"},Fe={class:"w-full font-bold text-center"},Oe={class:"flex items-center justify-center"},Re={key:0,class:"hover:scale-110 transition duration-300"},De=["onClick"],Ge={key:1,class:"text-xl text-white items-center justify-center"},Qe={key:1,class:"bg-red-700 w-[35px] h-[35px] block rounded-full flex items-center justify-center"},Je={key:0},Ke={key:1},Ze={class:"text-center w-full"},We={class:"font-bold"},Xe=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),Ye={class:"fixed inset-0 overflow-y-auto"},et={class:"flex min-h-full items-center justify-center p-4 text-center"},tt=e("span",{id:"nomVisuelImage"},null,-1),st=e("div",{class:"mt-2 h-[40rem] w-full"},[e("img",{id:"visuelImage",class:"w-full h-full object-cover"})],-1),it=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),rt={class:"fixed inset-0 overflow-y-auto"},nt={class:"flex min-h-full items-center justify-center p-4 text-center"},ot={class:"mt-2 flex justify-center items-center"},at={class:"text-sm text-gray-500 w-full"},lt=e("label",{class:"lg:text-lg text-sm",for:"ref"}," Quantiter : ",-1),dt=["max"],ut={key:0,class:"w-full mt-7 ml-5"},ct={class:"mt-4 flex justify-center"},mt=e("button",{type:"submit",class:"mx-10 inline-flex justify-center rounded-md border border border-primary-200 px-4 py-2 text-sm font-medium text-primary-300 hover:scale-110 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 transition duration-300"}," Valider ",-1),pt={layout:(_,a)=>_(M,()=>child),layout:M},Pt=Object.assign(pt,{__name:"Gamme",props:["products","gamme","designpanier"],setup(_){const a=_;var f=[{title:"Accueil",link:"/",icon:oe,active:!1},{title:"Commande Entrep\xF4t",link:"/order_entrepot/gamme",icon:le,active:!1},{title:"Gamme",link:"/order_entrepot/gamme",icon:"",active:!1},{title:a.gamme.nom_gamme,link:"/order_entrepot/gamme/"+a.gamme.nom_gamme,icon:"",active:!0}];const b=g(!1),h=g(!1);g(a.products.data),g(a.products);var v=g(a.designpanier),w=g(K().props.value.auth.user[0].client),x=g(!1),r=q({idProduit:null,quantiter:1,id_panier_edi_list:null,key_tab_1:0,key_tab_2:0}),F=(u,s,i,m)=>{h.value=u,x.value=s,r.idProduit=s.id_produit,r.key_tab_1=i,r.key_tab_2=m,r.quantiter=s.panier.quantiter>0?s.panier.quantiter:1,r.id_panier_edi_list=s.panier.id_panier_edi_list!=null?s.panier.id_panier_edi_list:0};function H(){b.value=!1}function O(u,s,i){b.value=!0;var m=s+" "+i;document.getElementById("visuelImage").setAttribute("src","https://gestion.tapis-nazar.fr/img/produit/"+u),document.getElementById("visuelImage").setAttribute("alt",m),document.getElementById("nomVisuelImage").textContent=m}var R=(u,s)=>{u.preventDefault();var i=r.key_tab_1,m=r.key_tab_2;r.quantiter>0?r.post(route("order_entrepot/panier/add"),{preserveScroll:!0,preserveState:!0,onSuccess:d=>{d.props.session.status?(v.value[i].produits[m].panier.id_panier_edi_list=d.props.session.id_panier_edi_list,v.value[i].produits[m].isInPanier=!0,v.value[i].produits[m].panier.quantiter=r.quantiter,h.value=!1,Toast.fire({icon:"success",title:s?"La quantiter pour ce produit \xE0 bien \xE9t\xE9 modifier":"Le produit \xE0 bien ajouter au panier"})):Toast.fire({icon:"error",title:d.props.session.message})}}):I(r.id_panier_edi_list,i,m)},I=(u,s,i)=>{Swal.fire({title:"Attention",text:"Etes-vous sur de supprimer cette article du panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(m=>{m.isConfirmed&&q({id_panier_edi_list:u}).post(route("order_entrepot/panier/delete"),{preserveScroll:!0,onSuccess:y=>{y.props.session.status?(Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer du panier"}),v.value[s].produits[i].isInPanier=!1,v.value[s].produits[i].panier.quantiter=0,v.value[s].produits[i].panier.id_panier_edi_list=0,h.value=!1):Toast.fire({icon:"error",title:y.props.session.message})}})})},L=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous de vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(u=>{u.isConfirmed&&te.Inertia.post("/cart/empty",{},{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})},D=u=>(Math.round(u*100)/100).toFixed(2),G=u=>{var s=u;return w.value.taux_remise>0&&(s=s-s*(w.value.taux_remise/100)),D(s)},Q=u=>new Intl.NumberFormat("fr-FR",{style:"currency",currency:"EUR"}).format(u);return Z(()=>{}),W(()=>{}),(u,s)=>(o(),l(A,null,[n(t(X),{title:"Products"}),e("section",xe,[n(ae,{links:t(f)},null,8,["links"]),e("section",ge,[e("div",he,[e("a",ye,[n(t(de),{class:"h-4 w-4 absolute left-0 bottom-1/4 top-1/4 text-black group-hover:text-primary-300 transition duration-300"}),be])]),e("div",we,[e("h1",ke,c(a.gamme.nom_gamme),1)]),e("div",Ce,[e("span",null,"Tapis "+c(a.gamme.type_tapis==0?"int\xE9rieur":a.gamme.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+c(a.gamme.type_poils==1?"court":"long")+" - "+c(a.gamme.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",je,c(a.gamme.nom_special),1),e("span",null,"Prix HT m\xB2 : "+c(t(G)(a.gamme.prix_vente_ht_m2))+" \u20AC",1),e("div",Ae,[e("button",{type:"button",onClick:s[0]||(s[0]=(...i)=>t(L)&&t(L)(...i)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[n(t(U),{class:"w-5 h-5 mr-2"}),k("Vider mon panier")])])])]),e("div",Pe,[e("div",Ve,[e("div",Be,[e("div",He,[(o(!0),l(A,null,T(t(v),(i,m)=>(o(),l("div",{class:"border-b border-primary-200 min-w-full",key:m},[e("table",Ie,[e("tbody",null,[e("tr",Le,[e("td",qe,[e("div",Te,[i.img_produit!=null?(o(),l("div",ze,[e("div",Me,[n(se,{class:"text-lg text-black"})]),e("img",{onClick:d=>O(i.img_produit,a.gamme.nom_gamme,i.nom_design),src:"https://gestion.tapis-nazar.fr/img/produit/"+i.img_produit,alt:i.code_sku,class:"z-20 relative hover:opacity-50 transition duration-300 w-full h-full object-contain"},null,8,Se)])):(o(),l("div",$e,[n(ie)]))]),e("div",Ne,[e("span",Ee,c(i.nom_design),1)])]),(o(!0),l(A,null,T(i.produits,(d,y)=>(o(),l("td",{key:y,class:"whitespace-nowrap px-4 py-4 h-24 table-cell align-middle"},[e("div",Ue,[e("div",Fe,c(d.largeur)+"x"+c(d.longueur),1),e("div",Oe,[n(ne,null,{header:p(()=>[d.stock_restant>0?(o(),l("div",Re,[e("button",{onClick:ft=>t(F)(!0,d,m,y),class:Y([d.stock_restant>10?"bg-green-700":d.stock_restant>0?"bg-orange-400 ":"bg-red-700","w-[35px] h-[35px] block rounded-full flex items-center justify-center"])},[d.isInPanier?(o(),l("span",Ge,c(d.panier.quantiter),1)):(o(),z(ve,{key:0,class:"text-xl text-white items-center justify-center"}))],10,De)])):(o(),l("span",Qe))]),body:p(()=>[d.stock_restant>0?(o(),l("span",Je,c(d.isInPanier?"Modifier quantiter":"Ajouter au")+" panier",1)):(o(),l("span",Ke," Rupture de stock "))]),_:2},1024)]),e("div",Ze,[e("span",We,c(t(Q)(d.prixProduit))+" HT",1)])])]))),128))])])])]))),128))])])])])]),n(t(S),{show:b.value,as:"template",unmount:!1},{default:p(()=>[n(t($),{as:"div",onClose:H,class:"relative z-30",unmount:!1},{default:p(()=>[n(t(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[Xe]),_:1}),e("div",Ye,[e("div",et,[n(t(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[n(t(N),{class:"w-full max-w-md transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all",unmount:!1},{default:p(()=>[n(t(E),{unmount:!1,as:"h3",class:"text-lg font-medium leading-6 text-gray-900"},{default:p(()=>[k(" Visuel image "),tt]),_:1}),st,e("div",{class:"flex flex-row-reverse"},[e("button",{type:"button",class:"mt-4 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300",onClick:H},"Fermer")])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),n(t(S),{appear:"",show:h.value,as:"template",unmount:!1},{default:p(()=>[n(t($),{as:"div",class:"relative z-50"},{default:p(()=>[n(t(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:p(()=>[it]),_:1}),e("div",rt,[e("div",nt,[n(t(C),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:p(()=>[n(t(N),{class:"w-full border-[5px] border-primary-200 max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:p(()=>[t(x)!=!1?(o(),z(t(E),{key:0,as:"h3",class:"lg:text-lg text-sm text-center font-medium leading-6 text-gray-900"},{default:p(()=>[k(c(t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0?"Modifier Quantiter":"Ajouter ")+" produit "+c(t(x).sku),1)]),_:1})):j("",!0),t(x)!=!1?(o(),l("form",{key:1,onSubmit:s[6]||(s[6]=ee(i=>t(R)(i,t(r).id_panier_edi_list!=null&&t(r).id_panier_edi_list!=0),["prevent"]))},[P(e("input",{type:"hidden",name:"id_produit",id:"id_produit","onUpdate:modelValue":s[1]||(s[1]=i=>t(r).idProduit=i)},null,512),[[V,t(r).idProduit]]),P(e("input",{type:"hidden",name:"id_panier_edi_list",id:"id_panier_edi_list","onUpdate:modelValue":s[2]||(s[2]=i=>t(r).id_panier_edi_list=i)},null,512),[[V,t(r).id_panier_edi_list]]),e("div",ot,[e("div",at,[lt,P(e("input",{"onUpdate:modelValue":s[3]||(s[3]=i=>t(r).quantiter=i),class:"w-full lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"quantiter",type:"number",min:"0",max:t(x).stock_restant,name:"quantiter",placeholder:"Saisissez la quantiter pour la commande"},null,8,dt),[[V,t(r).quantiter]]),n(B,{class:"mt-2",message:t(r).errors.quantiter},null,8,["message"]),n(B,{class:"mt-2",message:t(r).errors.idProduit},null,8,["message"]),n(B,{class:"mt-2",message:t(r).errors.id_panier_edi_list},null,8,["message"])]),t(x).isInPanier?(o(),l("div",ut,[e("button",{type:"button",onClick:s[4]||(s[4]=i=>t(I)(t(x).panier.id_panier_edi_list,t(r).key_tab_1,t(r).key_tab_2)),class:"w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[n(t(U),{class:"w-5 h-5 mr-2"}),k("Suprimmer le produit du panier ")])])):j("",!0)]),e("div",ct,[e("button",{onClick:s[5]||(s[5]=i=>{h.value=!1}),type:"button",class:"mx-10 inline-flex justify-center rounded-md border border-transparent hover:border-red-100 px-4 py-2 text-sm font-medium text-red-900 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Annuler "),mt])],32)):j("",!0)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])],64))}});export{Pt as default};
