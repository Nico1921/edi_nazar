import{o as l,a as d,f as e,t as p,k as C,m as se,A as g,I as N,b as R,c as ie,P as ne,C as oe,d as n,e as r,u as t,i as M,F as I,J as G,K as J,n as P,j as D,h as c,w as le,g as ae,N as K,V as re}from"./app.e7639150.js";import{_ as de}from"./_plugin-vue_export-helper.cdc0426e.js";import{_ as ce}from"./InputError.87eab33e.js";import{a as ue,r as fe}from"./XMarkIcon.707755f4.js";import{B as pe,L as me,j as _e,H as ve,A as ge}from"./combobox.91a025b8.js";import{f as H,o as S}from"./transition.63759795.js";import{N as Q,_ as Z,U as W}from"./dialog.9c3af36c.js";function xe(v,x){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}function he(v,x){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})])}function F(v,x){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M10.75 4.75a.75.75 0 00-1.5 0v4.5h-4.5a.75.75 0 000 1.5h4.5v4.5a.75.75 0 001.5 0v-4.5h4.5a.75.75 0 000-1.5h-4.5v-4.5z"})])}function O(v,x){return l(),d("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M8.75 1A2.75 2.75 0 006 3.75v.443c-.795.077-1.584.176-2.365.298a.75.75 0 10.23 1.482l.149-.022.841 10.518A2.75 2.75 0 007.596 19h4.807a2.75 2.75 0 002.742-2.53l.841-10.52.149.023a.75.75 0 00.23-1.482A41.03 41.03 0 0014 4.193V3.75A2.75 2.75 0 0011.25 1h-2.5zM10 4c.84 0 1.673.025 2.5.075V3.75c0-.69-.56-1.25-1.25-1.25h-2.5c-.69 0-1.25.56-1.25 1.25v.325C8.327 4.025 9.16 4 10 4zM8.58 7.72a.75.75 0 00-1.5.06l.3 7.5a.75.75 0 101.5-.06l-.3-7.5zm4.34.06a.75.75 0 10-1.5-.06l-.3 7.5a.75.75 0 101.5.06l.3-7.5z","clip-rule":"evenodd"})])}const be={name:"PackageIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},ye=["aria-hidden","aria-label"],we=["fill","width","height"],Ce={d:"M5.12,5H18.87L17.93,4H5.93L5.12,5M20.54,5.23C20.83,5.57 21,6 21,6.5V19A2,2 0 0,1 19,21H5A2,2 0 0,1 3,19V6.5C3,6 3.17,5.57 3.46,5.23L4.84,3.55C5.12,3.21 5.53,3 6,3H18C18.47,3 18.88,3.21 19.15,3.55L20.54,5.23M6,18H12V15H6V18Z"},ke={key:0};function ze(v,x,a,U,m,_){return l(),d("span",se(v.$attrs,{"aria-hidden":!a.title,"aria-label":a.title,class:"material-design-icon package-icon",role:"img",onClick:x[0]||(x[0]=L=>v.$emit("click",L))}),[(l(),d("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[e("path",Ce,[a.title?(l(),d("title",ke,p(a.title),1)):C("",!0)])],8,we))],16,ye)}const Ae=de(be,[["render",ze]]),Be={class:"relative mt-1"},Ve={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},je={class:"absolute inset-y-0 left-0 flex items-center pr-2 pb-1 pl-1"},Me={class:"absolute rounded-md bg-white pt-1 shadow-lg w-full mt-1"},Se={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},Le=["onClick"],Te={class:"absolute inset-y-0 right-0 flex items-center pr-1"},$e=["onClick"],Ne={class:"rounded-full bg-blue-200 hover:bg-blue-400 text-blue-500 hover:text-blue-700 transition duration-300 p-1 block"},Ie=["onClick"],Pe={class:"rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 transition duration-300 p-1 block"},De={class:"text-center"},He={class:"w-full flex items-center justify-center"},Fe={class:"w-full flex items-center justify-center"},Oe=e("div",{class:"fixed inset-0 bg-black bg-opacity-25 z-[50]"},null,-1),Ue={class:"fixed inset-0 overflow-y-auto z-[60]"},qe={class:"flex min-h-full items-center justify-center p-4 text-center"},Ee={class:"absolute right-0 top-0"},Re={class:"mt-2 grid grid-cols-2"},Ge=["onClick"],Je={class:"col-span-1 flex items-center justify-center"},Ke={key:0,class:"lg:w-[45px] lg:h-[75px] sm:w-[60px] sm:h-[90px] w-[70px] h-[100px]"},Qe=["src","alt"],Ze={key:1,class:"h-full w-full py-2 px-1"},We={class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Xe={class:"flex flex-col col-span-3"},Ye={class:"my-1 text-sm rounded-xl bg-gray-200"},et=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Gamme",-1),tt={class:"my-1 text-sm rounded-xl bg-gray-200"},st=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Design",-1),it={class:"my-1 text-sm rounded-xl bg-gray-200"},nt=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Couleur",-1),ot={class:"my-1 text-sm rounded-xl bg-gray-200"},lt=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Dimension",-1),at={class:"my-1 text-sm rounded-xl bg-gray-200"},rt=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Quantiter",-1),dt={class:"my-1 text-sm rounded-xl bg-gray-200"},ct=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Prix unitaire",-1),ut={class:"mt-4"},ft=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),pt={class:"fixed inset-0 overflow-y-auto"},mt={class:"flex min-h-full items-center justify-center p-4 text-center"},_t=e("input",{type:"hidden",name:"id_produit_modal",id:"id_produit_modal"},null,-1),vt=e("input",{type:"hidden",name:"key_tab_modal",id:"key_tab_modal"},null,-1),gt=e("input",{type:"hidden",name:"qte_modal",id:"qte_modal"},null,-1),xt={class:"mt-2"},ht={class:"text-sm text-gray-500"},bt=e("label",{class:"lg:text-lg text-sm",for:"ref"}," R\xE9f\xE9rence : ",-1),yt={class:"mt-4 flex flex-row-reverse"},wt=e("button",{type:"submit",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-green-100 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2 transition duration-300"}," Valider ",-1),Ct={class:"fixed bottom-10 right-10 z-[50] overflow-hidden"},kt=e("span",{class:"translate-x-full group-hover:relative absolute group-hover:translate-x-0 transition-all ease-in-out duration-100"},"Ajouter commande client",-1),Lt={__name:"ListClients",props:["data"],setup(v){var a=g(v.data),U=a.value.id_panier_edi,m=g(a.value.clients),_=g(),L=g(N().props.value.session.typeVente),h=m.value.findIndex(o=>o.client.id_client_edi==a.value.clientActuel.id_client_edi),b=g(m.value[h!=-1?h:0]);let u=g("");var y=g(!1),k=o=>{y.value=o},z=R({ref_externe:""});let T=ie(()=>u.value===""?m.value:m.value.filter(o=>o.client.ref_externe.toLowerCase().includes(u.value.toLowerCase())));const $=g(!1);function A(){$.value=!1}function X(o,i){o.preventDefault(),$.value=!0,_.value=i}var Y=o=>{Swal.fire({title:"Attention",text:"Etes-vous de supprimer cette article de la commande ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(i=>{i.isConfirmed&&R({id_panier_edi_list:o}).post("/dropshipping/panier/delete",{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le produit \xE0 bien \xE9t\xE9 supprimer de la commande"}):Toast.fire({icon:"error",title:"Une erreur c'est produit lors de la supression du produit de la commande"})}})})},ee=(o,i,f)=>{o.preventDefault(),Swal.fire({title:"Attention",text:"Etes-vous sur de supprimer la commande client "+f+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(s=>{s.isConfirmed&&K.Inertia.post("/dropshipping/clients/delete",{id_client_edi:i,id_panier_edi:U},{onSuccess:w=>{w.props.session.status==!0?Toast.fire({icon:"success",title:"La commande client "+f+" \xE0 bien \xE9t\xE9 suprimmer !"}):Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la supression de la commande client"+f+", veuillez ressayer !"})}})})},te=o=>(Math.round(o*100)/100).toFixed(2),q=o=>{new FormData(o.target),z.post("/dropshipping/clients/add",{preserveScroll:!0,preserveState:!0,onSuccess:i=>{i.props.session.statut?(k(!1),Toast.fire({icon:"success",title:"La commande a \xE9t\xE9 ajouter avec succ\xE8s"})):Toast.fire({icon:"error",title:i.props.session.msg})}})},E=(o,i=!1)=>{K.Inertia.post("/dropshipping/clients/edit",{id_client_edi:o},{preserveScroll:!0,preserveState:!0,onSuccess:f=>{f.props.session.status?(k(!1),i&&A(),Toast.fire({icon:"info",title:"La commande "+a.value.clientActuel.ref_externe+" a \xE9t\xE9 s\xE9lectionner !"})):Toast.fire({icon:"error",title:"Une erreur est survenue, essayer d'actualiser la page."})}})};return ne(a,()=>{m.value!=null&&(h=m.value.findIndex(o=>o.client.id_client_edi==a.value.clientActuel.id_client_edi),b.value=m.value[h!=-1?h:0])}),oe(()=>{if(a.value=N().props.value.PanierDrop.panier,m.value=a.value.clients,_.value!=null){var o=N().props.value.PanierDrop.panier.clients,i=o.findIndex(f=>f.client.id_client_edi==_.value.client.id_client_edi);i!=-1&&(_.value=o[i])}}),(o,i)=>{const f=re("ImageOff");return l(),d(I,null,[n(t(ge),{modelValue:t(b),"onUpdate:modelValue":i[3]||(i[3]=s=>M(b)?b.value=s:b=s),class:"z-40"},{default:r(()=>[e("div",Be,[e("div",Ve,[e("div",je,[n(Ae,{class:"text-lg text-gray-400","aria-hidden":"true"})]),n(t(pe),{class:"w-full border-none py-2 pl-6 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:s=>s.client.ref_externe,onChange:i[0]||(i[0]=s=>M(u)?u.value=s.target.value:u=s.target.value)},null,8,["displayValue"]),n(t(me),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:r(()=>[n(t(xe),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),n(t(H),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:i[2]||(i[2]=s=>M(u)?u.value="":u="")},{default:r(()=>[e("div",Me,[n(t(_e),{class:"max-h-36 w-full overflow-auto text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:r(()=>[t(T).length===0&&t(u)!==""?(l(),d("div",Se," Aucun r\xE9sultat ")):C("",!0),(l(!0),d(I,null,G(t(T),(s,w)=>(l(),J(t(ve),{as:"template",key:w,value:s},{default:r(({selected:B,active:V})=>[e("li",{onClick:j=>t(E)(s.client.id_client_edi),class:P(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-emerald-500 text-white":V,"text-primary-400":!V}])},[B?(l(),d("span",{key:0,class:P(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":V,"text-teal-400":!V}])},[n(t(ue),{class:"h-5 w-5","aria-hidden":"true"})],2)):C("",!0),e("span",{class:P(["block truncate pr-14",{"font-medium":B,"font-normal":!B}])},p(s.client.ref_externe),3),e("div",Te,[e("button",{onClick:D(j=>X(j,s),["stop"]),class:"w-full h-full px-2"},[e("span",Ne,[n(t(he),{class:"h-4 w-4"})])],8,$e),e("button",{onClick:D(j=>t(ee)(j,s.client.id_client_edi,s.client.ref_externe),["stop"]),class:"w-full h-full px-2"},[e("span",Pe,[n(t(O),{class:"h-4 w-4"})])],8,Ie)])],10,Le)]),_:2},1032,["value"]))),128))]),_:1}),e("div",De,[e("button",{onClick:i[1]||(i[1]=s=>t(k)(!0)),class:"py-2 text-sm overflow-hidden hover:bg-green-200 hover:text-green-600 w-full rounded-md transition duration-300"},[e("span",He,[n(t(F),{class:"w-5 h-5","aria-hidden":"true"}),c("Ajouter commande clients")]),e("span",Fe,p(t(T).length===0?t(u):""),1)])])])]),_:1})])]),_:1},8,["modelValue"]),n(t(H),{appear:"",show:$.value,as:"template"},{default:r(()=>[n(t(Q),{as:"div",onClose:A,class:"relative z-[60]"},{default:r(()=>[n(t(S),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:r(()=>[Oe]),_:1}),e("div",Ue,[e("div",qe,[n(t(S),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:r(()=>[n(t(Z),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:r(()=>[n(t(W),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 relative"},{default:r(()=>[c(" Commande Client N\xB0 : "+p(t(_).client.ref_externe)+" ",1),e("div",Ee,[e("button",{onClick:A,class:"rounded-full p-1 hover:bg-red-200 hover:text-red-400 transition duration-300"},[n(t(fe),{class:"w-4 h-4"})])])]),_:1}),e("div",Re,[(l(!0),d(I,null,G(t(_).produits,(s,w)=>(l(),d("div",{key:w,class:"sm:col-span-1 col-span-2 grid grid-cols-4 bg-gray-100 p-1 m-2 relative rounded-xl"},[e("button",{onClick:B=>t(Y)(s.panier.id_panier_edi_list),class:"absolute left-2 top-2 rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 p-1 transition duration-300",type:"button"},[n(t(O),{class:"w-4 h-4"})],8,Ge),e("div",Je,[s.photo!=null&&s.photo.img_produit!=null?(l(),d("div",Ke,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+s.photo.img_produit,alt:s.code_sku,class:"w-full h-full object-cover"},null,8,Qe)])):(l(),d("div",Ze,[e("div",We,[n(f)])]))]),e("div",Xe,[e("span",Ye,[et,c(" "+p(s.gamme.nom_gamme),1)]),e("span",tt,[st,c(" "+p(s.design.nom_design),1)]),e("span",it,[nt,c(" "+p(s.couleur.nom_couleur),1)]),e("span",ot,[lt,c(" "+p(s.dimension.largeur+"x"+s.dimension.longueur)+"cm",1)]),e("span",at,[rt,c(" "+p(s.panier.quantiter),1)]),e("span",dt,[ct,c(" "+p(t(te)(s.prixProduit))+" \u20AC",1)])])]))),128))]),e("div",ut,[t(_).client.id_client_edi!=t(a).clientActuel.id_client_edi?(l(),d("button",{key:0,onClick:i[4]||(i[4]=s=>t(E)(t(_).client.id_client_edi,!0)),type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-green-200 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2"},[n(t(F),{class:"h-4 w-4 text-green-500 mt-0 mr-1"}),c(" Ajouter des produits ")])):C("",!0),e("button",{type:"button",onClick:A,class:"inline-flex justify-center rounded-md border border-transparent bg-red-200 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2"},[n(t(O),{class:"h-4 w-4 text-red-500 mt-0 mr-1"}),c(" Supprimer la commande ")])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),t(L)==2?(l(),J(t(H),{key:0,appear:"",show:t(y),as:"template",unmount:!1},{default:r(()=>[n(t(Q),{as:"div",class:"relative z-50"},{default:r(()=>[n(t(S),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:r(()=>[ft]),_:1}),e("div",pt,[e("div",mt,[n(t(S),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:r(()=>[n(t(Z),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:r(()=>[n(t(W),{as:"h3",class:"lg:text-lg text-sm font-medium leading-6 text-gray-900"},{default:r(()=>[c(" Saisissez la r\xE9f\xE9rence de la commande client. ")]),_:1}),e("form",{onSubmit:i[7]||(i[7]=D((...s)=>t(q)&&t(q)(...s),["prevent"]))},[_t,vt,gt,e("div",xt,[e("div",ht,[bt,le(e("input",{"onUpdate:modelValue":i[5]||(i[5]=s=>t(z).ref_externe=s),class:"lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"ref",type:"text",name:"ref_externe",placeholder:"Saisissez la r\xE9f\xE9rence de la commande"},null,512),[[ae,t(z).ref_externe]]),n(ce,{class:"mt-2",message:t(z).errors.ref_externe},null,8,["message"])])]),e("div",yt,[wt,e("button",{onClick:i[6]||(i[6]=s=>{M(y)?y.value=!1:y=!1}),type:"button",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Fermer ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])):C("",!0),e("div",Ct,[e("button",{onClick:i[8]||(i[8]=s=>t(k)(!0)),class:"group flex items-center justify-center text-white hover:px-4 w-10 hover:w-auto h-10 bg-green-600 rounded-full hover:bg-green-700 active:shadow-lg mouse shadow transition-all ease-in duration-300 focus:outline-none"},[n(t(F),{class:"w-5 h-5 group-hover:mr-1"}),kt])])],64)}}};export{Lt as _};
