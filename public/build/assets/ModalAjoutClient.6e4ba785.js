import{o as d,a as c,f as e,A as v,J as L,b as P,c as ie,Q as ae,C as le,X as re,d as o,e as a,u as t,i as k,k as $,F as M,q as X,K as R,n as N,t as x,j as O,h as u,w as Y,g as Z,O as W}from"./app.666d3b6e.js";import{B as de}from"./package.8e2fe702.js";import{_ as ee}from"./InputError.bbe03e80.js";import{r as ue}from"./CheckIcon.d7b078e7.js";import{r as q,a as E}from"./TrashIcon.6a42a3dc.js";import{r as ce}from"./XMarkIcon.67ce1c48.js";import{B as pe,L as fe,j as me,H as _e,A as ge}from"./combobox.cf40f2dc.js";import{f as D,o as b}from"./transition.4d2a54ba.js";import{N as H,_ as Q,U as G}from"./dialog.bb4d8e93.js";function ve(j,h){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{"fill-rule":"evenodd",d:"M10 3a.75.75 0 01.55.24l3.25 3.5a.75.75 0 11-1.1 1.02L10 4.852 7.3 7.76a.75.75 0 01-1.1-1.02l3.25-3.5A.75.75 0 0110 3zm-3.76 9.2a.75.75 0 011.06.04l2.7 2.908 2.7-2.908a.75.75 0 111.1 1.02l-3.25 3.5a.75.75 0 01-1.1 0l-3.25-3.5a.75.75 0 01.04-1.06z","clip-rule":"evenodd"})])}function xe(j,h){return d(),c("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true"},[e("path",{d:"M10 12.5a2.5 2.5 0 100-5 2.5 2.5 0 000 5z"}),e("path",{"fill-rule":"evenodd",d:"M.664 10.59a1.651 1.651 0 010-1.186A10.004 10.004 0 0110 3c4.257 0 7.893 2.66 9.336 6.41.147.381.146.804 0 1.186A10.004 10.004 0 0110 17c-4.257 0-7.893-2.66-9.336-6.41zM14 10a4 4 0 11-8 0 4 4 0 018 0z","clip-rule":"evenodd"})])}const he={class:"relative mt-1"},be={class:"relative w-full cursor-default overflow-hidden rounded-lg bg-white text-left shadow-md focus:outline-none focus-visible:ring-2 focus-visible:ring-white focus-visible:ring-opacity-75 focus-visible:ring-offset-2 focus-visible:ring-offset-teal-300 sm:text-sm"},ye={class:"absolute inset-y-0 left-0 flex items-center pr-2 pb-1 pl-1"},we={class:"absolute rounded-md bg-white pt-1 shadow-lg w-full mt-1"},Ce={key:0,class:"relative cursor-default select-none py-2 px-4 text-gray-700"},ke=["onClick"],$e={class:"absolute inset-y-0 right-0 flex items-center pr-1"},je=["onClick"],Se={class:"rounded-full bg-blue-200 hover:bg-blue-400 text-blue-500 hover:text-blue-700 transition duration-300 p-1 block"},Ae=["onClick"],Be={class:"rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 transition duration-300 p-1 block"},ze={class:"text-center"},Te={class:"w-full flex items-center justify-center"},Ve={class:"w-full flex items-center justify-center"},Le=e("div",{class:"fixed inset-0 bg-black bg-opacity-25 z-[50]"},null,-1),Me={class:"fixed inset-0 overflow-y-auto z-[60]"},Ne={class:"flex min-h-full items-center justify-center p-4 text-center"},Oe={class:"absolute right-0 top-0"},De={class:"mt-2 grid grid-cols-2"},Ie=["onClick"],Fe={class:"col-span-1 flex items-center justify-center"},Ue={key:0,class:"lg:w-[45px] lg:h-[75px] sm:w-[60px] sm:h-[90px] w-[70px] h-[100px]"},qe=["src","alt"],Pe={key:1,class:"h-full w-full py-2 px-1"},Re={class:"text-3xl h-full w-full flex items-center justify-center bg-gray-300"},Ee={class:"flex flex-col col-span-3"},He={class:"my-1 text-sm rounded-xl bg-gray-200"},Qe=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Gammes",-1),Ge={class:"my-1 text-sm rounded-xl bg-gray-200"},Je=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Design",-1),Ke={class:"my-1 text-sm rounded-xl bg-gray-200"},Xe=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Couleur",-1),We={class:"my-1 text-sm rounded-xl bg-gray-200"},Ye=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Dimension",-1),Ze={class:"my-1 text-sm rounded-xl bg-gray-200"},et=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Quantit\xE9",-1),tt={class:"my-1 text-sm rounded-xl bg-gray-200"},st=e("span",{class:"rounded-xl bg-indigo-200 text-indigo-500 px-2"},"Prix unitaire",-1),ot={class:"mt-4"},nt=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),it={class:"fixed inset-0 overflow-y-auto"},at={class:"flex min-h-full items-center justify-center p-4 text-center"},lt=e("input",{type:"hidden",name:"id_produit_modal",id:"id_produit_modal"},null,-1),rt=e("input",{type:"hidden",name:"key_tab_modal",id:"key_tab_modal"},null,-1),dt=e("input",{type:"hidden",name:"qte_modal",id:"qte_modal"},null,-1),ut={class:"mt-2"},ct={class:"text-sm text-gray-500"},pt=e("label",{class:"lg:text-lg text-sm",for:"ref"}," R\xE9f\xE9rence : ",-1),ft={class:"mt-4 flex flex-row-reverse"},mt=e("button",{type:"submit",class:"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"}," Valider ",-1),Dt={__name:"ListClients",props:["data"],setup(j){var p=v(j.data),S=p.value.id_panier_edi,r=v(p.value.clients),f=v(),y=v(L().props.value.session.typeVente),l=r.value.findIndex(i=>i.client.id_client_edi==p.value.clientActuel.id_client_edi),m=v(r.value[l!=-1?l:0]);let _=v("");var w=v(!1),I=i=>{w.value=i},A=P({ref_externe:""});let F=ie(()=>_.value===""?r.value:r.value.filter(i=>i.client.ref_externe.toLowerCase().includes(_.value.toLowerCase())));const U=v(!1);function B(){U.value=!1}function te(i,n){i.preventDefault(),U.value=!0,f.value=n}var se=i=>{Swal.fire({title:"Attention",text:"\xCAtes-vous de supprimer cet article de la commande ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(n=>{n.isConfirmed&&P({id_panier_edi_list:i}).post("/dropshipping/panier/delete",{preserveScroll:!0,onSuccess:s=>{s.props.session.status?Toast.fire({icon:"success",title:"Le produit a bien \xE9t\xE9 supprimer de la commande."}):Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la suppression du produit de la commande."})}})})},oe=(i,n,g)=>{i.preventDefault(),Swal.fire({title:"Attention",text:"\xCAtes-vous sur de supprimer la commande client "+g+" ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(s=>{s.isConfirmed&&W.Inertia.post("/dropshipping/clients/delete",{id_client_edi:n,id_panier_edi:S},{onSuccess:C=>{C.props.session.status==!0?Toast.fire({icon:"success",title:"La commande client "+g+" a bien \xE9t\xE9 supprimer !"}):Toast.fire({icon:"error",title:"Une erreur sest produite lors de la suppression de la commande client"+g+", veuillez ressayer !"})}})})},ne=i=>(Math.round(i*100)/100).toFixed(2),J=i=>{new FormData(i.target),A.post("/dropshipping/clients/add",{preserveScroll:!0,preserveState:!0,onSuccess:n=>{n.props.session.statut?(I(!1),Toast.fire({icon:"success",title:"La commande a \xE9t\xE9 ajouter avec succ\xE8s."})):Toast.fire({icon:"error",title:n.props.session.msg})}})},K=(i,n=!1)=>{W.Inertia.post("/dropshipping/clients/edit",{id_client_edi:i},{preserveScroll:!0,preserveState:!0,onSuccess:g=>{g.props.session.status?(I(!1),n&&B(),Toast.fire({icon:"info",title:"La commande "+p.value.clientActuel.ref_externe+" a \xE9t\xE9 s\xE9lectionner !"})):Toast.fire({icon:"error",title:"Une erreur est survenue, essayer d'actualiser la page."})}})};return ae(p,()=>{r.value!=null&&(l=r.value.findIndex(i=>i.client.id_client_edi==p.value.clientActuel.id_client_edi),m.value=r.value[l!=-1?l:0])}),le(()=>{if(p.value=L().props.value.PanierDrop.panier,r.value=p.value.clients,f.value!=null){var i=L().props.value.PanierDrop.panier.clients,n=i.findIndex(g=>g.client.id_client_edi==f.value.client.id_client_edi);n!=-1&&(f.value=i[n])}}),(i,n)=>{const g=re("ImageOff");return d(),c(M,null,[o(t(ge),{modelValue:t(m),"onUpdate:modelValue":n[3]||(n[3]=s=>k(m)?m.value=s:m=s),class:"z-40"},{default:a(()=>[e("div",he,[e("div",be,[e("div",ye,[o(de,{class:"text-lg text-gray-400","aria-hidden":"true"})]),o(t(pe),{class:"w-full border-none py-2 pl-6 pr-10 text-sm leading-5 text-gray-900 focus:ring-0",displayValue:s=>s.client.ref_externe,onChange:n[0]||(n[0]=s=>k(_)?_.value=s.target.value:_=s.target.value)},null,8,["displayValue"]),o(t(fe),{class:"absolute inset-y-0 right-0 flex items-center pr-2"},{default:a(()=>[o(t(ve),{class:"h-5 w-5 text-gray-400","aria-hidden":"true"})]),_:1})]),o(t(D),{leave:"transition ease-in duration-100",leaveFrom:"opacity-100",leaveTo:"opacity-0",onAfterLeave:n[2]||(n[2]=s=>k(_)?_.value="":_="")},{default:a(()=>[e("div",we,[o(t(me),{class:"max-h-36 w-full overflow-auto text-base ring-1 ring-black ring-opacity-5 focus:outline-none sm:text-sm"},{default:a(()=>[t(F).length===0&&t(_)!==""?(d(),c("div",Ce," Aucun r\xE9sultat ")):$("",!0),(d(!0),c(M,null,X(t(F),(s,C)=>(d(),R(t(_e),{as:"template",key:C,value:s},{default:a(({selected:z,active:T})=>[e("li",{onClick:V=>t(K)(s.client.id_client_edi),class:N(["relative cursor-default select-none py-2 pl-10 pr-4",{"bg-emerald-500 text-white":T,"text-primary-400":!T}])},[z?(d(),c("span",{key:0,class:N(["absolute inset-y-0 left-0 flex items-center pl-3",{"text-white":T,"text-teal-400":!T}])},[o(t(ue),{class:"h-5 w-5","aria-hidden":"true"})],2)):$("",!0),e("span",{class:N(["block truncate pr-14",{"font-medium":z,"font-normal":!z}])},x(s.client.ref_externe),3),e("div",$e,[e("button",{onClick:O(V=>te(V,s),["stop"]),class:"w-full h-full px-2"},[e("span",Se,[o(t(xe),{class:"h-4 w-4"})])],8,je),e("button",{onClick:O(V=>t(oe)(V,s.client.id_client_edi,s.client.ref_externe),["stop"]),class:"w-full h-full px-2"},[e("span",Be,[o(t(q),{class:"h-4 w-4"})])],8,Ae)])],10,ke)]),_:2},1032,["value"]))),128))]),_:1}),e("div",ze,[e("button",{onClick:n[1]||(n[1]=s=>t(I)(!0)),class:"py-2 text-sm overflow-hidden hover:bg-green-200 hover:text-green-600 w-full rounded-md transition duration-300"},[e("span",Te,[o(t(E),{class:"w-5 h-5","aria-hidden":"true"}),u("Ajouter commande clients")]),e("span",Ve,x(t(F).length===0?t(_):""),1)])])])]),_:1})])]),_:1},8,["modelValue"]),o(t(D),{appear:"",show:U.value,as:"template"},{default:a(()=>[o(t(H),{as:"div",onClose:B,class:"relative z-[60]"},{default:a(()=>[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:a(()=>[Le]),_:1}),e("div",Me,[e("div",Ne,[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:a(()=>[o(t(Q),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:a(()=>[o(t(G),{as:"h3",class:"text-lg font-medium leading-6 text-gray-900 relative"},{default:a(()=>[u(" Commande Client N\xB0 : "+x(t(f).client.ref_externe)+" ",1),e("div",Oe,[e("button",{onClick:B,class:"rounded-full p-1 hover:bg-red-200 hover:text-red-400 transition duration-300"},[o(t(ce),{class:"w-4 h-4"})])])]),_:1}),e("div",De,[(d(!0),c(M,null,X(t(f).produits,(s,C)=>(d(),c("div",{key:C,class:"sm:col-span-1 col-span-2 grid grid-cols-4 bg-gray-100 p-1 m-2 relative rounded-xl"},[e("button",{onClick:z=>t(se)(s.panier.id_panier_edi_list),class:"absolute left-2 top-2 rounded-full bg-red-200 hover:bg-red-400 text-red-500 hover:text-red-700 p-1 transition duration-300",type:"button"},[o(t(q),{class:"w-4 h-4"})],8,Ie),e("div",Fe,[s.photo!=null&&s.photo.img_produit!=null?(d(),c("div",Ue,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+i.deocde(s.photo.img_produit),alt:s.code_sku,class:"w-full h-full object-cover"},null,8,qe)])):(d(),c("div",Pe,[e("div",Re,[o(g)])]))]),e("div",Ee,[e("span",He,[Qe,u(" "+x(s.gamme.nom_gamme),1)]),e("span",Ge,[Je,u(" "+x(s.design.nom_design),1)]),e("span",Ke,[Xe,u(" "+x(s.couleur.nom_couleur),1)]),e("span",We,[Ye,u(" "+x(s.dimension.largeur+"x"+s.dimension.longueur)+"cm",1)]),e("span",Ze,[et,u(" "+x(s.panier.quantiter),1)]),e("span",tt,[st,u(" "+x(t(ne)(s.prixProduit))+" \u20AC",1)])])]))),128))]),e("div",ot,[t(f).client.id_client_edi!=t(p).clientActuel.id_client_edi?(d(),c("button",{key:0,onClick:n[4]||(n[4]=s=>t(K)(t(f).client.id_client_edi,!0)),type:"button",class:"inline-flex justify-center rounded-md border border-transparent bg-green-200 px-4 py-2 text-sm font-medium text-green-900 hover:bg-green-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-green-500 focus-visible:ring-offset-2"},[o(t(E),{class:"h-4 w-4 text-green-500 mt-0 mr-1"}),u(" Ajouter des produits ")])):$("",!0),e("button",{type:"button",onClick:B,class:"inline-flex justify-center rounded-md border border-transparent bg-red-200 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-300 transition duration-300 mx-1 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2"},[o(t(q),{class:"h-4 w-4 text-red-500 mt-0 mr-1"}),u(" Supprimer la commande ")])])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]),t(y)==2?(d(),R(t(D),{key:0,appear:"",show:t(w),as:"template",unmount:!1},{default:a(()=>[o(t(H),{as:"div",class:"relative z-50"},{default:a(()=>[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:a(()=>[nt]),_:1}),e("div",it,[e("div",at,[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:a(()=>[o(t(Q),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:a(()=>[o(t(G),{as:"h3",class:"lg:text-lg text-sm font-medium leading-6 text-gray-900"},{default:a(()=>[u(" Saisissez la r\xE9f\xE9rence de la commande client. ")]),_:1}),e("form",{onSubmit:n[7]||(n[7]=O((...s)=>t(J)&&t(J)(...s),["prevent"]))},[lt,rt,dt,e("div",ut,[e("div",ct,[pt,Y(e("input",{"onUpdate:modelValue":n[5]||(n[5]=s=>t(A).ref_externe=s),class:"lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"ref",type:"text",name:"ref_externe",placeholder:"Saisissez la r\xE9f\xE9rence de la commande"},null,512),[[Z,t(A).ref_externe]]),o(ee,{class:"mt-2",message:t(A).errors.ref_externe},null,8,["message"])])]),e("div",ft,[mt,e("button",{onClick:n[6]||(n[6]=s=>{k(w)?w.value=!1:w=!1}),type:"button",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Fermer ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])):$("",!0)],64)}}},_t=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),gt={class:"fixed inset-0 overflow-y-auto"},vt={class:"flex min-h-full items-center justify-center p-4 text-center"},xt=e("input",{type:"hidden",name:"id_produit_modal",id:"id_produit_modal"},null,-1),ht=e("input",{type:"hidden",name:"key_tab_modal",id:"key_tab_modal"},null,-1),bt=e("input",{type:"hidden",name:"qte_modal",id:"qte_modal"},null,-1),yt={class:"mt-2"},wt={class:"text-sm text-gray-500"},Ct=e("label",{class:"lg:text-lg text-sm",for:"ref"}," R\xE9f\xE9rence : ",-1),kt={class:"mt-4 flex flex-row-reverse"},$t=["disabled"],jt={class:"overflow-hidden"},St=e("span",{class:""},"Ajouter une commande client",-1),It={__name:"ModalAjoutClient",setup(j){var h=v(!1),p=v(L().props.value.session.typeVente),S=y=>{h.value=y},r=P({ref_externe:""}),f=y=>{r.post("/dropshipping/clients/add",{preserveScroll:!0,preserveState:!0,onSuccess:l=>{l.props.session.statut?(S(!1),Toast.fire({icon:"success",title:"La commande a \xE9t\xE9 ajouter avec succ\xE8s."})):Toast.fire({icon:"error",title:l.props.session.msg})}})};return(y,l)=>(d(),c(M,null,[t(p)==2?(d(),R(t(D),{key:0,appear:"",show:t(h),as:"template",unmount:!1},{default:a(()=>[o(t(H),{as:"div",class:"relative z-50"},{default:a(()=>[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0",unmount:!1},{default:a(()=>[_t]),_:1}),e("div",gt,[e("div",vt,[o(t(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95",unmount:!1},{default:a(()=>[o(t(Q),{class:"w-full max-w-2xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:a(()=>[o(t(G),{as:"h3",class:"lg:text-lg text-sm font-medium leading-6 text-gray-900"},{default:a(()=>[u(" Saisissez la r\xE9f\xE9rence de la commande client. ")]),_:1}),e("form",{onSubmit:l[2]||(l[2]=O((...m)=>t(f)&&t(f)(...m),["prevent"]))},[xt,ht,bt,e("div",yt,[e("div",wt,[Ct,Y(e("input",{"onUpdate:modelValue":l[0]||(l[0]=m=>t(r).ref_externe=m),class:"lg:text-lg text-sm transition duration-300 bg-gray-200 appearance-none border-2 border-gray-200 rounded w-full py-2 px-4 text-gray-700 leading-tight focus:outline-none focus:bg-white focus:border-primary-200 focus:ring-0",id:"ref",type:"text",name:"ref_externe",placeholder:"Saisissez la r\xE9f\xE9rence de la commande"},null,512),[[Z,t(r).ref_externe]]),o(ee,{class:"mt-2",message:t(r).errors.ref_externe},null,8,["message"])])]),e("div",kt,[e("button",{class:N([{"opacity-25":t(r).processing},"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"]),disabled:t(r).processing,type:"submit"}," Valider ",10,$t),e("button",{onClick:l[1]||(l[1]=m=>{k(h)?h.value=!1:h=!1}),type:"button",class:"mx-1 inline-flex justify-center rounded-md border border-transparent bg-red-100 px-4 py-2 text-sm font-medium text-red-900 hover:bg-red-200 focus:outline-none focus-visible:ring-2 focus-visible:ring-red-500 focus-visible:ring-offset-2 transition duration-300"}," Fermer ")])],32)]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"])):$("",!0),e("div",jt,[e("button",{onClick:l[3]||(l[3]=m=>t(S)(!0)),class:"group flex items-center justify-center w-auto focus:outline-none"},[o(t(E),{class:"w-5 h-5 mr-1"}),St])])],64))}};export{Dt as _,It as a};
