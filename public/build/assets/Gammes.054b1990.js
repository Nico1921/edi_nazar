import{A as d,I as _,B as G,C as H,o as i,a,d as p,u as r,f as e,j as M,n as L,h as I,k as c,K as T,F as h,J as B,t as l,H as O,q as K,S as R,U as J,N as Q}from"./app.bf059605.js";import{S as W,R as X,L as Y}from"./Magnify.6eb26b35.js";import{_ as j,C as Z}from"./AuthenticatedLayout.e375ccd7.js";import{E as ee}from"./MicrosoftExcel.02dc5594.js";import{_ as te,a as re}from"./ModalAjoutClient.dfb9889a.js";import{_ as se}from"./ModalImportMKP.eda1b2bd.js";import{_ as ne,r as ie}from"./Breadcrumbs.30a085e8.js";import{r as oe}from"./BackspaceIcon.9fc4c9a6.js";import{r as ae}from"./ListBulletIcon.02e4b299.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./package.e1ccf85c.js";import"./InputError.1424a706.js";import"./XMarkIcon.f711f49a.js";import"./combobox.a8fc1bc1.js";import"./use-controllable.624c0863.js";import"./transition.4b093f4a.js";import"./dialog.104f0fd2.js";import"./micro-task.fe338338.js";import"./description.f0e4d4b0.js";const le={class:"container mx-auto mt-5"},me={class:"flex lg:flex-row flex-col items-center justify-center relative pb-10"},de=e("h1",{class:"font-semibold text-center mx-1 lg:text-2xl text-lg text-gray-800 py-2"},"Dropshipping - Gamme",-1),ce={key:0,class:"lg:absolute inset-0 lg:flex items-center justify-end"},pe={class:""},ue=["onSubmit"],_e={class:"block text-sm cursor-pointer text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300 px-2 py-2 rounded-xl",for:"file_import_clients"},fe={class:"hidden whitespace-nowrap truncate",id:"file_name_span_client"},ge=e("span",{id:"file_name_client"},null,-1),ve={class:"mt-1 ml-1 text-sm text-gray-500"},he=["href"],xe=["href"],ye={key:0,class:"col-span-1"},be=e("button",{type:"submit",class:"px-2 py-2 rounded-xl text-sm text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300"},"Importer !",-1),we=[be],Ie={class:"flex justify-between"},Te={key:0,class:"flex items-center px-2 py-1 bg-primary-50 rounded"},Be=e("h3",{class:"text-lg text-gray-600 mr-2"},"Commande client N\xB0 :",-1),ke={key:0,class:"flex justify-between"},Ee={class:"px-2 bg-primary-50 hover:scale-110 transition duration-300 rounded h-auto flex items-center justify-center"},Ce={class:"mx-1 my-1 flex sm:flex-row flex-col w-auto sm:flex-grow order-1 sm:order-2 mb-2 sm:mb-0"},Pe={class:"relative flex-grow"},Ue={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Ve={class:"sm:w-auto w-full sm:pl-2 pl-0 sm:pt-0 pt-2"},Le={class:"grid grid-cols-4",id:"gammes"},Re=["href"],je={class:"relative group"},Ne={key:0,class:"relative w-full h-60"},Se=["src","alt"],Ae={key:1,class:"relative w-full h-60"},ze=e("span",null,"Pas de photo pour cette gamme !",-1),De=[ze],Fe={class:"absolute bottom-0 z-30 w-full overflow-hidden"},$e={class:"max-h-0 group-hover:max-h-60 group-hover:p-1 transition-full duration-500 bg-primary-300 text-center flex flex-col bg-opacity-70 text-white"},qe={class:"capitalize"},Ge={class:"flex flex-wrap items-center justify-center text-center px-4 py-2"},He={class:"capitalize text-center font-semibold"},Me={class:"flex justify-center items-center bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},Oe={class:"w-1/3"},Ke=K('<option value="8">8 par page</option><option value="12">12 par page</option><option value="18">18 par page</option><option value="50">50 par page</option><option value="100">100 par page</option>',5),Je=[Ke],Qe={class:"w-1/3 text-center"},We={class:"flex justify-end w-1/3"},Xe={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},Ye=["href"],Ze={key:0},et=e("div",{id:"modalImport"},null,-1),tt=e("div",{id:"productClientView"},null,-1),rt={layout:(x,y)=>x(j,()=>child),layout:j},wt=Object.assign(rt,{__name:"Gammes",props:["products","dimensions","produitsAchat"],setup(x){const y=x;var N=[{title:"Accueil",link:"/",icon:ie,active:!1},{title:"Dropshipping",link:"/dropshipping/gamme",icon:ae,active:!1},{title:"Gamme",link:"/dropshipping/gamme",icon:"",active:!0}];const S=new URL("/build/assets/Template_Vierge_Drop.477843c2.xlsx",self.location).href,A=new URL("/build/assets/Template_Model_Drop.05dd7258.xlsx",self.location).href;d(!1);var m=d(y.products),z=d(_().props.value.dynamique_client);d(_().props.value.auth.user[0].client);let f=d(!1);var D=d(_().props.value.session.typeVente),g=d(_().props.value.PanierDrop),v=d(g.value.panier.clientActuel),k=n=>{n.target.value==""?(document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),f.value=!1):(document.getElementById("file_name_client").innerText=n.target.files[0].name,document.getElementById("file_name_span_client").classList.remove("hidden"),f.value=!0)},E=()=>{document.getElementById("file_import_clients").value=null,document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),f.value=!1};const F=()=>{var n=new FormData(document.getElementById("fileClientImport"));R.post("/dropshipping/clients/import",n).then(s=>{if(console.log(s),s.status){document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount();var t=s.data,o=J(se,{isOpen:!0,importMKP:t.importCommandes,reussi:t.valider,erreur:t.erreur,qteFinal:t.qteFinal,m2Final:t.m2Final,prixHT_TT:t.prixHT_TT,prixTVA_TT:t.prixTVA_TT,prixTTC_TT:t.prixTTC_TT,stockInvalide:t.stockInvalide});o.mount(document.getElementById("modalImport"))}else Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'importation de votre fichier, veuillez v\xE9rifier que votre fichier correspond bien \xE0 l'exemple fournis puis ressayer !"})})},b=n=>HtmlEntities.decode(n.toLowerCase()),$=n=>y.dimensions.filter(({id_gamme:s})=>s===n);var u={previous:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",previous_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",next:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",next_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",number:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",number_active:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 bg-gray-100"},C=()=>{const n=new URL(window.location.href);var s=document.getElementById("per_page");n.searchParams.set("perPage",s.value),window.location.href=n.href},q=()=>{const n=new URL(window.location.href);return n.searchParams.get("perPage")!=null?n.searchParams.get("perPage"):12},P=n=>{var s="/dropshipping/gamme?filter[nom_gamme]="+n.target.value;R.post(encodeURI(s)).then(t=>{if(t.status==200){const o=new URL(window.location.href);o.searchParams.set("filter[nom_gamme]",n.target.value),m.value=t.data.products,window.history.replaceState("","",o.href)}})},U=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous de vouloir vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(n=>{n.isConfirmed&&Q.Inertia.post("/dropshipping/panier/empty",{},{preserveScroll:!0,onSuccess:s=>{console.log(s),s.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})};return G(()=>{var n=document.getElementById("per_page");n.value=q();const s=new URL(window.location.href);var t=document.getElementById("searchGamme");t.value=s.searchParams.get("filter[nom_gamme]"),document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount()}),H(()=>{z.value=_().props.value.dynamique_client,g.value=_().props.value.PanierDrop,v.value=g.value.panier.clientActuel}),(n,s)=>(i(),a(h,null,[p(r(O),{title:"Products"}),e("section",le,[p(ne,{links:r(N)},null,8,["links"]),e("div",me,[de,r(D)==2?(i(),a("div",ce,[e("div",pe,[e("form",{id:"fileClientImport",class:"grid grid-cols-4 max-w-[21rem]",onSubmit:M(F,["prevent"])},[e("div",{class:L(["relative lg:mx-2 mx-1 flex flex-col max-w-sm",r(f)?"col-span-3":" col-span-4"])},[e("label",_e,[I("Importer fichier de commandes "),p(ee)]),e("span",fe,[e("button",{type:"button",onClick:s[0]||(s[0]=(...t)=>r(E)&&r(E)(...t))},[p(Z)]),ge]),e("input",{onChange:s[1]||(s[1]=(...t)=>r(k)&&r(k)(...t)),type:"file",class:"hidden",id:"file_import_clients",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"fileImport"},null,32),e("span",ve,[e("a",{href:r(S),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Template vierge",8,he),I(" / "),e("a",{href:r(A),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Mod\xE8le",8,xe)])],2),r(f)?(i(),a("div",ye,we)):c("",!0)],40,ue)])])):c("",!0)]),e("div",Ie,[r(v)!=null?(i(),a("div",Te,[Be,r(v).id_client_edi!=null?(i(),a("div",ke,[r(v).id_client_edi!=null?(i(),T(te,{key:0,data:r(g).panier},null,8,["data"])):c("",!0)])):c("",!0)])):c("",!0),e("div",Ee,[p(re)])]),e("div",Ce,[e("div",Pe,[e("input",{class:"block w-full pl-9 text-sm rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",placeholder:"Recherche...",id:"searchGamme",type:"text",name:"global",onInput:s[2]||(s[2]=(...t)=>r(P)&&r(P)(...t))},null,32),e("div",Ue,[p(W,{class:"text-xl mb-1"})])]),e("div",Ve,[e("button",{type:"button",onClick:s[3]||(s[3]=(...t)=>r(U)&&r(U)(...t)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[p(r(oe),{class:"w-5 h-5 mr-2"}),I("Vider mon panier")])])]),e("div",Le,[(i(!0),a(h,null,B(r(m).data,(t,o)=>(i(),a("a",{key:o,href:"/dropshipping/gamme/"+b(t.nom_gamme),class:"col-span-1 group p-4 hover:scale-110 transition-full duration-300 cursor-pointer"},[e("div",je,[t.img_gamme!=null?(i(),a("div",Ne,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/gamme/"+t.img_gamme,alt:t.nom_gamme,class:"z-20 rounded relative w-full h-full object-cover"},null,8,Se)])):(i(),a("div",Ae,De)),e("div",Fe,[e("div",$e,[e("span",null,"Tapis "+l(t.type_tapis==0?"int\xE9rieur":t.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+l(t.type_poils==1?"court":"long")+" - "+l(t.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",qe,l(b(t.nom_special)),1),e("div",Ge,[(i(!0),a(h,null,B($(t.id_gamme),(V,w)=>(i(),a("span",{key:w,class:"block text-center w-auto px-1"},l(!Number.isInteger(w/3)&&w!=0?" - ":"")+" "+l(V.largeur)+"x"+l(V.longueur)+"cm ",1))),128))]),e("span",null,"Prix HT m\xB2 : "+l(t.prix_vente_ht_m2_remise?t.prix_vente_ht_m2_remise:t.prix_vente_ht_m2)+" \u20AC",1)])])]),e("div",null,[e("h2",He,"Collection "+l(b(t.nom_gamme)),1)])],8,Re))),128))]),e("div",Me,[e("div",Oe,[e("select",{id:"per_page",name:"per_page",dusk:"per-page-full",onChange:s[4]||(s[4]=(...t)=>r(C)&&r(C)(...t)),class:"mr-5 focus:ring-indigo-500 focus:border-indigo-500 min-w-max shadow-sm text-sm border-gray-300 rounded-md"},Je,32),e("span",null,"Page "+l(r(m).current_page)+" sur "+l(r(m).last_page),1)]),e("span",Qe,l(r(m).total)+" R\xE9sultats",1),e("div",We,[e("nav",Xe,[(i(!0),a(h,null,B(r(m).links,(t,o)=>(i(),a("a",{key:o,class:L(o!=0&&o+1!=r(m).links.length?t.active?r(u).number_active:r(u).number:o==0?r(m).current_page==1?r(u).previous_disabled:r(u).previous:r(m).current_page==r(m).last_page?r(u).next_disabled:r(u).next),href:t.url},[o!=0&&o+1!=r(m).links.length?(i(),a("span",Ze,l(t.label),1)):c("",!0),o+1==r(m).links.length?(i(),T(X,{key:1})):c("",!0),o==0?(i(),T(Y,{key:2})):c("",!0)],10,Ye))),128))])])])]),et,tt],64))}});export{wt as default};
