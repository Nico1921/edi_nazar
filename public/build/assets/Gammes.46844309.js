import{A as p,I as _,b as q,B as G,C as K,o as n,a as i,d,u as t,f as e,j as O,n as T,h as k,k as c,K as B,F as x,J as E,t as l,H as J,e as R,q as Q,$ as W,_ as X,N as Y}from"./app.ab4c68e1.js";import{S as Z,r as ee,R as te,L as se}from"./Magnify.0fd4b545.js";import{_ as N,C as re}from"./AuthenticatedLayout.538b56e0.js";import{E as oe}from"./MicrosoftExcel.70b90663.js";import{_ as ne,a as ie}from"./ModalAjoutClient.538b8076.js";import{_ as ae}from"./ModalImportMKP.9a7aa4b0.js";import{_ as le,r as me}from"./Breadcrumbs.cc5c6b1a.js";import{T as de}from"./floating-vue.es.b7b0e736.js";import{_ as ce}from"./InputError.ca4f50c1.js";import{r as pe}from"./BackspaceIcon.0dc0ecd1.js";import{r as ue}from"./ListBulletIcon.a39c39f5.js";import"./_plugin-vue_export-helper.cdc0426e.js";import"./package.be420d86.js";import"./XMarkIcon.74836623.js";import"./combobox.b5cf67f3.js";import"./use-controllable.eed1e1e1.js";import"./transition.c945739c.js";import"./dialog.9f858a97.js";import"./micro-task.fe338338.js";import"./description.e5c6f706.js";const _e={class:"container mx-auto mt-5"},fe={class:"flex lg:flex-row flex-col items-center justify-center relative pb-10"},ge=e("h1",{class:"font-semibold text-center mx-1 lg:text-2xl text-lg text-gray-800 py-2"},"Dropshipping - Gammes",-1),he={key:0,class:"lg:absolute inset-0 lg:flex items-center justify-end"},ve={class:""},xe=["onSubmit"],ye={class:"block text-sm cursor-pointer text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300 px-2 py-2 rounded-xl",for:"file_import_clients"},be={class:"hidden whitespace-nowrap truncate",id:"file_name_span_client"},we=e("span",{id:"file_name_client"},null,-1),Ie={class:"mt-1 ml-1 text-sm text-gray-500"},Te=["href"],ke=["href"],Be={key:0,class:"col-span-1"},Ee=["disabled"],Pe={class:"flex justify-between"},Ce={key:0,class:"flex items-center px-2 py-1 bg-primary-50 rounded"},je=e("h3",{class:"text-lg text-gray-600 mr-2"},"Commande client N\xB0 :",-1),Ue={key:0,class:"flex justify-between"},Ve={class:"px-2 bg-primary-50 hover:scale-110 transition duration-300 rounded h-auto flex items-center justify-center"},Le={class:"mx-1 my-1 flex sm:flex-row flex-col w-auto sm:flex-grow order-1 sm:order-2 mb-2 sm:mb-0"},Re={class:"relative flex-grow"},Ne={class:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none"},Se={class:"sm:w-auto w-full sm:pl-2 pl-0 sm:pt-0 pt-2"},ze={class:"grid grid-cols-4",id:"gammes"},Ae=["href"],$e={class:"relative group"},Fe={key:0,class:"relative w-full h-60"},De=["src","alt"],He={key:1,class:"relative w-full h-60"},Me=e("span",null,"Pas de photo pour cette gamme !",-1),qe=[Me],Ge={class:"absolute bottom-0 z-30 w-full overflow-hidden"},Ke={class:"max-h-0 group-hover:max-h-60 group-hover:p-1 transition-full duration-500 bg-primary-300 text-center flex flex-col bg-opacity-70 text-white"},Oe={class:"capitalize"},Je={class:"flex flex-wrap items-center justify-center text-center px-4 py-2"},Qe={key:0},We={key:1},Xe={class:"flex items-center justify-center mt-1"},Ye={class:"capitalize text-center font-semibold"},Ze=["href"],et=e("span",null,"T\xE9l\xE9charger la trame",-1),tt={class:"flex justify-center items-center bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6"},st={class:"w-1/3"},rt=Q('<option value="8">8 par page</option><option value="12">12 par page</option><option value="18">18 par page</option><option value="50">50 par page</option><option value="100">100 par page</option>',5),ot=[rt],nt={class:"w-1/3 text-center"},it={class:"flex justify-end w-1/3"},at={class:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination"},lt=["href"],mt={key:0},dt=e("div",{id:"modalImport"},null,-1),ct=e("div",{id:"productClientView"},null,-1),pt={layout:(y,b)=>y(N,()=>child),layout:N},Lt=Object.assign(pt,{__name:"Gammes",props:["products","dimensions","produitsAchat"],setup(y){const b=y;var S=[{title:"Accueil",link:"/",icon:me,active:!1},{title:"Dropshipping",link:"/dropshipping/gamme",icon:ue,active:!1},{title:"Gammes",link:"/dropshipping/gamme",icon:"",active:!0}];const z=new URL("/build/assets/Template_Vierge_Drop.477843c2.xlsx",self.location).href,A=new URL("/build/assets/Template_Model_Drop.05dd7258.xlsx",self.location).href;p(!1);var m=p(b.products),$=p(_().props.value.dynamique_client);p(_().props.value.auth.user[0].client);let f=p(!1);var F=p(_().props.value.session.typeVente),h=p(_().props.value.PanierDrop),v=p(h.value.panier.clientActuel),g=q({fileImport:null}),P=o=>{o.target.value==""?(document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),f.value=!1):(document.getElementById("file_name_client").innerText=o.target.files[0].name,document.getElementById("file_name_span_client").classList.remove("hidden"),f.value=!0)},C=()=>{document.getElementById("file_import_clients").value=null,document.getElementById("file_name_client").innerText="",document.getElementById("file_name_span_client").classList.add("hidden"),f.value=!1};const D=()=>{g.post("/dropshipping/clients/import",{onSuccess:o=>{document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount();var r=o.props.session.fileInfo,s=W(ae,{isOpen:!0,importMKP:r.importCommandes,reussi:r.valider,erreur:r.erreur,qteFinal:r.qteFinal,m2Final:r.m2Final,prixHT_TT:r.prixHT_TT,prixTVA_TT:r.prixTVA_TT,prixTTC_TT:r.prixTTC_TT,stockInvalide:r.stockInvalide});s.mount(document.getElementById("modalImport"))},onError:o=>{Toast.fire({icon:"error",title:"Une erreur s'est produite lors de l'importation de votre fichier, veuillez v\xE9rifier que votre fichier correspond bien \xE0 l'exemple fourni puis ressayer !"})}})},w=o=>HtmlEntities.decode(o.toLowerCase()),H=o=>b.dimensions.filter(({id_gamme:r})=>r===o);var u={previous:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",previous_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium",next:"text-gray-500 hover:bg-gray-50 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",next_disabled:"cursor-not-allowed text-gray-400 relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium",number:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",number_active:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50 bg-gray-100"},j=()=>{const o=new URL(window.location.href);var r=document.getElementById("per_page");o.searchParams.set("perPage",r.value),window.location.href=o.href},M=()=>{const o=new URL(window.location.href);return o.searchParams.get("perPage")!=null?o.searchParams.get("perPage"):12},U=o=>{var r="/dropshipping/gamme?filter[nom_gamme]="+o.target.value;X.post(encodeURI(r)).then(s=>{if(s.status==200){const a=new URL(window.location.href);a.searchParams.set("filter[nom_gamme]",o.target.value),m.value=s.data.products,window.history.replaceState("","",a.href)}})},V=()=>{Swal.fire({title:"Attention",text:"\xCAtes-vous de vouloir vider votre panier ?",icon:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",cancelButtonText:"Non",confirmButtonText:"Oui"}).then(o=>{o.isConfirmed&&Y.Inertia.post("/dropshipping/panier/empty",{},{preserveScroll:!0,onSuccess:r=>{console.log(r),r.props.session.status?Toast.fire({icon:"success",title:"Le panier a bien \xE9t\xE9 vider !"}):Toast.fire({icon:"error",title:"Une erreur est survenue, pour vider votre panier, vous pouvez aussi vous d\xE9connecter et vous reconnecter."})}})})};return G(()=>{var o=document.getElementById("per_page");o.value=M();const r=new URL(window.location.href);var s=document.getElementById("searchGamme");s.value=r.searchParams.get("filter[nom_gamme]"),document.getElementById("modalImport")!=null&&document.getElementById("modalImport").__vue_app__!=null&&document.getElementById("modalImport").__vue_app__.unmount()}),K(()=>{$.value=_().props.value.dynamique_client,h.value=_().props.value.PanierDrop,v.value=h.value.panier.clientActuel}),(o,r)=>(n(),i(x,null,[d(t(J),{title:"Products"}),e("section",_e,[d(le,{links:t(S)},null,8,["links"]),e("div",fe,[ge,t(F)==2?(n(),i("div",he,[e("div",ve,[e("form",{id:"fileClientImport",class:"grid grid-cols-4 max-w-[21rem]",onSubmit:O(D,["prevent"])},[e("div",{class:T(["relative lg:mx-2 mx-1 flex flex-col max-w-sm",t(f)?"col-span-3":" col-span-4"])},[e("label",ye,[k("Importer fichier de commandes "),d(oe)]),e("span",be,[e("button",{type:"button",onClick:r[0]||(r[0]=(...s)=>t(C)&&t(C)(...s))},[d(re)]),we]),e("input",{onInput:r[1]||(r[1]=s=>t(g).fileImport=s.target.files[0]),onChange:r[2]||(r[2]=(...s)=>t(P)&&t(P)(...s)),type:"file",class:"hidden",id:"file_import_clients",accept:"application/vnd.ms-excel,application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",name:"fileImport"},null,32),e("span",Ie,[e("a",{href:t(z),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Template vierge",8,Te),k(" / "),e("a",{href:t(A),class:"mt-1 text-sm text-blue-400 hover:text-blue-300 transition duration-300"},"Mod\xE8le",8,ke)]),d(ce,{class:"mt-2",message:t(g).errors.fileImport},null,8,["message"])],2),t(f)?(n(),i("div",Be,[e("button",{class:T([{"opacity-25":t(g).processing},"px-2 py-2 rounded-xl text-sm text-primary-500 bg-primary-100 hover:bg-primary-200 transition duration-300"]),disabled:t(g).processing,type:"submit"},"Importer !",10,Ee)])):c("",!0)],40,xe)])])):c("",!0)]),e("div",Pe,[t(v)!=null?(n(),i("div",Ce,[je,t(v).id_client_edi!=null?(n(),i("div",Ue,[t(v).id_client_edi!=null?(n(),B(ne,{key:0,data:t(h).panier},null,8,["data"])):c("",!0)])):c("",!0)])):c("",!0),e("div",Ve,[d(ie)])]),e("div",Le,[e("div",Re,[e("input",{class:"block w-full pl-9 text-sm rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500 border-gray-300",placeholder:"Recherche...",id:"searchGamme",type:"text",name:"global",onInput:r[3]||(r[3]=(...s)=>t(U)&&t(U)(...s))},null,32),e("div",Ne,[d(Z,{class:"text-xl mb-1"})])]),e("div",Se,[e("button",{type:"button",onClick:r[4]||(r[4]=(...s)=>t(V)&&t(V)(...s)),class:"sm:w-auto w-full px-5 py-2 flex items-center justify-center rounded bg-red-600 text-red-200 hover:bg-red-500 hover:text-red-800 transition duration-300"},[d(t(pe),{class:"w-5 h-5 mr-2"}),k("Vider mon panier")])])]),e("div",ze,[(n(!0),i(x,null,E(t(m).data,(s,a)=>(n(),i("a",{key:a,href:"/dropshipping/gamme/"+w(s.nom_gamme),class:"col-span-1 group p-4 hover:scale-110 transition-full duration-300 cursor-pointer"},[e("div",$e,[s.img_gamme!=null?(n(),i("div",Fe,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/gamme/"+s.img_gamme,alt:s.nom_gamme,class:"z-20 rounded relative w-full h-full object-cover"},null,8,De)])):(n(),i("div",He,qe)),e("div",Ge,[e("div",Ke,[e("span",null,"Tapis "+l(s.type_tapis==0?"int\xE9rieur":s.type_tapis==1?"ext\xE9rieur":"int\xE9rieur / ext\xE9rieur"),1),e("span",null,"Poils "+l(s.type_poils==1?"courts":"longs")+" - "+l(s.uv_proof==1?"R\xE9sistants aux UV":"Non R\xE9sistants aux UV"),1),e("span",Oe,l(w(s.nom_special)),1),e("div",Je,[(n(!0),i(x,null,E(H(s.id_gamme),(L,I)=>(n(),i("span",{key:I,class:"block text-center w-auto px-1"},l(!Number.isInteger(I/3)&&I!=0?" - ":"")+" "+l(L.largeur)+"x"+l(L.longueur)+"cm ",1))),128))]),s.prix_piece?(n(),i("span",Qe,"Prix HT \xE0 la pi\xE8ce")):(n(),i("span",We,"Prix HT m\xB2 : "+l(s.prix_vente_ht_m2_remise?s.prix_vente_ht_m2_remise:s.prix_vente_ht_m2)+" \u20AC",1))])])]),e("div",Xe,[e("h2",Ye,"Collection "+l(w(s.nom_gamme)),1),d(t(de),{placement:"right",triggers:["hover","focus","click"]},{popper:R(()=>[et]),default:R(()=>[e("div",null,[s.nom_trame!=null&&s.nom_trame!=""?(n(),i("a",{key:0,href:"https://gestion.tapis-nazar.fr/xls/trame/"+s.nom_trame,class:"ml-2 flex items-center justify-center",download:""},[d(t(ee),{class:"rounded-full border border-black p-0.5 w-5 h-5 mr-2"})],8,Ze)):c("",!0)])]),_:2},1024)])],8,Ae))),128))]),e("div",tt,[e("div",st,[e("select",{id:"per_page",name:"per_page",dusk:"per-page-full",onChange:r[5]||(r[5]=(...s)=>t(j)&&t(j)(...s)),class:"mr-5 focus:ring-indigo-500 focus:border-indigo-500 min-w-max shadow-sm text-sm border-gray-300 rounded-md"},ot,32),e("span",null,"Page "+l(t(m).current_page)+" sur "+l(t(m).last_page),1)]),e("span",nt,l(t(m).total)+" R\xE9sultats",1),e("div",it,[e("nav",at,[(n(!0),i(x,null,E(t(m).links,(s,a)=>(n(),i("a",{key:a,class:T(a!=0&&a+1!=t(m).links.length?s.active?t(u).number_active:t(u).number:a==0?t(m).current_page==1?t(u).previous_disabled:t(u).previous:t(m).current_page==t(m).last_page?t(u).next_disabled:t(u).next),href:s.url},[a!=0&&a+1!=t(m).links.length?(n(),i("span",mt,l(s.label),1)):c("",!0),a+1==t(m).links.length?(n(),B(te,{key:1})):c("",!0),a==0?(n(),B(se,{key:2})):c("",!0)],10,lt))),128))])])])]),dt,ct],64))}});export{Lt as default};
