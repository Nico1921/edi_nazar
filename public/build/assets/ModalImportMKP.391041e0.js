import{o,a as i,f as e,t as l,k as h,m as B,A as C,J as $,e as c,d,u as s,h as g,F as M,q as P,n as T,b as E,$ as F}from"./app.87be743b.js";import{_ as A}from"./_plugin-vue_export-helper.cdc0426e.js";import{C as H}from"./AuthenticatedLayout.f865475b.js";import{o as b,f as V}from"./transition.bba72eae.js";import{_ as I,U as j,N as z}from"./dialog.8164dc0c.js";const N={name:"AlertIcon",emits:["click"],props:{title:{type:String},fillColor:{type:String,default:"currentColor"},size:{type:Number,default:24}}},K=["aria-hidden","aria-label"],S=["fill","width","height"],O={d:"M13 14H11V9H13M13 18H11V16H13M1 21H23L12 2L1 21Z"},q={key:0};function Q(x,t,a,f,p,u){return o(),i("span",B(x.$attrs,{"aria-hidden":!a.title,"aria-label":a.title,class:"material-design-icon alert-icon",role:"img",onClick:t[0]||(t[0]=_=>x.$emit("click",_))}),[(o(),i("svg",{fill:a.fillColor,class:"material-design-icon__svg",width:a.size,height:a.size,viewBox:"0 0 24 24"},[e("path",O,[a.title?(o(),i("title",q,l(a.title),1)):h("",!0)])],8,S))],16,K)}const U=A(N,[["render",Q]]);const D=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),L={class:"fixed inset-0 overflow-y-auto"},J={class:"flex min-h-full items-center justify-center p-4 text-center relative"},R={class:"grid grid-cols-10 ml-5 bg-primary-50 rounded-lg p-4 mb-4"},Z={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},G={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},W={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},X={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},Y={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},ee={class:"groupProduit relative w-full flex items-center justify-center"},te={class:"z-10 absolute xl:bottom-28 bottom-28 imageProduit"},se={key:0,class:"lg:w-[100px] lg:h-[150px] sm:w-[100px] sm:h-[150px] w-[80px] h-[120px]"},le=["src","alt"],oe={key:1,class:"lg:w-[100px] lg:h-[150px] sm:w-[100px] sm:h-[100px] w-[80px] h-[100px]"},ie=e("span",null,"Pas de photo pour ce produit !",-1),ne=[ie],ae={class:"z-20 sm:w-80 w-72 absolute bottom-0 text-center bg-white rounded drop-shadow-xl flex flex-col py-2"},re={class:"flex flex-col px-10"},ce={class:"flex justify-center items-center py-2 w-full"},de={key:0,class:"flex items-center justify-center mr-2"},pe=e("span",{class:"bg-red-700 w-[10px] h-[10px] block rounded-full mx-2"},null,-1),ue={class:"flex flex-col"},_e={key:1,class:"flex items-center justify-center"},me=e("span",null,"Il n'y a pas de produit pour ce client !",-1),xe=[me],fe={__name:"ModalImportMKP_client",props:["isOpen","client"],setup(x){const t=x,a=C(t.isOpen);function f(){a.value=!1,setTimeout(()=>{document.getElementById("productClientView").__vue_app__.unmount()},200)}var p={grid4:"grid-cols-4",grid3:"grid-cols-3",grid2:"grid-cols-2",grid1:"grid-cols-1"},u=()=>t.client.products.length==4?p.grid4:t.client.products.length==3?p.grid3:t.client.products.length==2?p.grid2:t.client.products.length==1?p.grid1:p.grid4,_=v=>(Math.round(v*100)/100).toFixed(2);return(v,w)=>(o(),$(s(V),{appear:"",show:a.value,as:"template"},{default:c(()=>[d(s(z),{as:"div",onClose:f,class:"relative z-[110]"},{default:c(()=>[d(s(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[D]),_:1}),e("div",L,[e("div",J,[d(s(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[d(s(I),{class:"w-full max-w-6xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all"},{default:c(()=>[d(s(j),{as:"h3",class:"sm:text-xl text-lg font-bold leading-6 text-gray-900"},{default:c(()=>[g(" D\xE9tail client : "+l(t.client.nom+" "+t.client.prenom),1)]),_:1}),e("div",null,[e("button",{onClick:f,type:"button",class:"absolute top-5 right-10"},[d(H)])]),e("div",R,[e("span",Z,"Quantit\xE9 : "+l(t.client.products_tt),1),e("span",G,"M\xB2 : "+l(t.client.m2_tt)+" m\xB2",1),e("span",W,"Prix HT : "+l(s(_)(t.client.prix_ht_tt))+" \u20AC",1),e("span",X,"Prix TVA : "+l(s(_)(t.client.prix_tva_tt))+" \u20AC",1),e("span",Y,"Prix TTC : "+l(s(_)(t.client.prix_ttc_tt))+" \u20AC",1)]),t.client.products.length!=0?(o(),i("div",{key:0,class:T("overflow-auto lg:max-h-[50vh] max-h-[45vh] grid "+(t.client.products.length>4?s(p).grid4:s(u)()))},[(o(!0),i(M,null,P(t.client.products,(r,m)=>(o(),i("div",{class:"relative flex justify-center lg:col-span-1 col-span-4 h-80 w-full py-4 px-4",key:m},[e("div",ee,[e("div",te,[r.url_image!=null?(o(),i("div",se,[e("img",{src:"https://gestion.tapis-nazar.fr/img/produit/"+r.url_image,alt:r.sku,class:"w-full h-full object-cover"},null,8,le)])):(o(),i("div",oe,ne))]),e("div",ae,[e("div",re,[e("span",null,l(r.gamme),1),e("span",null,l(r.design),1),e("span",null,l(r.taille),1)]),e("div",ce,[r.stock<=r.qte?(o(),i("span",de,[g("Erreur Stock"),pe,g(" | ")])):h("",!0),e("div",ue,[e("span",null,"Quantit\xE9 : "+l(r.qte),1),e("span",null,"Prix Unitaire : "+l(s(_)(r.prix_TTC_unitaire))+" \u20AC",1)])])])])]))),128))],2)):(o(),i("div",_e,xe))]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}};const ge=e("div",{class:"fixed inset-0 bg-black bg-opacity-25"},null,-1),he={class:"fixed inset-0 overflow-y-auto"},ve={class:"flex min-h-full items-center justify-center p-4 text-center"},ye={class:"mt-2"},be={class:"text-sm text-gray-500"},we={key:0,class:"bg-yellow-100 rounded-lg text-center p-2"},Te={class:"text-yellow-500"},ke={class:"grid grid-cols-10 xl:ml-5 bg-primary-50 rounded-lg p-4 mb-4 mt-4"},Ce={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},$e={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},Me={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},Pe={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},Ve={class:"xl:col-span-2 sm:col-span-5 col-span-12 text-center"},Ie={key:0,class:"relative rounded-lg box w-full relative"},je={class:"rotate-front rounded-lg flex flex-col p-4 overflow-hidden"},ze={key:0,class:"z-10 absolute top-2 right-2 flex flex-col"},Be=e("span",{class:"flex items-center justify-center"},[g("Erreur Stock "),e("span",{class:"bg-red-700 w-[10px] h-[10px] block rounded-full ml-2"})],-1),Ee=[Be],Fe={class:"rotate-back rounded-lg py-4 px-4 flex justify-center items-center"},Ae=["onClick"],He={key:1,class:"cols-span-1"},Ne={class:"w-full py-2 bg-white flex items-center justify-center"},Ke=["disabled"],Le={__name:"ModalImportMKP",props:["isOpen","importMKP","reussi","erreur","qteFinal","m2Final","prixHT_TT","prixTVA_TT","prixTTC_TT","stockInvalide"],setup(x){const t=x;var a=E({clients:t.importMKP});const f=C(t.isOpen);function p(){f.value=!1}var u={grid4:"grid-cols-4",grid3:"grid-cols-3",grid2:"grid-cols-2",grid1:"grid-cols-1"},_=()=>{if(t.reussi==4)return u.grid4;if(t.reussi==3)return u.grid3;if(t.reussi==2)return u.grid2;if(t.reussi==1)return u.grid1},v=m=>{document.getElementById("productClientView")!=null&&document.getElementById("productClientView").__vue_app__!=null&&document.getElementById("productClientView").__vue_app__.unmount();var y=F(fe,{isOpen:!0,client:t.importMKP[m]});y.mount(document.getElementById("productClientView"))},w=()=>{a.post("/dropshipping/clients/import/validation",{onSuccess:m=>{p(),document.location.href="/dropshipping/gamme"},onError:m=>{Toast.fire({icon:"error",title:"Une erreur s'est produite lors de la validation de votre importation, veuillez r\xE9essayer !"})}})},r=m=>(Math.round(m*100)/100).toFixed(2);return(m,y)=>(o(),$(s(V),{appear:"",show:f.value,as:"template"},{default:c(()=>[d(s(z),{as:"div",onClose:p,class:"relative z-[100]"},{default:c(()=>[d(s(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0","enter-to":"opacity-100",leave:"duration-200 ease-in","leave-from":"opacity-100","leave-to":"opacity-0"},{default:c(()=>[ge]),_:1}),e("div",he,[e("div",ve,[d(s(b),{as:"template",enter:"duration-300 ease-out","enter-from":"opacity-0 scale-95","enter-to":"opacity-100 scale-100",leave:"duration-200 ease-in","leave-from":"opacity-100 scale-100","leave-to":"opacity-0 scale-95"},{default:c(()=>[d(s(I),{class:"w-full max-w-5xl transform overflow-hidden rounded-2xl bg-white p-6 text-left align-middle shadow-xl transition-all relative"},{default:c(()=>[d(s(j),{as:"h3",class:"sm:text-xl text-lg font-medium leading-6 text-gray-900"},{default:c(()=>[g(" R\xE9sumer de l'importation ")]),_:1}),e("div",ye,[e("p",be," Statuts de l'importation : "+l(t.erreur>0?"echec !":"r\xE9ussi !"),1)]),t.stockInvalide?(o(),i("div",we,[e("span",Te,[d(U),g(" Vous avez une o\xF9 des commandes qui contiennent des produits avec un stock insuffisant, ces commandes ne pourront \xEAtre valid\xE9es.")])])):h("",!0),e("div",ke,[e("span",Ce,"Quantit\xE9 : "+l(t.qteFinal),1),e("span",$e,"M\xB2 : "+l(t.m2Final)+" m\xB2",1),e("span",Me,"Prix HT : "+l(s(r)(t.prixHT_TT))+" \u20AC",1),e("span",Pe,"Prix TVA : "+l(s(r)(t.prixTVA_TT))+" \u20AC",1),e("span",Ve,"Prix TTC : "+l(s(r)(t.prixTTC_TT))+" \u20AC",1)]),e("div",{class:T("overflow-auto max-h-[50vh] grid "+(t.erreur==0?t.reussi>4?s(u).grid4:s(_)():s(u).grid1))},[(o(!0),i(M,null,P(t.importMKP,(n,k)=>(o(),i("div",{class:"relative flex justify-center lg:col-span-1 col-span-4 py-4 px-4",key:k},[t.erreur==0&&n.status?(o(),i("div",Ie,[e("div",je,[n.clientProduitStockInvalide?(o(),i("div",ze,Ee)):h("",!0),e("span",null,"Client : "+l(n.prenom+" "+n.nom),1),e("span",null,"Adresse: "+l(n.adresse_livraison.adresse1),1),e("span",null,l(n.adresse_livraison.code_postal+", "+n.adresse_livraison.ville),1),e("span",null,l(n.adresse_livraison.pays),1),e("span",null,"Quantit\xE9 : "+l(n.products_tt),1),e("span",null,"M\xB2 total : "+l(n.m2_tt)+" m\xB2",1),e("span",null,"Prix TTC Total : "+l(n.prix_ttc_tt)+" \u20AC",1)]),e("div",Fe,[e("button",{type:"button",class:"bg-primary-100 hover:bg-primary-200 transition duration-300 p-2 rounded-lg",onClick:Se=>s(v)(k)},"Voir plus",8,Ae)])])):n.status?h("",!0):(o(),i("div",He,[e("span",null,"Erreur : "+l(n.message),1)]))]))),128))],2),e("div",Ne,[e("button",{class:T([{"opacity-25":s(a).processing},"py-2 px-4 flex group border border-green-300 rounded bg-green-900 bg-opacity-75 text-white hover:bg-opacity-90 transition duration-300 disabled:cursor-not-allowed disabled:bg-green-300"]),disabled:s(a).processing,onClick:y[0]||(y[0]=(...n)=>s(w)&&s(w)(...n))},"Valider l'importation",10,Ke)])]),_:1})]),_:1})])])]),_:1})]),_:1},8,["show"]))}};export{Le as _};
